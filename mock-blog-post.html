<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>What Marketing Taught Me About Football</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="mock-blog-post_files/libs/clipboard/clipboard.min.js"></script>
<script src="mock-blog-post_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="mock-blog-post_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="mock-blog-post_files/libs/quarto-html/popper.min.js"></script>
<script src="mock-blog-post_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="mock-blog-post_files/libs/quarto-html/anchor.min.js"></script>
<link href="mock-blog-post_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="mock-blog-post_files/libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="mock-blog-post_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="mock-blog-post_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="mock-blog-post_files/libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">What Marketing Taught Me About Football</h1>
<p class="subtitle lead">And What Football Taught Me about Marketing</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The rise of McVay’s use of 13 personnel made me think of an old <a href="https://youtu.be/93RzplSc3mM?si=_2p7P7xEF0g43bxu&amp;t=3395"><em>Athletic Football Show</em></a> episode where they pointed out the use of auxiliary runs to get to explosives. This got me thinking about how can we model the returns on NFL plays. A major talking point in the 2025 season was Sean McVay’s usage of 13 personnel to force another linebacker onto the field. The benefit of this is that they offense has heavier bodies on the field to help the run game but you are keeping more eligible receivers on the field. Since Kyle Shanahan and Sean McVay started as head coaches 8 years ago they have been two of the best play callers and play designers in the game. One way that their offenses are so good is that they find different ways to generate explosive plays. Typically explosive plays are defined as runs of ten plus yards or pass plays of twenty plus yards. Effectively you are gaining the equivalent of one plus first down on one play shortening the field and reducing the number of plays you have to run, or a quick touchdown.</p>
<p>There are a variety of ways that Kyle Shanahan and Sean McVay try to manipulate defenses. The most obvious ways that they do this is the use of pre-snap motion. Pre-snap motion can help the QB check into the right play by tipping whether a defense is in man or zone. Motion directly before the snap forces the defense to adjust run and pass assignments on the fly creating and getting offensive players up to top speed before they start the play.</p>
<p>Another way that Kyle and Sean try to manufacture explosive plays is by using personnel packages in creative ways. Each personnel package has certain advantage but, generally, the idea is that you want a certain defenseive personnel grouping on the field and leverage their weaknesses. To make sure we are on the same page on what different personnel packages mean I have broken down the most common ones in <a href="#tbl-personnel" class="quarto-xref">Table&nbsp;1</a>. Conventionally personnel pacakges are broken down by the number of RBs on the field and the number of TEs on the field.</p>
<div class="cell">
<div id="tbl-personnel" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-personnel-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Common Personnel Packages
</figcaption>
<div aria-describedby="tbl-personnel-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="wobusqhcjq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#wobusqhcjq table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#wobusqhcjq thead, tbody, tfoot, tr, td, th { border-style: none; }
 tr { background-color: transparent; }
#wobusqhcjq p { margin: 0; padding: 0; }
 #wobusqhcjq .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }
 #wobusqhcjq .gt_caption { padding-top: 4px; padding-bottom: 4px; }
 #wobusqhcjq .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }
 #wobusqhcjq .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }
 #wobusqhcjq .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #wobusqhcjq .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #wobusqhcjq .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #wobusqhcjq .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }
 #wobusqhcjq .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }
 #wobusqhcjq .gt_column_spanner_outer:first-child { padding-left: 0; }
 #wobusqhcjq .gt_column_spanner_outer:last-child { padding-right: 0; }
 #wobusqhcjq .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }
 #wobusqhcjq .gt_spanner_row { border-bottom-style: hidden; }
 #wobusqhcjq .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }
 #wobusqhcjq .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; }
 #wobusqhcjq .gt_from_md> :first-child { margin-top: 0; }
 #wobusqhcjq .gt_from_md> :last-child { margin-bottom: 0; }
 #wobusqhcjq .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; }
 #wobusqhcjq .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }
 #wobusqhcjq .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }
 #wobusqhcjq .gt_row_group_first td { border-top-width: 2px; }
 #wobusqhcjq .gt_row_group_first th { border-top-width: 2px; }
 #wobusqhcjq .gt_striped { color: #333333; background-color: #F4F4F4; }
 #wobusqhcjq .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #wobusqhcjq .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; }
 #wobusqhcjq .gt_first_grand_summary_row_bottom { border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; }
 #wobusqhcjq .gt_last_grand_summary_row_top { border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; }
 #wobusqhcjq .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }
 #wobusqhcjq .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }
 #wobusqhcjq .gt_left { text-align: left; }
 #wobusqhcjq .gt_center { text-align: center; }
 #wobusqhcjq .gt_right { text-align: right; font-variant-numeric: tabular-nums; }
 #wobusqhcjq .gt_font_normal { font-weight: normal; }
 #wobusqhcjq .gt_font_bold { font-weight: bold; }
 #wobusqhcjq .gt_font_italic { font-style: italic; }
 #wobusqhcjq .gt_super { font-size: 65%; }
 #wobusqhcjq .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }
 #wobusqhcjq .gt_asterisk { font-size: 100%; vertical-align: 0; }
 
</style>

<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="Number-of-RBs" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Number of RBs</th>
<th id="Number-of-TEs" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Number of TEs</th>
<th id="Personnel-Package" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Personnel Package</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_left">11</td>
</tr>
<tr class="even">
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">2</td>
<td class="gt_row gt_left">12</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">3</td>
<td class="gt_row gt_left">13</td>
</tr>
<tr class="even">
<td class="gt_row gt_right">2</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_left">21</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right">2</td>
<td class="gt_row gt_right">2</td>
<td class="gt_row gt_left">22</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
</figure>
</div>
</div>
<p>Since the days of the big neckroll the league has shifted. Due to changes in the rules passing has massively upticked. As a result defenses have tried to combat this schematically by playing with less defenders in the box, more defensive backs, and more complex pass coverages. Early on Kyle and Sean used a lot of under-center play action so defenses would simply change the picture on the quarterback when their backs were turned. To counter this Kyle has used a lot of 21 personnel to force a conflict between defending the run with lighter bodies or defending the pass with heavier bodies.</p>
<p>With all the talk of 13 personnel this year and ton of talk about pre-snap motion from the past few years I got kind of curious. What are the returns of some of these schematic trends and how can we model it? This is an interesting question for a variety of reasons. Should we focus on the design and mechanics of the play or should we focus more on what the bodies on the field get you? Well that kind of depends on a lot of things and as was the case for me what data you can access. Since I only have participation data I decided to look at explosive plays as a function of personnel grouping.</p>
</section>
<section id="how-can-we-model-this" class="level2">
<h2 class="anchored" data-anchor-id="how-can-we-model-this">How Can We Model This?</h2>
<p>There are lots of ways we can model this but because play callers have these different personel packages that they can use my mind immediately went to Media Mixed Modeling(MMMs). What is an MMM? Lets say you are in a marketing department at a large electronics company with a 1 million dollar budget to spend on advertising. You spend that million dollars across various marketing channels whether this search optimization, TV, email marketing, or influencer marketing.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> You then see that sales increased that month, but you want to know which channel was responsible for this spike so you can invest your money more wisely. In the early digital marketing age companies relied on multi-touch attribution models. The general idea of this was that if a consumer saw an ad on Facebook clicked on it and got the product. You could track those clicks back to consumer and then estimate a model to better undertand where to put your money.</p>
<p>However, around 2020 as a response to privacy concerns, laws passed by various governing bodies, and IOS14 these models started to break. More people started using ad blockers, Apple made tracking these attribution points much harder, and some people started using browsers that restricted access to what companies could track. In short, following the customer behavior got a lot harder. So marketing analytics turned to good old fashion experiments and MMMs. The general idea of an MMM is that weekly conversions, sales, revenue, etc are a function of</p>
<p><span class="math display">\[
Sales_t = \alpha + \overbrace{\sum^{m}_{m=1}\beta_{m}F(x^{*}_{t,m})}^{\text{Impact of marketing}} + \overbrace{\sum^{c}_{c=1} \gamma_{c} Z_{t,c}}^{\text{Impact of Controls}} + \varepsilon_{t}
\]</span></p>
<p>We can then go ahead and measure the relative contribution of each channel and forecast forward on where we should spend our money and about how much money we should spend on that channel. As you may imagine there are lots of gnarly time dynamics in marketing that you have to deal with. As an electronics company executive you would anticipate that every year in late October to early November sales effectively just stop as people wait for Black Friday sales. You also anticipate that there is only so many ads you can run on the same customer base before they stop caring.</p>
<p>Snapping back to football this made me think of personnel groupings as channels. You more or less have a fixed number of plays per game which would track with a marketing budget. The play design may be more akin to a specific ads on each of these platforms to adapt to the user base and platform specific rules.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> In addition, both marketing and football deal with really noisy data that try to capture complex behavioral dynamics and you do not have a ton of data to work with generally. Based on this idea I decided to try and build an MMM to understand how play-callers should invest their play budget. Perhaps just as importantly this felt like a fun opportunity to figure out how to build an MMM.</p>
</section>
<section id="building-a-regular-mmm" class="level1">
<h1>Building a Regular MMM</h1>
<section id="making-the-data" class="level2">
<h2 class="anchored" data-anchor-id="making-the-data">Making The Data</h2>
<p>For those only interested in the Football stuff you should just skip to the next section. For those sticking around for I am just working through the example provided by <a href="https://www.pymc-marketing.io/en/stable/notebooks/mmm/mmm_example.html">PyMC-Marketing</a>.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> We are going to generate some synthetic data for a made up company at the weekly level over two years. This roughly equates to <code>{python} 52*2</code> weeks of data.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> arviz <span class="im">as</span> az </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> preliz <span class="im">as</span> pz</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pymc <span class="im">as</span> pm</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pymc_extras.prior <span class="im">import</span> Prior</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pymc_marketing.mmm <span class="im">import</span> GeometricAdstock, LogisticSaturation</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pymc_marketing.mmm.multidimensional <span class="im">import</span> MMM</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pymc_marketing.mmm.transformers <span class="im">import</span> geometric_adstock, logistic_saturation</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> date</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># seed from random.org</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>seed <span class="op">=</span> <span class="dv">39233615</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>rng: np.random.Generator <span class="op">=</span> np.random.default_rng(seed <span class="op">=</span> seed)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>min_date <span class="op">=</span> date(<span class="dv">2018</span>, <span class="dv">4</span>,<span class="dv">1</span>)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>max_date<span class="op">=</span> date(<span class="dv">2021</span>, <span class="dv">9</span>, <span class="dv">1</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'figure.figsize'</span>] <span class="op">=</span> [<span class="dv">12</span>,<span class="dv">7</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="media-costs" class="level3">
<h3 class="anchored" data-anchor-id="media-costs">Media Costs</h3>
<p>First we are going to generate two years worth of data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> (pl.DataFrame({</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'date_week'</span>: pl.date_range(min_date, max_date, <span class="st">"1d"</span>, eager <span class="op">=</span> <span class="va">True</span>)}</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">filter</span>(pl.col(<span class="st">"date_week"</span>).dt.weekday() <span class="op">==</span> <span class="dv">1</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'date_week'</span>).dt.year().alias(<span class="st">'year'</span>),</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'date_week'</span>).dt.month().alias(<span class="st">'month'</span>),</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'date_week'</span>).dt.ordinal_day().alias(<span class="st">'day_of_year'</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next we are going to generate synthetic data for two channels. Which are going to be a bit different based on carryover and the saturation parameters. Roughly the costs for the each of the channels look like this.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> df.height</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>x1 <span class="op">=</span> rng.uniform(low <span class="op">=</span> <span class="fl">0.0</span>, high <span class="op">=</span> <span class="fl">1.0</span>, size <span class="op">=</span> n)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>x2 <span class="op">=</span> rng.uniform(low <span class="op">=</span> <span class="fl">0.0</span>, high <span class="op">=</span> <span class="fl">1.0</span>, size <span class="op">=</span> n)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> (</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    df</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        x1_raw <span class="op">=</span> pl.Series(x1), </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>        x2_raw <span class="op">=</span> pl.Series(x2)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>        pl.when(pl.col(<span class="st">'x1_raw'</span>) <span class="op">&gt;</span> <span class="fl">0.9</span>)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        .then(pl.col(<span class="st">'x1_raw'</span>))</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>        .otherwise((pl.col(<span class="st">'x1_raw'</span>)<span class="op">/</span><span class="dv">2</span>))</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>        .alias(<span class="st">'x1'</span>),</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>        pl.when(pl.col(<span class="st">'x2_raw'</span>) <span class="op">&gt;</span><span class="fl">0.8</span>)</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>        .then(pl.col(<span class="st">"x2_raw"</span>))</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>        .otherwise(<span class="dv">0</span>)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>        .alias(<span class="st">'x2'</span>)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    .drop([<span class="st">'x1_raw'</span>, <span class="st">'x2_raw'</span>])</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>df.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>['date_week', 'year', 'month', 'day_of_year', 'x1', 'x2']</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>long_data <span class="op">=</span> df.unpivot(on <span class="op">=</span> [<span class="st">'x1'</span>,<span class="st">'x2'</span>], index <span class="op">=</span> <span class="st">'date_week'</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data <span class="op">=</span> long_data, x <span class="op">=</span> <span class="st">'date_week'</span>, y <span class="op">=</span> <span class="st">'value'</span>, hue <span class="op">=</span> <span class="st">'variable'</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mock-blog-post_files/figure-html/make-raw-spend-1.png" class="img-fluid figure-img" width="588"></p>
</figure>
</div>
</div>
</div>
<p>Next we are going to pass each of these through our adstock function. In media marketing our adstock is effectively our carryover effect. If you see an ad one day how long is that going to stay with you?</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>alpha1: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.4</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>alpha2: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.2</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> (</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    df</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'x1'</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>        .map_batches(</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>            <span class="kw">lambda</span> s: geometric_adstock(</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>                x <span class="op">=</span> s.to_numpy(),</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>                alpha <span class="op">=</span> alpha1,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>                l_max <span class="op">=</span> <span class="dv">8</span>,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>                normalize<span class="op">=</span><span class="va">True</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>            ).<span class="bu">eval</span>().flatten(), </span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>            return_dtype<span class="op">=</span>pl.Float64</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>        ).alias(<span class="st">'x1_adstock'</span>),</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'x2'</span>)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>        .map_batches(</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>            <span class="kw">lambda</span> s: geometric_adstock(</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>                x <span class="op">=</span> s.to_numpy(),</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>                alpha <span class="op">=</span> alpha2,</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>                l_max <span class="op">=</span> <span class="dv">8</span>,</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>                normalize<span class="op">=</span><span class="va">True</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>            ).<span class="bu">eval</span>().flatten(), </span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>            return_dtype<span class="op">=</span>pl.Float64</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>        ).alias(<span class="st">'x2_adstock'</span>)</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The next thing we are going to do is add our concentration effects or how much money we spending in each chanel.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>lam1: <span class="bu">float</span> <span class="op">=</span> <span class="fl">4.0</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>lam2: <span class="bu">float</span> <span class="op">=</span> <span class="fl">3.0</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> (</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    df</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'x1_adstock'</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        .map_batches(</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>            <span class="kw">lambda</span> s: </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>            logistic_saturation(</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>                x <span class="op">=</span> s.to_numpy(),</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>                lam <span class="op">=</span> lam1</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>            ).<span class="bu">eval</span>(), </span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>            return_dtype<span class="op">=</span>pl.Float64</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>        ).alias(<span class="st">'x1_saturated_adstock'</span>), </span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'x2_adstock'</span>)</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>        .map_batches(</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>            <span class="kw">lambda</span> s: </span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>            logistic_saturation(</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>                x <span class="op">=</span> s.to_numpy(),</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>                lam <span class="op">=</span> lam1</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>            ).<span class="bu">eval</span>(), </span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>            return_dtype<span class="op">=</span>pl.Float64</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>        ).alias(<span class="st">'x2_saturated_adstock'</span>)</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Then as always we are going to plot this to make sure everything is good.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>long_effects <span class="op">=</span> df.unpivot(on <span class="op">=</span> cs.starts_with(<span class="st">'x'</span>), index <span class="op">=</span> <span class="st">'date_week'</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>g <span class="op">=</span> sns.FacetGrid(data<span class="op">=</span> long_effects, col <span class="op">=</span> <span class="st">'variable'</span>, col_wrap <span class="op">=</span> <span class="dv">2</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>g.<span class="bu">map</span>(sns.lineplot, <span class="st">'date_week'</span>, <span class="st">'value'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mock-blog-post_files/figure-html/unnamed-chunk-1-3.png" class="img-fluid figure-img" width="294"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mock-blog-post_files/figure-html/unnamed-chunk-1-4.png" class="img-fluid figure-img" width="566"></p>
</figure>
</div>
</div>
</div>
<p>This is looks like the costs are pretty realistic.</p>
</section>
<section id="trend-and-seasonal-parts" class="level3">
<h3 class="anchored" data-anchor-id="trend-and-seasonal-parts">Trend and Seasonal Parts</h3>
<p>Now we are going to add some seasonality</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.with_columns(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    trend<span class="op">=</span>(</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>        pl.linear_space(<span class="fl">0.0</span>, <span class="fl">50.0</span>, n)  <span class="co"># sequence 0..50 with n samples</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>        .add(<span class="fl">10.0</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>        .<span class="bu">pow</span>(<span class="fl">1.0</span> <span class="op">/</span> <span class="fl">4.0</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>        .sub(<span class="fl">1.0</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    cs<span class="op">=</span>(</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">-</span>(<span class="fl">2.0</span> <span class="op">*</span> <span class="fl">2.0</span> <span class="op">*</span> math.pi <span class="op">*</span> pl.col(<span class="st">"day_of_year"</span>) <span class="op">/</span> <span class="fl">365.5</span>).sin()</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    cc<span class="op">=</span>(</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>        (<span class="fl">1.0</span> <span class="op">*</span> <span class="fl">2.0</span> <span class="op">*</span> math.pi <span class="op">*</span> pl.col(<span class="st">"day_of_year"</span>) <span class="op">/</span> <span class="fl">365.5</span>).cos()</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>).with_columns(</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    seasonality<span class="op">=</span><span class="fl">0.5</span> <span class="op">*</span> (pl.col(<span class="st">"cs"</span>) <span class="op">+</span> pl.col(<span class="st">"cc"</span>))</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x<span class="op">=</span><span class="st">"date_week"</span>, y<span class="op">=</span><span class="st">"trend"</span>, color<span class="op">=</span><span class="st">"C2"</span>, label<span class="op">=</span><span class="st">"trend"</span>, data<span class="op">=</span>df, ax<span class="op">=</span>ax)</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>sns.lineplot(</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"date_week"</span>, y<span class="op">=</span><span class="st">"seasonality"</span>, color<span class="op">=</span><span class="st">"C3"</span>, label<span class="op">=</span><span class="st">"seasonality"</span>, data<span class="op">=</span>df, ax<span class="op">=</span>ax</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>ax.legend(loc<span class="op">=</span><span class="st">"upper left"</span>)</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>ax.<span class="bu">set</span>(xlabel<span class="op">=</span><span class="st">"date"</span>, ylabel<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Trend &amp; Seasonality Components"</span>, fontsize<span class="op">=</span><span class="dv">18</span>, fontweight<span class="op">=</span><span class="st">"bold"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mock-blog-post_files/figure-html/unnamed-chunk-2-7.png" class="img-fluid figure-img" width="582"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="making-controls" class="level3">
<h3 class="anchored" data-anchor-id="making-controls">Making Controls</h3>
<p>Finally, we will just add our dependent variable and our controls</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>epsilon <span class="op">=</span> rng.normal(loc <span class="op">=</span> <span class="fl">0.0</span>, scale <span class="op">=</span> <span class="fl">0.25</span>, size <span class="op">=</span> n)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>amplitude <span class="op">=</span> <span class="dv">1</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>beta_1 <span class="op">=</span> <span class="fl">3.0</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>beta_2 <span class="op">=</span> <span class="fl">2.0</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>betas <span class="op">=</span> [beta_1, beta_2]</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> (</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    df</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        pl.lit(<span class="fl">2.0</span>).alias(<span class="st">'intercept'</span>),</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>        pl.Series(epsilon).alias(<span class="st">'epsilon'</span>), </span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>        pl.lit(beta_1).alias(<span class="st">'beta_1'</span>), </span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>        pl.lit(beta_2).alias(<span class="st">'beta_2'</span>), </span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>        event_1<span class="op">=</span>(pl.col(<span class="st">"date_week"</span>) <span class="op">==</span> date(<span class="dv">2019</span>, <span class="dv">5</span>,<span class="dv">13</span>)).cast(pl.Float64),</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>        event_2<span class="op">=</span>(pl.col(<span class="st">"date_week"</span>) <span class="op">==</span> date(<span class="dv">2020</span>, <span class="dv">9</span>, <span class="dv">14</span>)).cast(pl.Float64),</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>        (</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>            pl.col(<span class="st">'intercept'</span>)</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>            <span class="op">+</span> pl.col(<span class="st">'trend'</span>)</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>            <span class="op">+</span> pl.col(<span class="st">"seasonality"</span>)</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>            <span class="op">+</span> pl.lit(<span class="fl">1.5</span>) <span class="op">*</span> pl.col(<span class="st">'event_1'</span>)</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>            <span class="op">+</span> pl.lit(<span class="fl">2.5</span>) <span class="op">*</span> pl.col(<span class="st">'event_2'</span>)</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>            <span class="op">+</span> pl.col(<span class="st">'beta_1'</span>) <span class="op">*</span> pl.col(<span class="st">'x1_saturated_adstock'</span>)</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>            <span class="op">+</span> pl.col(<span class="st">'beta_2'</span>) <span class="op">*</span> pl.col(<span class="st">'x2_saturated_adstock'</span>)</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>            <span class="op">+</span> pl.col(<span class="st">'epsilon'</span>)</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>        ).alias(<span class="st">'y'</span>)</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x<span class="op">=</span><span class="st">"date_week"</span>, y<span class="op">=</span><span class="st">"y"</span>, color<span class="op">=</span><span class="st">"black"</span>, data<span class="op">=</span>df, ax<span class="op">=</span>ax)</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>ax.<span class="bu">set</span>(xlabel<span class="op">=</span><span class="st">"date"</span>, ylabel<span class="op">=</span><span class="st">"y (thousands)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mock-blog-post_files/figure-html/unnamed-chunk-3-9.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<p><a href="https://www.pymc-marketing.io/en/stable/notebooks/mmm/mmm_example.html">We can now go ahead and look at the ground truth</a>, but that is an excercise left for the reader.</p>
</section>
</section>
<section id="building-the-regular-mmm" class="level2">
<h2 class="anchored" data-anchor-id="building-the-regular-mmm">Building The Regular MMM</h2>
<p>For whatever reason I found that working with PyMC is just easier to do in pandas so we are going to throw it over to Pandas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>df_pd <span class="op">=</span> df.to_pandas()</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>columns_to_keep <span class="op">=</span> [</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"date_week"</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"y"</span>,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"x1"</span>,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"x2"</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"event_1"</span>,</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"event_2"</span>,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"day_of_year"</span>,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>mod_df <span class="op">=</span> df_pd[columns_to_keep]</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>mod_df[<span class="st">'t'</span>] <span class="op">=</span> <span class="bu">range</span>(n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The whole stick of using Bayesian stats is to set appropriate priors. We know at least a few things</p>
<ul>
<li>Channel Contributions are positive and vary. So we are going to set a 1 sigma per channel. How much they vary is an open question. The wider the prior the more area we give the model to explore. This has some pros and cons.</li>
<li>We kind of expect channels where we spend the most to have more attributed sales. We wouldn’t advertise a product targeted for an older audience on TikTok as an example.</li>
</ul>
<p>The <code>MMM</code> class in <code>PyMC-Marketing</code> passes parts of your data through the <code>MaxABs</code> scaler in <code>scikit-learn</code>. So we have to express our priors in on this scale. So what would normally be a weakly informative prior may actually be super informative.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> MaxAbsScaler</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> MaxAbsScaler()</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>examp <span class="op">=</span> (</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    df</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'x1_saturated_adstock'</span>)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        .map_batches(</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>            <span class="kw">lambda</span> s: scaler.fit_transform(s.to_numpy().reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)).ravel(),</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>            return_dtype <span class="op">=</span> pl.Float64</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>        ).alias(<span class="st">'scaled_version'</span>)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="bu">long</span> <span class="op">=</span> examp.unpivot(on <span class="op">=</span> [<span class="st">'x1_saturated_adstock'</span>, <span class="st">'scaled_version'</span>], index<span class="op">=</span> <span class="st">'date_week'</span>)</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>fig,ax <span class="op">=</span> plt.subplots()</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(data <span class="op">=</span> <span class="bu">long</span>, x <span class="op">=</span> <span class="st">'date_week'</span>, y<span class="op">=</span> <span class="st">'value'</span>, hue <span class="op">=</span> <span class="st">'variable'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mock-blog-post_files/figure-html/unnamed-chunk-5-11.png" class="img-fluid figure-img" width="588"></p>
</figure>
</div>
</div>
</div>
<p>We are going to define our sigma priors as a share of what we spend on them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>spend_per_channel <span class="op">=</span> mod_df[[<span class="st">'x1'</span>, <span class="st">'x2'</span>]].<span class="bu">sum</span>(axis <span class="op">=</span> <span class="dv">0</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>spend_share <span class="op">=</span>  spend_per_channel<span class="op">/</span>spend_per_channel.<span class="bu">sum</span>()</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>sigma_prior <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> spend_share.to_numpy()</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> mod_df.drop(<span class="st">'y'</span>, axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> mod_df[<span class="st">'y'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next we are just going to define some priors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>my_priors<span class="op">=</span> {</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"intercept"</span>: Prior(<span class="st">"Normal"</span>, mu<span class="op">=</span><span class="fl">0.5</span>, sigma<span class="op">=</span><span class="fl">0.2</span>),</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"adstock_alpha"</span>: Prior(<span class="st">"Beta"</span>, alpha<span class="op">=</span><span class="dv">1</span>, beta<span class="op">=</span><span class="dv">3</span>, dims<span class="op">=</span><span class="st">"channel"</span>),</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"saturation_beta"</span>: Prior(<span class="st">"HalfNormal"</span>, sigma<span class="op">=</span>sigma_prior, dims<span class="op">=</span><span class="st">"channel"</span>),</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"saturation_lam"</span>: Prior(<span class="st">"Gamma"</span>, alpha<span class="op">=</span><span class="dv">3</span>, beta<span class="op">=</span><span class="dv">1</span>, dims<span class="op">=</span><span class="st">"channel"</span>),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"gamma_control"</span>: Prior(<span class="st">"Normal"</span>, mu<span class="op">=</span><span class="dv">0</span>, sigma<span class="op">=</span><span class="fl">0.05</span>, dims<span class="op">=</span><span class="st">"control"</span>),</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"gamma_fourier"</span>: Prior(<span class="st">"Laplace"</span>, mu<span class="op">=</span><span class="dv">0</span>, b<span class="op">=</span><span class="fl">0.2</span>, dims<span class="op">=</span><span class="st">"fourier_mode"</span>),</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"likelihood"</span>: Prior(<span class="st">"Normal"</span>, sigma<span class="op">=</span>Prior(<span class="st">"HalfNormal"</span>, sigma<span class="op">=</span><span class="dv">6</span>)),</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>samp_config <span class="op">=</span> {<span class="st">'progressbar'</span>: <span class="va">True</span>, <span class="st">'random_seed'</span>: seed, <span class="st">'nuts_sampler'</span>: <span class="st">'numpyro'</span>}</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>mmm <span class="op">=</span> MMM(</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    model_config<span class="op">=</span>my_priors,</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    sampler_config<span class="op">=</span>samp_config,</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    date_column<span class="op">=</span><span class="st">"date_week"</span>,</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    adstock<span class="op">=</span>GeometricAdstock(l_max<span class="op">=</span><span class="dv">8</span>),</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    saturation<span class="op">=</span>LogisticSaturation(),</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    channel_columns<span class="op">=</span>[<span class="st">"x1"</span>, <span class="st">"x2"</span>],</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    control_columns<span class="op">=</span>[<span class="st">"event_1"</span>, <span class="st">"event_2"</span>, <span class="st">"t"</span>],</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    yearly_seasonality<span class="op">=</span><span class="dv">2</span>,</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    target_column <span class="op">=</span> <span class="st">'y'</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>mmm.build_model(X,y)</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>mmm.add_original_scale_contribution_variable(</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>    var<span class="op">=</span>[</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">"channel_contribution"</span>,</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>        <span class="st">"control_contribution"</span>,</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>        <span class="st">"intercept_contribution"</span>,</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">"yearly_seasonality_contribution"</span>,</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">"y"</span>,</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As always we should look a the prior predictive to make sure things look good</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>mmm.sample_prior_predictive(X,y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in notebooks */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
  line-height: 1.6;
  padding-bottom: 4px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
}

.xr-header {
  border-bottom: solid 1px var(--xr-border-color);
  margin-bottom: 4px;
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-obj-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type,
.xr-group-box-contents > label {
  color: var(--xr-font-color2);
  display: block;
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
  margin-block-start: 0;
  margin-block-end: 0;
}

.xr-section-item {
  display: contents;
}

.xr-section-item > input,
.xr-group-box-contents > input,
.xr-array-wrap > input {
  display: block;
  opacity: 0;
  height: 0;
  margin: 0;
}

.xr-section-item > input + label,
.xr-var-item > input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item > input:enabled + label,
.xr-var-item > input:enabled + label,
.xr-array-wrap > input:enabled + label,
.xr-group-box-contents > input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item > input:focus-visible + label,
.xr-var-item > input:focus-visible + label,
.xr-array-wrap > input:focus-visible + label,
.xr-group-box-contents > input:focus-visible + label {
  outline: auto;
}

.xr-section-item > input:enabled + label:hover,
.xr-var-item > input:enabled + label:hover,
.xr-array-wrap > input:enabled + label:hover,
.xr-group-box-contents > input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
  white-space: nowrap;
}

.xr-section-summary > em {
  font-weight: normal;
}

.xr-span-grid {
  grid-column-end: -1;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.3em;
}

.xr-group-box-contents > input:checked + label > span {
  display: inline-block;
  padding-left: 0.6em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details,
.xr-group-box-contents > label {
  padding-top: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  grid-column: 1 / -1;
  margin-top: 4px;
  margin-bottom: 5px;
}

.xr-section-summary-in ~ .xr-section-details {
  display: none;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-children {
  display: inline-grid;
  grid-template-columns: 100%;
  grid-column: 1 / -1;
  padding-top: 4px;
}

.xr-group-box {
  display: inline-grid;
  grid-template-columns: 0px 30px auto;
}

.xr-group-box-vline {
  grid-column-start: 1;
  border-right: 0.2em solid;
  border-color: var(--xr-border-color);
  width: 0px;
}

.xr-group-box-hline {
  grid-column-start: 2;
  grid-row-start: 1;
  height: 1em;
  width: 26px;
  border-bottom: 0.2em solid;
  border-color: var(--xr-border-color);
}

.xr-group-box-contents {
  grid-column-start: 3;
  padding-bottom: 4px;
}

.xr-group-box-contents > label::before {
  content: "📂";
  padding-right: 0.3em;
}

.xr-group-box-contents > input:checked + label::before {
  content: "📁";
}

.xr-group-box-contents > input:checked + label {
  padding-bottom: 0px;
}

.xr-group-box-contents > input:checked ~ .xr-sections {
  display: none;
}

.xr-group-box-contents > input + label > span {
  display: none;
}

.xr-group-box-ellipsis {
  font-size: 1.4em;
  font-weight: 900;
  color: var(--xr-font-color2);
  letter-spacing: 0.15em;
  cursor: default;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 729kB
Dimensions:  (date: 179, sample: 500)
Coordinates:
  * date     (date) datetime64[ms] 1kB 2018-04-02 2018-04-09 ... 2021-08-30
  * sample   (sample) object 4kB MultiIndex
  * chain    (sample) int64 4kB 0 0 0 0 0 0 0 0 0 0 0 ... 0 0 0 0 0 0 0 0 0 0 0
  * draw     (sample) int64 4kB 0 1 2 3 4 5 6 7 ... 493 494 495 496 497 498 499
Data variables:
    y        (date, sample) float64 716kB 7.649 5.486 1.14 ... -3.344 -17.05
Attributes:
    created_at:                 2026-02-25T20:15:19.150492+00:00
    arviz_version:              0.23.1
    inference_library:          pymc
    inference_library_version:  5.27.1
    pymc_marketing_version:     0.17.1</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-b4d399e1-1ecd-49f3-ab9b-1d1f6f81a59d" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-b4d399e1-1ecd-49f3-ab9b-1d1f6f81a59d" class="xr-section-summary">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">date</span>: 179</li><li><span class="xr-has-index">sample</span>: 500</li></ul></div></li><li class="xr-section-item"><input id="section-58783373-d1cb-4f32-8090-640c4fdcc4e5" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-58783373-d1cb-4f32-8090-640c4fdcc4e5" class="xr-section-summary" title="Expand/collapse section">Coordinates: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">date</span></div><div class="xr-var-dims">(date)</div><div class="xr-var-dtype">datetime64[ms]</div><div class="xr-var-preview xr-preview">2018-04-02 ... 2021-08-30</div><input id="attrs-34ca9c6a-12f0-4113-9d97-04a36f8f59ad" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-34ca9c6a-12f0-4113-9d97-04a36f8f59ad" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ca8fece5-eb58-414f-9689-0466de2edbda" class="xr-var-data-in" type="checkbox"><label for="data-ca8fece5-eb58-414f-9689-0466de2edbda" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['2018-04-02T00:00:00.000', '2018-04-09T00:00:00.000',
       '2018-04-16T00:00:00.000', '2018-04-23T00:00:00.000',
       '2018-04-30T00:00:00.000', '2018-05-07T00:00:00.000',
       '2018-05-14T00:00:00.000', '2018-05-21T00:00:00.000',
       '2018-05-28T00:00:00.000', '2018-06-04T00:00:00.000',
       '2018-06-11T00:00:00.000', '2018-06-18T00:00:00.000',
       '2018-06-25T00:00:00.000', '2018-07-02T00:00:00.000',
       '2018-07-09T00:00:00.000', '2018-07-16T00:00:00.000',
       '2018-07-23T00:00:00.000', '2018-07-30T00:00:00.000',
       '2018-08-06T00:00:00.000', '2018-08-13T00:00:00.000',
       '2018-08-20T00:00:00.000', '2018-08-27T00:00:00.000',
       '2018-09-03T00:00:00.000', '2018-09-10T00:00:00.000',
       '2018-09-17T00:00:00.000', '2018-09-24T00:00:00.000',
       '2018-10-01T00:00:00.000', '2018-10-08T00:00:00.000',
       '2018-10-15T00:00:00.000', '2018-10-22T00:00:00.000',
       '2018-10-29T00:00:00.000', '2018-11-05T00:00:00.000',
       '2018-11-12T00:00:00.000', '2018-11-19T00:00:00.000',
       '2018-11-26T00:00:00.000', '2018-12-03T00:00:00.000',
       '2018-12-10T00:00:00.000', '2018-12-17T00:00:00.000',
       '2018-12-24T00:00:00.000', '2018-12-31T00:00:00.000',
       '2019-01-07T00:00:00.000', '2019-01-14T00:00:00.000',
       '2019-01-21T00:00:00.000', '2019-01-28T00:00:00.000',
       '2019-02-04T00:00:00.000', '2019-02-11T00:00:00.000',
       '2019-02-18T00:00:00.000', '2019-02-25T00:00:00.000',
       '2019-03-04T00:00:00.000', '2019-03-11T00:00:00.000',
       '2019-03-18T00:00:00.000', '2019-03-25T00:00:00.000',
       '2019-04-01T00:00:00.000', '2019-04-08T00:00:00.000',
       '2019-04-15T00:00:00.000', '2019-04-22T00:00:00.000',
       '2019-04-29T00:00:00.000', '2019-05-06T00:00:00.000',
       '2019-05-13T00:00:00.000', '2019-05-20T00:00:00.000',
       '2019-05-27T00:00:00.000', '2019-06-03T00:00:00.000',
       '2019-06-10T00:00:00.000', '2019-06-17T00:00:00.000',
       '2019-06-24T00:00:00.000', '2019-07-01T00:00:00.000',
       '2019-07-08T00:00:00.000', '2019-07-15T00:00:00.000',
       '2019-07-22T00:00:00.000', '2019-07-29T00:00:00.000',
       '2019-08-05T00:00:00.000', '2019-08-12T00:00:00.000',
       '2019-08-19T00:00:00.000', '2019-08-26T00:00:00.000',
       '2019-09-02T00:00:00.000', '2019-09-09T00:00:00.000',
       '2019-09-16T00:00:00.000', '2019-09-23T00:00:00.000',
       '2019-09-30T00:00:00.000', '2019-10-07T00:00:00.000',
       '2019-10-14T00:00:00.000', '2019-10-21T00:00:00.000',
       '2019-10-28T00:00:00.000', '2019-11-04T00:00:00.000',
       '2019-11-11T00:00:00.000', '2019-11-18T00:00:00.000',
       '2019-11-25T00:00:00.000', '2019-12-02T00:00:00.000',
       '2019-12-09T00:00:00.000', '2019-12-16T00:00:00.000',
       '2019-12-23T00:00:00.000', '2019-12-30T00:00:00.000',
       '2020-01-06T00:00:00.000', '2020-01-13T00:00:00.000',
       '2020-01-20T00:00:00.000', '2020-01-27T00:00:00.000',
       '2020-02-03T00:00:00.000', '2020-02-10T00:00:00.000',
       '2020-02-17T00:00:00.000', '2020-02-24T00:00:00.000',
       '2020-03-02T00:00:00.000', '2020-03-09T00:00:00.000',
       '2020-03-16T00:00:00.000', '2020-03-23T00:00:00.000',
       '2020-03-30T00:00:00.000', '2020-04-06T00:00:00.000',
       '2020-04-13T00:00:00.000', '2020-04-20T00:00:00.000',
       '2020-04-27T00:00:00.000', '2020-05-04T00:00:00.000',
       '2020-05-11T00:00:00.000', '2020-05-18T00:00:00.000',
       '2020-05-25T00:00:00.000', '2020-06-01T00:00:00.000',
       '2020-06-08T00:00:00.000', '2020-06-15T00:00:00.000',
       '2020-06-22T00:00:00.000', '2020-06-29T00:00:00.000',
       '2020-07-06T00:00:00.000', '2020-07-13T00:00:00.000',
       '2020-07-20T00:00:00.000', '2020-07-27T00:00:00.000',
       '2020-08-03T00:00:00.000', '2020-08-10T00:00:00.000',
       '2020-08-17T00:00:00.000', '2020-08-24T00:00:00.000',
       '2020-08-31T00:00:00.000', '2020-09-07T00:00:00.000',
       '2020-09-14T00:00:00.000', '2020-09-21T00:00:00.000',
       '2020-09-28T00:00:00.000', '2020-10-05T00:00:00.000',
       '2020-10-12T00:00:00.000', '2020-10-19T00:00:00.000',
       '2020-10-26T00:00:00.000', '2020-11-02T00:00:00.000',
       '2020-11-09T00:00:00.000', '2020-11-16T00:00:00.000',
       '2020-11-23T00:00:00.000', '2020-11-30T00:00:00.000',
       '2020-12-07T00:00:00.000', '2020-12-14T00:00:00.000',
       '2020-12-21T00:00:00.000', '2020-12-28T00:00:00.000',
       '2021-01-04T00:00:00.000', '2021-01-11T00:00:00.000',
       '2021-01-18T00:00:00.000', '2021-01-25T00:00:00.000',
       '2021-02-01T00:00:00.000', '2021-02-08T00:00:00.000',
       '2021-02-15T00:00:00.000', '2021-02-22T00:00:00.000',
       '2021-03-01T00:00:00.000', '2021-03-08T00:00:00.000',
       '2021-03-15T00:00:00.000', '2021-03-22T00:00:00.000',
       '2021-03-29T00:00:00.000', '2021-04-05T00:00:00.000',
       '2021-04-12T00:00:00.000', '2021-04-19T00:00:00.000',
       '2021-04-26T00:00:00.000', '2021-05-03T00:00:00.000',
       '2021-05-10T00:00:00.000', '2021-05-17T00:00:00.000',
       '2021-05-24T00:00:00.000', '2021-05-31T00:00:00.000',
       '2021-06-07T00:00:00.000', '2021-06-14T00:00:00.000',
       '2021-06-21T00:00:00.000', '2021-06-28T00:00:00.000',
       '2021-07-05T00:00:00.000', '2021-07-12T00:00:00.000',
       '2021-07-19T00:00:00.000', '2021-07-26T00:00:00.000',
       '2021-08-02T00:00:00.000', '2021-08-09T00:00:00.000',
       '2021-08-16T00:00:00.000', '2021-08-23T00:00:00.000',
       '2021-08-30T00:00:00.000'], dtype='datetime64[ms]')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">sample</span></div><div class="xr-var-dims">(sample)</div><div class="xr-var-dtype">object</div><div class="xr-var-preview xr-preview">MultiIndex</div><input id="attrs-be4cc7d8-2461-4a5e-8c5c-755010bb7bf6" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-be4cc7d8-2461-4a5e-8c5c-755010bb7bf6" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-c4340a4e-4962-4437-b7dd-9fa06113fb05" class="xr-var-data-in" type="checkbox"><label for="data-c4340a4e-4962-4437-b7dd-9fa06113fb05" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>[500 values with dtype=object]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(sample)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 0 0 0 0 0 0 0 ... 0 0 0 0 0 0 0 0</div><input id="attrs-1056f054-b37c-49df-8a5c-8e2e1a7d4046" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-1056f054-b37c-49df-8a5c-8e2e1a7d4046" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-515dc2bb-385b-42f5-b0b7-c17f01f8d5f0" class="xr-var-data-in" type="checkbox"><label for="data-515dc2bb-385b-42f5-b0b7-c17f01f8d5f0" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>[500 values with dtype=int64]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(sample)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 495 496 497 498 499</div><input id="attrs-233f99be-d172-4fef-961e-cfa9b312d6e8" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-233f99be-d172-4fef-961e-cfa9b312d6e8" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-4cd7c132-8cbb-45fb-8a46-4dc19edd16b0" class="xr-var-data-in" type="checkbox"><label for="data-4cd7c132-8cbb-45fb-8a46-4dc19edd16b0" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>[500 values with dtype=int64]</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-dd63ddbf-9696-4be6-801b-a48dc9337bb8" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-dd63ddbf-9696-4be6-801b-a48dc9337bb8" class="xr-section-summary" title="Expand/collapse section">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>y</span></div><div class="xr-var-dims">(date, sample)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">7.649 5.486 1.14 ... -3.344 -17.05</div><input id="attrs-af0e2e09-a5db-4ecc-b627-0533ea255b03" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-af0e2e09-a5db-4ecc-b627-0533ea255b03" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-0b37d217-79d9-4fa2-b947-2f2ebce450fd" class="xr-var-data-in" type="checkbox"><label for="data-0b37d217-79d9-4fa2-b947-2f2ebce450fd" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[  7.64891166,   5.48645554,   1.14029433, ...,   1.92505337,
         12.11157865,   1.90617036],
       [  3.94464148,   1.10738704,   5.35765002, ...,  -1.09522496,
          3.1870783 ,  -0.63802082],
       [  5.73933038,   4.1996441 ,  -3.67854038, ...,   1.56134533,
          7.04901559,   7.84631322],
       ...,
       [  3.31729401,   7.19348105,   2.53362874, ...,  -3.95104168,
          1.37077073,   9.82700581],
       [ -0.20715842,  -8.76361122,   8.3238964 , ...,   2.58361272,
          2.21659638,  -9.30254537],
       [  6.68064011,   9.62203344,  -3.08881001, ...,  -1.19043849,
         -3.34397234, -17.05498052]], shape=(179, 500))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-5f570779-4c81-4d18-817e-1bbe809ceae8" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-5f570779-4c81-4d18-817e-1bbe809ceae8" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(5)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2026-02-25T20:15:19.150492+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.23.1</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.27.1</dd><dt><span>pymc_marketing_version :</span></dt><dd>0.17.1</dd></dl></div></li></ul></div></div>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>fig,axes <span class="op">=</span> mmm.plot.prior_predictive()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mock-blog-post_files/figure-html/unnamed-chunk-8-13.png" class="img-fluid figure-img" width="818"></p>
</figure>
</div>
</div>
</div>
<p>Since we have the ability to build a model where we know the true DGP we know these priors are pretty weakly informative. Basically all this means is that we want to give the model a large enough space to explore, but not so big that we let the model go from <span class="math inline">\(-\infty\)</span> to <span class="math inline">\(\infty\)</span></p>
</section>
<section id="what-are-some-of-these-parameters" class="level2">
<h2 class="anchored" data-anchor-id="what-are-some-of-these-parameters">What are some of these parameters?</h2>
<p>So the entire crux of MMMs is that we don’t expect ads: to work instantly, every additional ad to increase sales, and the effect of an ad to persist that much. Thee multiple avenues to see growth in the outcome of interest was what initially got me thinking about using these models. But when I started digging more into these models these time dynamics became what got me really excited to see how this could work. In this section I am going to borrow heavily from some excellent blog posts by <a href="https://towardsdatascience.com/mastering-marketing-mix-modelling-in-python-7bbfe31360f9/?source=post_page-----49dce1a5b33d---------------------------------------">Ryan O’Sullivan</a></p>
<section id="adstock" class="level3">
<h3 class="anchored" data-anchor-id="adstock">Adstock</h3>
<p>Adstock really just refers to the decay rate. So if I run an advertisement how quickly do those effects diminsh overtime. Adstock is typically conceptualized as a ratio where . Typically adstock is constrained to be between zero and 1 so the Beta distribution is used more often than not. A vagueish prior would be a <span class="math inline">\(adstock \sim \beta(\alpha = 1, \beta = 3)\)</span> or something that looks like this</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>fig, axe <span class="op">=</span> plt.subplots()</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>pz.Beta(alpha <span class="op">=</span> <span class="dv">1</span>, beta <span class="op">=</span> <span class="dv">3</span>).plot_pdf()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mock-blog-post_files/figure-html/unnamed-chunk-9-15.png" class="img-fluid figure-img" width="754"></p>
</figure>
</div>
</div>
</div>
<p>To build an intuition on what that may mean practically we can simulate some spend</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>raw_spend <span class="op">=</span> np.array([<span class="dv">1000</span>, <span class="dv">900</span>, <span class="dv">800</span>, <span class="dv">700</span>, <span class="dv">600</span>, <span class="dv">500</span>, <span class="dv">400</span>, <span class="dv">300</span>, <span class="dv">200</span>, <span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>])</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>adstock_spend_1 <span class="op">=</span> geometric_adstock(x<span class="op">=</span>raw_spend, alpha<span class="op">=</span><span class="fl">0.20</span>, l_max<span class="op">=</span><span class="dv">8</span>, normalize<span class="op">=</span><span class="va">True</span>).<span class="bu">eval</span>().flatten()</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>adstock_spend_2 <span class="op">=</span> geometric_adstock(x<span class="op">=</span>raw_spend, alpha<span class="op">=</span><span class="fl">0.50</span>, l_max<span class="op">=</span><span class="dv">8</span>, normalize<span class="op">=</span><span class="va">True</span>).<span class="bu">eval</span>().flatten()</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>adstock_spend_3 <span class="op">=</span> geometric_adstock(x<span class="op">=</span>raw_spend, alpha<span class="op">=</span><span class="fl">0.80</span>, l_max<span class="op">=</span><span class="dv">8</span>, normalize<span class="op">=</span><span class="va">True</span>).<span class="bu">eval</span>().flatten()</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>plt.plot(raw_spend, marker<span class="op">=</span><span class="st">'o'</span>, label<span class="op">=</span><span class="st">'Raw Spend'</span>, color<span class="op">=</span><span class="st">'blue'</span>)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>plt.fill_between(<span class="bu">range</span>(<span class="bu">len</span>(raw_spend)), <span class="dv">0</span>, raw_spend, color<span class="op">=</span><span class="st">'blue'</span>, alpha<span class="op">=</span><span class="fl">0.2</span>)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>plt.plot(adstock_spend_1, marker<span class="op">=</span><span class="st">'o'</span>, label<span class="op">=</span><span class="st">'Adstock (alpha=0.20)'</span>, color<span class="op">=</span><span class="st">'orange'</span>)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>plt.fill_between(<span class="bu">range</span>(<span class="bu">len</span>(adstock_spend_1)), <span class="dv">0</span>, adstock_spend_1, color<span class="op">=</span><span class="st">'orange'</span>, alpha<span class="op">=</span><span class="fl">0.2</span>)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>plt.plot(adstock_spend_2, marker<span class="op">=</span><span class="st">'o'</span>, label<span class="op">=</span><span class="st">'Adstock (alpha=0.50)'</span>, color<span class="op">=</span><span class="st">'red'</span>)</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>plt.fill_between(<span class="bu">range</span>(<span class="bu">len</span>(adstock_spend_2)), <span class="dv">0</span>, adstock_spend_2, color<span class="op">=</span><span class="st">'red'</span>, alpha<span class="op">=</span><span class="fl">0.2</span>)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>plt.plot(adstock_spend_3, marker<span class="op">=</span><span class="st">'o'</span>, label<span class="op">=</span><span class="st">'Adstock (alpha=0.80)'</span>, color<span class="op">=</span><span class="st">'purple'</span>)</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>plt.fill_between(<span class="bu">range</span>(<span class="bu">len</span>(adstock_spend_3)), <span class="dv">0</span>, adstock_spend_3, color<span class="op">=</span><span class="st">'purple'</span>, alpha<span class="op">=</span><span class="fl">0.2</span>)</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Weeks'</span>)</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Spend'</span>)</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Geometric Adstock'</span>)</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mock-blog-post_files/figure-html/unnamed-chunk-10-17.png" class="img-fluid figure-img" width="824"></p>
</figure>
</div>
</div>
</div>
<p>In effect geometrick adstock is just a weighted average of media spend in the current period and previous periods where we make an assumption about the maximum duratioon of the carryover effect. As the alpha values decrease the impact of the spend overtime. Generally this is used for re-targeting or campaigns with calls to action. Typically the reason you would set a low alpha value is if you are reasonably confident customers have seen the ad you are just trying to get them back onto your website to do something. The Red Cross doesn’t want you to sit there and think about whether you should donate money after a hurricane or earthquake. They want to get you onto the website as quickly as possible to donate resources.</p>
<p>Inversely if you just get into post-production for a movie and you have a tenative release date 2 months from now running an ad that tries to get you to buy a ticket is not all that helpful. You may want run a campaign where you are trying to get people excited to go to the movies. You would set a higher alpha value to reflect this expected decay. One sticking point about adstock, for me, is that we refer to the alpha parameter, but when we are playing around with the priors to get more realistic looking decays you are going to be changing the beta parameter. So if we wanted to get a similar looking Beta we would do something to this effect.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>fig, axe <span class="op">=</span> plt.subplots()</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>pz.Beta(<span class="dv">1</span>,<span class="dv">2</span> ).plot_pdf(legend <span class="op">=</span> <span class="st">"Infinite Memory: Alpha = 1,Beta = 1"</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>pz.Beta(<span class="dv">1</span>,<span class="dv">10</span>).plot_pdf(legend <span class="op">=</span> <span class="st">'Quick Decay:Alpha = 1, Beta = 10'</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>pz.Beta(<span class="dv">1</span>, <span class="dv">5</span>).plot_pdf(legend <span class="op">=</span> <span class="st">'Slowish Decay:Alpha = 1,Beta = 5'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mock-blog-post_files/figure-html/unnamed-chunk-11-19.png" class="img-fluid figure-img" width="836"></p>
</figure>
</div>
</div>
</div>
<p>To bring this back to football we can start to imagine how this dynamic arises. During the 2025 season the Rams gained a schematic advantage by using spending more plays in 13 personnel. This allowed the Rams to have heavier bodies on the field while also being able to keep more eligible receivers on the field. The Rams kind of stumbled into this because Puca Nacua sprains his ankle during week 6. We would expect a schematic wrinkle like this to have some boom as teams are caught on the backfoot. However, as the season progresses we expect to see those effects decay a bit. As you the season progresses we would expect explosive plays to regress as teams start to figure out the best ways to match personnel or scheme up ways to stop the Rams. Additionally, as the season progresses more guys tend to get injured so personnel groupings may be less effective. This frees up a defense to invest their resources elsewhere.</p>
</section>
<section id="saturation" class="level3">
<h3 class="anchored" data-anchor-id="saturation">Saturation</h3>
<p>Naturally in marketing and football we would expect that as we invest more resources in a particular channel or playoff grouping the returns start to diminish. With 13 personnel you do get some benefits in the run game. TE tend to be better blockers than wide receivers. However, their are only <code>{python} 11 - (3 + 1 + 6)</code> receivers on the field. You may have to sacrifice some route concepts that wide receivers would normally run since we wouldn’t expect most tight ends to be able to do that and sell the run fake.</p>
<p>Typically we but a Gamma prior on the saturation parameter. Typically we use Gammas or Inverse Gammas to handle things like rates which are strictly positive, but have no theoretical upper bounds. If you are waiting in line for something you could theoretically wait inline forever, but for the most part there is some practical upperbounds to waitimes.</p>
<p>Instead of zeroing in on the exact point where the decay happens we are going to place a prior on how quickly we expect diminishing returns start to happen. If we set our saturation to one we expect that for every additional spending unit we would expect the returns to diminish by about a unit. Whereas with a Lambda of 8 we hit that saturation point much quicker.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>scaled_spend <span class="op">=</span> np.linspace(start<span class="op">=</span><span class="fl">0.0</span>, stop<span class="op">=</span><span class="fl">1.0</span>, num<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>saturated_spend_1 <span class="op">=</span> logistic_saturation(x<span class="op">=</span>scaled_spend, lam<span class="op">=</span><span class="dv">1</span>).<span class="bu">eval</span>()</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>saturated_spend_2 <span class="op">=</span> logistic_saturation(x<span class="op">=</span>scaled_spend, lam<span class="op">=</span><span class="dv">2</span>).<span class="bu">eval</span>()</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>saturated_spend_4 <span class="op">=</span> logistic_saturation(x<span class="op">=</span>scaled_spend, lam<span class="op">=</span><span class="dv">4</span>).<span class="bu">eval</span>()</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>saturated_spend_8 <span class="op">=</span> logistic_saturation(x<span class="op">=</span>scaled_spend, lam<span class="op">=</span><span class="dv">8</span>).<span class="bu">eval</span>()</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x<span class="op">=</span>scaled_spend, y<span class="op">=</span>saturated_spend_1, label<span class="op">=</span><span class="st">"1"</span>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x<span class="op">=</span>scaled_spend, y<span class="op">=</span>saturated_spend_2, label<span class="op">=</span><span class="st">"2"</span>)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x<span class="op">=</span>scaled_spend, y<span class="op">=</span>saturated_spend_4, label<span class="op">=</span><span class="st">"4"</span>)</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x<span class="op">=</span>scaled_spend, y<span class="op">=</span>saturated_spend_8, label<span class="op">=</span><span class="st">"8"</span>)</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Logistic Saturation'</span>)</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Scaled Marketing Spend'</span>)</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Saturated Marketing Spend'</span>)</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Lambda'</span>)</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mock-blog-post_files/figure-html/unnamed-chunk-12-21.png" class="img-fluid figure-img" width="663"></p>
</figure>
</div>
</div>
</div>
<p>We can imagine that as we start to invest more plays into a personnel grouping we are leaving explosive plays out of other personnel groupings on the table. As we invest more plays in the 13 personnel bucket we may not be devouting time to other auxilary heavy personnel packages where with smaller investments we may see more returns. Hypothetically a team may have spent more time game planning for 13 and 11 personnel than some of the other potential personnel packages. So sprinkling in plays out of 21 could yield more explosive plays simply because the defense isn’t expecting the Rams to run a ton of 21.</p>
</section>
</section>
<section id="getting-predictions" class="level2">
<h2 class="anchored" data-anchor-id="getting-predictions">Getting Predictions</h2>
<p>So after that long aside lets fit the model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>mmm.fit(X <span class="op">=</span> X, </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>        y <span class="op">=</span> y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

            <div>
              <div class="xr-header">
                <div class="xr-obj-type">arviz.InferenceData</div>
              </div>
              <ul class="xr-sections group-sections">
              
            <li class="xr-section-item">
                  <input id="idata_posteriorbd8a92be-bc1a-4ce9-99c2-1b1ba70d27f8" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_posteriorbd8a92be-bc1a-4ce9-99c2-1b1ba70d27f8" class="xr-section-summary">posterior</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in notebooks */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
  line-height: 1.6;
  padding-bottom: 4px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
}

.xr-header {
  border-bottom: solid 1px var(--xr-border-color);
  margin-bottom: 4px;
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-obj-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type,
.xr-group-box-contents > label {
  color: var(--xr-font-color2);
  display: block;
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
  margin-block-start: 0;
  margin-block-end: 0;
}

.xr-section-item {
  display: contents;
}

.xr-section-item > input,
.xr-group-box-contents > input,
.xr-array-wrap > input {
  display: block;
  opacity: 0;
  height: 0;
  margin: 0;
}

.xr-section-item > input + label,
.xr-var-item > input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item > input:enabled + label,
.xr-var-item > input:enabled + label,
.xr-array-wrap > input:enabled + label,
.xr-group-box-contents > input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item > input:focus-visible + label,
.xr-var-item > input:focus-visible + label,
.xr-array-wrap > input:focus-visible + label,
.xr-group-box-contents > input:focus-visible + label {
  outline: auto;
}

.xr-section-item > input:enabled + label:hover,
.xr-var-item > input:enabled + label:hover,
.xr-array-wrap > input:enabled + label:hover,
.xr-group-box-contents > input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
  white-space: nowrap;
}

.xr-section-summary > em {
  font-weight: normal;
}

.xr-span-grid {
  grid-column-end: -1;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.3em;
}

.xr-group-box-contents > input:checked + label > span {
  display: inline-block;
  padding-left: 0.6em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details,
.xr-group-box-contents > label {
  padding-top: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  grid-column: 1 / -1;
  margin-top: 4px;
  margin-bottom: 5px;
}

.xr-section-summary-in ~ .xr-section-details {
  display: none;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-children {
  display: inline-grid;
  grid-template-columns: 100%;
  grid-column: 1 / -1;
  padding-top: 4px;
}

.xr-group-box {
  display: inline-grid;
  grid-template-columns: 0px 30px auto;
}

.xr-group-box-vline {
  grid-column-start: 1;
  border-right: 0.2em solid;
  border-color: var(--xr-border-color);
  width: 0px;
}

.xr-group-box-hline {
  grid-column-start: 2;
  grid-row-start: 1;
  height: 1em;
  width: 26px;
  border-bottom: 0.2em solid;
  border-color: var(--xr-border-color);
}

.xr-group-box-contents {
  grid-column-start: 3;
  padding-bottom: 4px;
}

.xr-group-box-contents > label::before {
  content: "📂";
  padding-right: 0.3em;
}

.xr-group-box-contents > input:checked + label::before {
  content: "📁";
}

.xr-group-box-contents > input:checked + label {
  padding-bottom: 0px;
}

.xr-group-box-contents > input:checked ~ .xr-sections {
  display: none;
}

.xr-group-box-contents > input + label > span {
  display: none;
}

.xr-group-box-ellipsis {
  font-size: 1.4em;
  font-weight: 900;
  color: var(--xr-font-color2);
  letter-spacing: 0.15em;
  cursor: default;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 98MB
Dimensions:                                         (chain: 4, draw: 1000,
                                                     control: 3,
                                                     fourier_mode: 4,
                                                     channel: 2, date: 179)
Coordinates:
  * chain                                           (chain) int64 32B 0 1 2 3
  * draw                                            (draw) int64 8kB 0 1 ... 999
  * control                                         (control) &lt;U7 84B 'event_...
  * fourier_mode                                    (fourier_mode) &lt;U5 80B 's...
  * channel                                         (channel) &lt;U2 16B 'x1' 'x2'
  * date                                            (date) datetime64[ms] 1kB ...
Data variables: (12/17)
    intercept_contribution                          (chain, draw) float64 32kB ...
    gamma_control                                   (chain, draw, control) float64 96kB ...
    gamma_fourier                                   (chain, draw, fourier_mode) float64 128kB ...
    adstock_alpha                                   (chain, draw, channel) float64 64kB ...
    saturation_lam                                  (chain, draw, channel) float64 64kB ...
    saturation_beta                                 (chain, draw, channel) float64 64kB ...
    ...                                              ...
    yearly_seasonality_contribution                 (chain, draw, date) float64 6MB ...
    channel_contribution_original_scale             (chain, draw, date, channel) float64 11MB ...
    control_contribution_original_scale             (chain, draw, date, control) float64 17MB ...
    intercept_contribution_original_scale           (chain, draw) float64 32kB ...
    yearly_seasonality_contribution_original_scale  (chain, draw, date) float64 6MB ...
    y_original_scale                                (chain, draw, date) float64 6MB ...
Attributes:
    created_at:                 2026-02-25T20:16:05.072552+00:00
    arviz_version:              0.23.1
    inference_library:          numpyro
    inference_library_version:  0.20.0
    sampling_time:              41.909262
    tuning_steps:               1000
    pymc_marketing_version:     0.17.1</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-9e08ed3f-ae6a-453a-862d-22379cf26dd6" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-9e08ed3f-ae6a-453a-862d-22379cf26dd6" class="xr-section-summary">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 4</li><li><span class="xr-has-index">draw</span>: 1000</li><li><span class="xr-has-index">control</span>: 3</li><li><span class="xr-has-index">fourier_mode</span>: 4</li><li><span class="xr-has-index">channel</span>: 2</li><li><span class="xr-has-index">date</span>: 179</li></ul></div></li><li class="xr-section-item"><input id="section-32af84e4-fbbb-40f7-b8e2-a27de7fd5a59" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-32af84e4-fbbb-40f7-b8e2-a27de7fd5a59" class="xr-section-summary" title="Expand/collapse section">Coordinates: <span>(6)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3</div><input id="attrs-a740b818-cc93-44fd-86e1-ca05fcae25fb" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-a740b818-cc93-44fd-86e1-ca05fcae25fb" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-461b7546-d923-41f9-9768-d3553b84aa4b" class="xr-var-data-in" type="checkbox"><label for="data-461b7546-d923-41f9-9768-d3553b84aa4b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1, 2, 3])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 995 996 997 998 999</div><input id="attrs-d10efc96-3843-4418-8d7f-6156521bd88f" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-d10efc96-3843-4418-8d7f-6156521bd88f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ea639b8a-b7ca-410e-afb5-0cfa3613d4b6" class="xr-var-data-in" type="checkbox"><label for="data-ea639b8a-b7ca-410e-afb5-0cfa3613d4b6" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 997, 998, 999], shape=(1000,))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">control</span></div><div class="xr-var-dims">(control)</div><div class="xr-var-dtype">&lt;U7</div><div class="xr-var-preview xr-preview">'event_1' 'event_2' 't'</div><input id="attrs-1f3a1c50-45e4-444e-8e90-2b806ca60c49" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-1f3a1c50-45e4-444e-8e90-2b806ca60c49" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-d53936ad-2f62-4105-9b7d-000779a16ea3" class="xr-var-data-in" type="checkbox"><label for="data-d53936ad-2f62-4105-9b7d-000779a16ea3" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['event_1', 'event_2', 't'], dtype='&lt;U7')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">fourier_mode</span></div><div class="xr-var-dims">(fourier_mode)</div><div class="xr-var-dtype">&lt;U5</div><div class="xr-var-preview xr-preview">'sin_1' 'sin_2' 'cos_1' 'cos_2'</div><input id="attrs-59e1410c-ab16-41e4-9b05-f25b0d329fb3" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-59e1410c-ab16-41e4-9b05-f25b0d329fb3" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-70cf7221-88d3-47e0-b4a1-0d334f77cfdb" class="xr-var-data-in" type="checkbox"><label for="data-70cf7221-88d3-47e0-b4a1-0d334f77cfdb" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['sin_1', 'sin_2', 'cos_1', 'cos_2'], dtype='&lt;U5')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">channel</span></div><div class="xr-var-dims">(channel)</div><div class="xr-var-dtype">&lt;U2</div><div class="xr-var-preview xr-preview">'x1' 'x2'</div><input id="attrs-f1e43055-0823-410c-8bfe-a15ea8b757c0" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-f1e43055-0823-410c-8bfe-a15ea8b757c0" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-239e9298-cea7-4d0a-bdac-d323d6e0328f" class="xr-var-data-in" type="checkbox"><label for="data-239e9298-cea7-4d0a-bdac-d323d6e0328f" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['x1', 'x2'], dtype='&lt;U2')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">date</span></div><div class="xr-var-dims">(date)</div><div class="xr-var-dtype">datetime64[ms]</div><div class="xr-var-preview xr-preview">2018-04-02 ... 2021-08-30</div><input id="attrs-ccd0fd5c-047c-4a3f-af7a-30dd6bd905e7" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-ccd0fd5c-047c-4a3f-af7a-30dd6bd905e7" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-65dd8139-9a5a-4437-a338-a76031d55613" class="xr-var-data-in" type="checkbox"><label for="data-65dd8139-9a5a-4437-a338-a76031d55613" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['2018-04-02T00:00:00.000', '2018-04-09T00:00:00.000',
       '2018-04-16T00:00:00.000', '2018-04-23T00:00:00.000',
       '2018-04-30T00:00:00.000', '2018-05-07T00:00:00.000',
       '2018-05-14T00:00:00.000', '2018-05-21T00:00:00.000',
       '2018-05-28T00:00:00.000', '2018-06-04T00:00:00.000',
       '2018-06-11T00:00:00.000', '2018-06-18T00:00:00.000',
       '2018-06-25T00:00:00.000', '2018-07-02T00:00:00.000',
       '2018-07-09T00:00:00.000', '2018-07-16T00:00:00.000',
       '2018-07-23T00:00:00.000', '2018-07-30T00:00:00.000',
       '2018-08-06T00:00:00.000', '2018-08-13T00:00:00.000',
       '2018-08-20T00:00:00.000', '2018-08-27T00:00:00.000',
       '2018-09-03T00:00:00.000', '2018-09-10T00:00:00.000',
       '2018-09-17T00:00:00.000', '2018-09-24T00:00:00.000',
       '2018-10-01T00:00:00.000', '2018-10-08T00:00:00.000',
       '2018-10-15T00:00:00.000', '2018-10-22T00:00:00.000',
       '2018-10-29T00:00:00.000', '2018-11-05T00:00:00.000',
       '2018-11-12T00:00:00.000', '2018-11-19T00:00:00.000',
       '2018-11-26T00:00:00.000', '2018-12-03T00:00:00.000',
       '2018-12-10T00:00:00.000', '2018-12-17T00:00:00.000',
       '2018-12-24T00:00:00.000', '2018-12-31T00:00:00.000',
       '2019-01-07T00:00:00.000', '2019-01-14T00:00:00.000',
       '2019-01-21T00:00:00.000', '2019-01-28T00:00:00.000',
       '2019-02-04T00:00:00.000', '2019-02-11T00:00:00.000',
       '2019-02-18T00:00:00.000', '2019-02-25T00:00:00.000',
       '2019-03-04T00:00:00.000', '2019-03-11T00:00:00.000',
       '2019-03-18T00:00:00.000', '2019-03-25T00:00:00.000',
       '2019-04-01T00:00:00.000', '2019-04-08T00:00:00.000',
       '2019-04-15T00:00:00.000', '2019-04-22T00:00:00.000',
       '2019-04-29T00:00:00.000', '2019-05-06T00:00:00.000',
       '2019-05-13T00:00:00.000', '2019-05-20T00:00:00.000',
       '2019-05-27T00:00:00.000', '2019-06-03T00:00:00.000',
       '2019-06-10T00:00:00.000', '2019-06-17T00:00:00.000',
       '2019-06-24T00:00:00.000', '2019-07-01T00:00:00.000',
       '2019-07-08T00:00:00.000', '2019-07-15T00:00:00.000',
       '2019-07-22T00:00:00.000', '2019-07-29T00:00:00.000',
       '2019-08-05T00:00:00.000', '2019-08-12T00:00:00.000',
       '2019-08-19T00:00:00.000', '2019-08-26T00:00:00.000',
       '2019-09-02T00:00:00.000', '2019-09-09T00:00:00.000',
       '2019-09-16T00:00:00.000', '2019-09-23T00:00:00.000',
       '2019-09-30T00:00:00.000', '2019-10-07T00:00:00.000',
       '2019-10-14T00:00:00.000', '2019-10-21T00:00:00.000',
       '2019-10-28T00:00:00.000', '2019-11-04T00:00:00.000',
       '2019-11-11T00:00:00.000', '2019-11-18T00:00:00.000',
       '2019-11-25T00:00:00.000', '2019-12-02T00:00:00.000',
       '2019-12-09T00:00:00.000', '2019-12-16T00:00:00.000',
       '2019-12-23T00:00:00.000', '2019-12-30T00:00:00.000',
       '2020-01-06T00:00:00.000', '2020-01-13T00:00:00.000',
       '2020-01-20T00:00:00.000', '2020-01-27T00:00:00.000',
       '2020-02-03T00:00:00.000', '2020-02-10T00:00:00.000',
       '2020-02-17T00:00:00.000', '2020-02-24T00:00:00.000',
       '2020-03-02T00:00:00.000', '2020-03-09T00:00:00.000',
       '2020-03-16T00:00:00.000', '2020-03-23T00:00:00.000',
       '2020-03-30T00:00:00.000', '2020-04-06T00:00:00.000',
       '2020-04-13T00:00:00.000', '2020-04-20T00:00:00.000',
       '2020-04-27T00:00:00.000', '2020-05-04T00:00:00.000',
       '2020-05-11T00:00:00.000', '2020-05-18T00:00:00.000',
       '2020-05-25T00:00:00.000', '2020-06-01T00:00:00.000',
       '2020-06-08T00:00:00.000', '2020-06-15T00:00:00.000',
       '2020-06-22T00:00:00.000', '2020-06-29T00:00:00.000',
       '2020-07-06T00:00:00.000', '2020-07-13T00:00:00.000',
       '2020-07-20T00:00:00.000', '2020-07-27T00:00:00.000',
       '2020-08-03T00:00:00.000', '2020-08-10T00:00:00.000',
       '2020-08-17T00:00:00.000', '2020-08-24T00:00:00.000',
       '2020-08-31T00:00:00.000', '2020-09-07T00:00:00.000',
       '2020-09-14T00:00:00.000', '2020-09-21T00:00:00.000',
       '2020-09-28T00:00:00.000', '2020-10-05T00:00:00.000',
       '2020-10-12T00:00:00.000', '2020-10-19T00:00:00.000',
       '2020-10-26T00:00:00.000', '2020-11-02T00:00:00.000',
       '2020-11-09T00:00:00.000', '2020-11-16T00:00:00.000',
       '2020-11-23T00:00:00.000', '2020-11-30T00:00:00.000',
       '2020-12-07T00:00:00.000', '2020-12-14T00:00:00.000',
       '2020-12-21T00:00:00.000', '2020-12-28T00:00:00.000',
       '2021-01-04T00:00:00.000', '2021-01-11T00:00:00.000',
       '2021-01-18T00:00:00.000', '2021-01-25T00:00:00.000',
       '2021-02-01T00:00:00.000', '2021-02-08T00:00:00.000',
       '2021-02-15T00:00:00.000', '2021-02-22T00:00:00.000',
       '2021-03-01T00:00:00.000', '2021-03-08T00:00:00.000',
       '2021-03-15T00:00:00.000', '2021-03-22T00:00:00.000',
       '2021-03-29T00:00:00.000', '2021-04-05T00:00:00.000',
       '2021-04-12T00:00:00.000', '2021-04-19T00:00:00.000',
       '2021-04-26T00:00:00.000', '2021-05-03T00:00:00.000',
       '2021-05-10T00:00:00.000', '2021-05-17T00:00:00.000',
       '2021-05-24T00:00:00.000', '2021-05-31T00:00:00.000',
       '2021-06-07T00:00:00.000', '2021-06-14T00:00:00.000',
       '2021-06-21T00:00:00.000', '2021-06-28T00:00:00.000',
       '2021-07-05T00:00:00.000', '2021-07-12T00:00:00.000',
       '2021-07-19T00:00:00.000', '2021-07-26T00:00:00.000',
       '2021-08-02T00:00:00.000', '2021-08-09T00:00:00.000',
       '2021-08-16T00:00:00.000', '2021-08-23T00:00:00.000',
       '2021-08-30T00:00:00.000'], dtype='datetime64[ms]')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-d520e24c-ceca-4d02-81da-83b0c9da1bb6" class="xr-section-summary-in" type="checkbox"><label for="section-d520e24c-ceca-4d02-81da-83b0c9da1bb6" class="xr-section-summary" title="Expand/collapse section">Data variables: <span>(17)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>intercept_contribution</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.3125 0.3034 ... 0.3198 0.3266</div><input id="attrs-5a410d3f-e6e3-4439-b3ff-cb57790a63dd" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-5a410d3f-e6e3-4439-b3ff-cb57790a63dd" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-f1cbca5f-5509-4bef-9ded-e8e298e99cea" class="xr-var-data-in" type="checkbox"><label for="data-f1cbca5f-5509-4bef-9ded-e8e298e99cea" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.31249765, 0.30341556, 0.30704188, ..., 0.30220202, 0.3236779 ,
        0.32270494],
       [0.29721299, 0.31977041, 0.32731274, ..., 0.31830319, 0.32074174,
        0.31494681],
       [0.32598562, 0.34145389, 0.32697877, ..., 0.29943257, 0.30049177,
        0.34006491],
       [0.29829627, 0.30769666, 0.28468616, ..., 0.30257075, 0.319838  ,
        0.32660311]], shape=(4, 1000))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>gamma_control</span></div><div class="xr-var-dims">(chain, draw, control)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.134 0.2225 ... 0.1231 0.0007096</div><input id="attrs-71aa5354-3ea3-4fd1-a420-aa1068dc8bbb" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-71aa5354-3ea3-4fd1-a420-aa1068dc8bbb" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-07d8e8c6-4899-4b73-b0e7-77b8429e1a53" class="xr-var-data-in" type="checkbox"><label for="data-07d8e8c6-4899-4b73-b0e7-77b8429e1a53" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[0.13404526, 0.22249107, 0.00067067],
        [0.19126057, 0.13933093, 0.00062929],
        [0.17397332, 0.14857163, 0.00066405],
        ...,
        [0.11976089, 0.16472345, 0.00064143],
        [0.20209432, 0.17731259, 0.00071078],
        [0.13757408, 0.14944417, 0.00071803]],

       [[0.16217583, 0.21311135, 0.00070102],
        [0.17320189, 0.19939844, 0.00067155],
        [0.14822493, 0.18827913, 0.00064033],
        ...,
        [0.15540209, 0.25376708, 0.00065453],
        [0.1816611 , 0.15435465, 0.00067872],
        [0.17744095, 0.16068073, 0.000757  ]],

       [[0.18363342, 0.20345938, 0.00066847],
        [0.18917994, 0.14910947, 0.00062915],
        [0.17807542, 0.17856431, 0.00067927],
        ...,
        [0.17210452, 0.08320175, 0.00064305],
        [0.14197728, 0.09774063, 0.00071902],
        [0.17310671, 0.18255413, 0.00067796]],

       [[0.20697276, 0.20559187, 0.00063868],
        [0.20433502, 0.20783796, 0.00063702],
        [0.12194267, 0.1627954 , 0.00077774],
        ...,
        [0.18868679, 0.12284217, 0.0007093 ],
        [0.1629329 , 0.13477295, 0.00072191],
        [0.17114687, 0.12309189, 0.00070959]]], shape=(4, 1000, 3))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>gamma_fourier</span></div><div class="xr-var-dims">(chain, draw, fourier_mode)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.008551 -0.0528 ... -0.005758</div><input id="attrs-1aa8bff9-e8eb-448a-ae73-211355ae8457" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-1aa8bff9-e8eb-448a-ae73-211355ae8457" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-58d87895-9698-4ee9-8c2c-99d45c0ca2f3" class="xr-var-data-in" type="checkbox"><label for="data-58d87895-9698-4ee9-8c2c-99d45c0ca2f3" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[-0.00855089, -0.05279956,  0.05125013, -0.00357395],
        [-0.00872354, -0.05551561,  0.05204789, -0.00349945],
        [-0.0056364 , -0.05592152,  0.04889977, -0.00381215],
        ...,
        [-0.01459598, -0.05870265,  0.04450991, -0.00299225],
        [-0.00025322, -0.05330307,  0.06000905, -0.00430158],
        [-0.01049848, -0.05307484,  0.05593241, -0.00289439]],

       [[-0.01164612, -0.05660735,  0.05419711, -0.00454849],
        [-0.01049177, -0.06162211,  0.05075213,  0.00088091],
        [-0.00971725, -0.05418794,  0.053362  ,  0.00261488],
        ...,
        [-0.00289636, -0.0561234 ,  0.05093552,  0.00430294],
        [-0.00714504, -0.05246279,  0.05267176, -0.00310548],
        [-0.00790917, -0.05386116,  0.0499276 , -0.00444926]],

       [[-0.00978272, -0.05634185,  0.05584811, -0.00171871],
        [-0.00124256, -0.04831924,  0.05551572, -0.00534933],
        [-0.00159699, -0.05521541,  0.05263699, -0.00489629],
        ...,
        [-0.00267722, -0.05768566,  0.04826132, -0.00520604],
        [-0.00524583, -0.05746398,  0.05263835, -0.00494772],
        [-0.00831581, -0.05779067,  0.05459845,  0.00405219]],

       [[ 0.0032807 , -0.05649227,  0.05584684,  0.00158352],
        [ 0.00036973, -0.05279418,  0.05427802,  0.00053272],
        [-0.01526084, -0.05985395,  0.05359826, -0.00243122],
        ...,
        [-0.00910751, -0.05894727,  0.05322135, -0.00444104],
        [-0.01321053, -0.05689453,  0.05483486, -0.0041047 ],
        [-0.0107756 , -0.05691609,  0.05375574, -0.00575785]]],
      shape=(4, 1000, 4))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>adstock_alpha</span></div><div class="xr-var-dims">(chain, draw, channel)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.3841 0.3063 ... 0.3973 0.2763</div><input id="attrs-6b926401-9027-4ab0-a3ce-254475345223" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-6b926401-9027-4ab0-a3ce-254475345223" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-f3d6f5d4-4feb-4fe5-807b-b2202091a563" class="xr-var-data-in" type="checkbox"><label for="data-f3d6f5d4-4feb-4fe5-807b-b2202091a563" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[0.38410617, 0.30629871],
        [0.42422811, 0.3279857 ],
        [0.4233223 , 0.24258477],
        ...,
        [0.37845517, 0.18198096],
        [0.3897696 , 0.20204426],
        [0.39158092, 0.24362979]],

       [[0.4182135 , 0.26587067],
        [0.39349503, 0.29421731],
        [0.42105459, 0.29296893],
        ...,
        [0.36277235, 0.21849655],
        [0.34538854, 0.21307661],
        [0.34778611, 0.28417055]],

       [[0.37624394, 0.21163992],
        [0.41221972, 0.30442848],
        [0.43462136, 0.22096221],
        ...,
        [0.36855059, 0.25690036],
        [0.37744991, 0.22419124],
        [0.35979589, 0.18552566]],

       [[0.43012338, 0.23743795],
        [0.4239473 , 0.21157953],
        [0.36662806, 0.26123221],
        ...,
        [0.37005997, 0.23700042],
        [0.41086076, 0.20942561],
        [0.39727692, 0.2763353 ]]], shape=(4, 1000, 2))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>saturation_lam</span></div><div class="xr-var-dims">(chain, draw, channel)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">3.98 2.384 4.187 ... 3.61 2.932</div><input id="attrs-f2b5d84c-a34b-4ea2-9d16-8a54a6fae8a0" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-f2b5d84c-a34b-4ea2-9d16-8a54a6fae8a0" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-051bacc2-e550-4033-86b2-28fc9f42db13" class="xr-var-data-in" type="checkbox"><label for="data-051bacc2-e550-4033-86b2-28fc9f42db13" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[3.97960511, 2.38439485],
        [4.18678197, 2.07564753],
        [3.96196714, 2.42563117],
        ...,
        [4.54485295, 4.8071201 ],
        [3.52578918, 3.62936575],
        [3.44976894, 3.52870738]],

       [[3.93557943, 2.61283935],
        [3.57053946, 2.50197039],
        [3.63188119, 1.93865443],
        ...,
        [4.09990967, 3.51253571],
        [4.43104377, 2.56290336],
        [4.15982324, 3.39960056]],

       [[3.64691393, 2.45681778],
        [3.40984659, 2.61422484],
        [3.67453617, 3.32277947],
        ...,
        [4.58047113, 3.27633688],
        [4.24664853, 3.30856229],
        [3.74626503, 4.09358449]],

       [[4.17736473, 3.31606275],
        [3.8557234 , 3.10516942],
        [4.28021231, 2.81897285],
        ...,
        [4.04944594, 3.93194474],
        [3.8514473 , 4.11794393],
        [3.6099162 , 2.93182635]]], shape=(4, 1000, 2))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>saturation_beta</span></div><div class="xr-var-dims">(chain, draw, channel)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.3513 0.2991 ... 0.3445 0.2647</div><input id="attrs-8c5111de-89af-404f-8d8d-954b2f7d02d2" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-8c5111de-89af-404f-8d8d-954b2f7d02d2" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-64a62703-7521-495d-90e7-d451c1037b3c" class="xr-var-data-in" type="checkbox"><label for="data-64a62703-7521-495d-90e7-d451c1037b3c" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[0.35133859, 0.29912477],
        [0.35115452, 0.34408512],
        [0.37029638, 0.28430443],
        ...,
        [0.34881803, 0.22306585],
        [0.35208906, 0.22824652],
        [0.35728994, 0.22981909]],

       [[0.37612288, 0.28121349],
        [0.3576385 , 0.30732428],
        [0.35088643, 0.34206541],
        ...,
        [0.33802734, 0.24991396],
        [0.31852415, 0.27836775],
        [0.3213716 , 0.2438691 ]],

       [[0.36218786, 0.27676725],
        [0.35087084, 0.26592391],
        [0.34670002, 0.24159625],
        ...,
        [0.33932026, 0.25588606],
        [0.36014095, 0.24518425],
        [0.3273691 , 0.21897328]],

       [[0.36615754, 0.23816586],
        [0.37013333, 0.24922299],
        [0.37122912, 0.27931651],
        ...,
        [0.36243178, 0.23789778],
        [0.34642441, 0.21465689],
        [0.34446063, 0.26472842]]], shape=(4, 1000, 2))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>y_sigma</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.03075 0.02977 ... 0.03016 0.02886</div><input id="attrs-4c97a410-f917-45dd-abb5-22746db055cb" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-4c97a410-f917-45dd-abb5-22746db055cb" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-67d14f45-91af-42b6-a8ac-6349887b5c6f" class="xr-var-data-in" type="checkbox"><label for="data-67d14f45-91af-42b6-a8ac-6349887b5c6f" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.03074922, 0.02976602, 0.0295527 , ..., 0.03108961, 0.03008024,
        0.03156999],
       [0.02878133, 0.03053022, 0.03222659, ..., 0.0323019 , 0.02773615,
        0.02984858],
       [0.03032121, 0.0325706 , 0.03291733, ..., 0.03117479, 0.03246891,
        0.03166203],
       [0.02847322, 0.02922032, 0.03112618, ..., 0.02648468, 0.0301622 ,
        0.02886447]], shape=(4, 1000))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>channel_contribution</span></div><div class="xr-var-dims">(chain, draw, date, channel)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.1381 0.0 ... 0.1936 0.0005417</div><input id="attrs-3d9e61dd-16cc-4808-abed-be8c257f206f" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-3d9e61dd-16cc-4808-abed-be8c257f206f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ca89e698-9162-4689-8649-c630f74f9e67" class="xr-var-data-in" type="checkbox"><label for="data-ca89e698-9162-4689-8649-c630f74f9e67" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[[1.38067217e-01, 0.00000000e+00],
         [9.34797672e-02, 0.00000000e+00],
         [1.78575676e-01, 0.00000000e+00],
         ...,
         [2.26144455e-01, 8.68503117e-03],
         [1.78822649e-01, 2.66089157e-03],
         [2.12652956e-01, 8.15047135e-04]],

        [[1.36027870e-01, 0.00000000e+00],
         [9.73533616e-02, 0.00000000e+00],
         [1.80765017e-01, 0.00000000e+00],
         ...,
         [2.36122376e-01, 1.04968861e-02],
         [1.90894145e-01, 3.44378220e-03],
         [2.20152931e-01, 1.12954498e-03]],

        [[1.36670196e-01, 0.00000000e+00],
         [9.74363450e-02, 0.00000000e+00],
         [1.82294608e-01, 0.00000000e+00],
         ...,
...
         ...,
         [2.35185474e-01, 5.53056973e-03],
         [1.85400021e-01, 1.31097029e-03],
         [2.22369886e-01, 3.10703477e-04]],

        [[1.27034866e-01, 0.00000000e+00],
         [8.89882328e-02, 0.00000000e+00],
         [1.68134335e-01, 0.00000000e+00],
         ...,
         [2.19369899e-01, 3.66325165e-03],
         [1.74628347e-01, 7.67249939e-04],
         [2.04401444e-01, 1.60682442e-04]],

        [[1.21553445e-01, 0.00000000e+00],
         [8.33617541e-02, 0.00000000e+00],
         [1.59900471e-01, 0.00000000e+00],
         ...,
         [2.07475586e-01, 7.09224934e-03],
         [1.63087351e-01, 1.96027208e-03],
         [1.93568312e-01, 5.41701512e-04]]]], shape=(4, 1000, 179, 2))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>total_media_contribution_original_scale</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">365.1 380.3 376.9 ... 351.3 341.7</div><input id="attrs-1a0ad598-82c1-49fa-bac5-b5d30fef2e16" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-1a0ad598-82c1-49fa-bac5-b5d30fef2e16" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-76dd11a4-8ccb-4712-bd6b-a289c5a413bc" class="xr-var-data-in" type="checkbox"><label for="data-76dd11a4-8ccb-4712-bd6b-a289c5a413bc" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[365.06822418, 380.34448719, 376.86549229, ..., 390.50156272,
        336.81247017, 338.37932062],
       [383.81285722, 353.19318068, 345.52287422, ..., 360.41419813,
        351.04606583, 348.84756395],
       [348.42997343, 331.4273319 , 344.53383183, ..., 384.55286151,
        383.39485113, 328.02422418],
       [386.67961679, 371.61006394, 398.23688608, ..., 380.62090137,
        351.29689624, 341.66731313]], shape=(4, 1000))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>control_contribution</span></div><div class="xr-var-dims">(chain, draw, date, control)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.0 0.0 0.0 0.0 ... 0.0 0.0 0.1263</div><input id="attrs-47df8518-0358-4beb-a01b-bf80368ac3f4" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-47df8518-0358-4beb-a01b-bf80368ac3f4" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-5f2bc61c-8f01-4600-b3b0-ebfe4cdfc754" class="xr-var-data-in" type="checkbox"><label for="data-5f2bc61c-8f01-4600-b3b0-ebfe4cdfc754" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[[0.        , 0.        , 0.        ],
         [0.        , 0.        , 0.00067067],
         [0.        , 0.        , 0.00134134],
         ...,
         [0.        , 0.        , 0.118038  ],
         [0.        , 0.        , 0.11870867],
         [0.        , 0.        , 0.11937934]],

        [[0.        , 0.        , 0.        ],
         [0.        , 0.        , 0.00062929],
         [0.        , 0.        , 0.00125859],
         ...,
         [0.        , 0.        , 0.11075585],
         [0.        , 0.        , 0.11138515],
         [0.        , 0.        , 0.11201444]],

        [[0.        , 0.        , 0.        ],
         [0.        , 0.        , 0.00066405],
         [0.        , 0.        , 0.0013281 ],
         ...,
...
         ...,
         [0.        , 0.        , 0.1248369 ],
         [0.        , 0.        , 0.1255462 ],
         [0.        , 0.        , 0.1262555 ]],

        [[0.        , 0.        , 0.        ],
         [0.        , 0.        , 0.00072191],
         [0.        , 0.        , 0.00144382],
         ...,
         [0.        , 0.        , 0.12705609],
         [0.        , 0.        , 0.127778  ],
         [0.        , 0.        , 0.12849991]],

        [[0.        , 0.        , 0.        ],
         [0.        , 0.        , 0.00070959],
         [0.        , 0.        , 0.00141919],
         ...,
         [0.        , 0.        , 0.1248884 ],
         [0.        , 0.        , 0.12559799],
         [0.        , 0.        , 0.12630758]]]], shape=(4, 1000, 179, 3))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>fourier_contribution</span></div><div class="xr-var-dims">(chain, draw, date, fourier_mode)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.00855 0.001249 ... 0.002618</div><input id="attrs-70c5c74d-9539-4c12-bcb5-1354568c8b79" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-70c5c74d-9539-4c12-bcb5-1354568c8b79" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-664d57c9-fc02-496f-91aa-2fdcad2f1ae1" class="xr-var-data-in" type="checkbox"><label for="data-664d57c9-fc02-496f-91aa-2fdcad2f1ae1" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[[-8.55029623e-03,  1.24876905e-03, -6.06104108e-04,
           3.57295326e-03],
         [-8.47623250e-03,  1.38025646e-02, -6.75776660e-03,
           3.44967472e-03],
         [-8.27940976e-03,  2.55596598e-02, -1.28115582e-02,
           3.12727688e-03],
         ...,
         [ 6.01707109e-03, -5.27970857e-02, -3.64142249e-02,
          -3.45823283e-05],
         [ 6.70333515e-03, -5.13951866e-02, -3.18183588e-02,
           8.18808562e-04],
         [ 7.29251661e-03, -4.70266966e-02, -2.67616759e-02,
           1.62493685e-03]],

        [[-8.72292810e-03,  1.31300682e-03, -6.15538646e-04,
           3.49846612e-03],
         [-8.64736901e-03,  1.45125805e-02, -6.86295713e-03,
           3.37775763e-03],
         [-8.44657238e-03,  2.68744708e-02, -1.30109812e-02,
           3.06208097e-03],
...
         [ 9.29595138e-03, -5.68918643e-02, -3.89612399e-02,
          -3.97179019e-05],
         [ 1.03561811e-02, -5.53812382e-02, -3.40439132e-02,
           9.40403952e-04],
         [ 1.12664249e-02, -5.06739416e-02, -2.86335375e-02,
           1.86624458e-03]],

        [[-1.07748473e-02,  1.34612977e-03, -6.35736376e-04,
           5.75623657e-03],
         [-1.06815143e-02,  1.48786864e-02, -7.08815201e-03,
           5.55762764e-03],
         [-1.04334837e-02,  2.75524276e-02, -1.34379118e-02,
           5.03822587e-03],
         ...,
         [ 7.58254691e-03, -5.69134290e-02, -3.81945066e-02,
          -5.57141525e-05],
         [ 8.44735795e-03, -5.54022304e-02, -3.33739499e-02,
           1.31914846e-03],
         [ 9.18982815e-03, -5.06931495e-02, -2.80700471e-02,
           2.61786826e-03]]]], shape=(4, 1000, 179, 4))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>yearly_seasonality_contribution</span></div><div class="xr-var-dims">(chain, draw, date)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.004335 0.002018 ... -0.06696</div><input id="attrs-a9fc97ae-17ae-45c9-a2c7-0da783d86f53" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-a9fc97ae-17ae-45c9-a2c7-0da783d86f53" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-31ade42a-6ea5-46cc-a3b9-66fd5985fac2" class="xr-var-data-in" type="checkbox"><label for="data-31ade42a-6ea5-46cc-a3b9-66fd5985fac2" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[-0.00433468,  0.00201824,  0.00759597, ..., -0.08322882,
         -0.0756914 , -0.06487092],
        [-0.00452699,  0.00238001,  0.008479  , ..., -0.08638936,
         -0.07871222, -0.06759322],
        [-0.00108062,  0.00626324,  0.01272521, ..., -0.08673383,
         -0.07950131, -0.06880152],
        ...,
        [-0.01074155, -0.00210363,  0.00577635, ..., -0.08008316,
         -0.07264718, -0.06171801],
        [ 0.00459816,  0.00992247,  0.01432107, ..., -0.09580162,
         -0.08795757, -0.07663883],
        [-0.00701037, -0.00111371,  0.00407837, ..., -0.08545389,
         -0.07749524, -0.06620908]],

       [[-0.00640022,  0.00049752,  0.00655837, ..., -0.08696171,
         -0.0785778 , -0.06671842],
        [-0.01051449, -0.00183364,  0.00621401, ..., -0.09028827,
         -0.08346922, -0.07283901],
        [-0.01168019, -0.00502708,  0.00119548, ..., -0.08523705,
         -0.07885755, -0.06902939],
...
        [ 0.00332113,  0.01108736,  0.01782372, ..., -0.09014005,
         -0.08282261, -0.07192934],
        [ 0.00043744,  0.00765674,  0.01390914, ..., -0.09121837,
         -0.08336984, -0.07194433],
        [-0.01164518, -0.00424644,  0.00272969, ..., -0.09069038,
         -0.08456002, -0.07473254]],

       [[ 0.00237304,  0.00912761,  0.01517754, ..., -0.09846313,
         -0.09259652, -0.0829955 ],
        [ 0.00044386,  0.00649644,  0.01188043, ..., -0.09161232,
         -0.08550005, -0.0759222 ],
        [-0.0120475 , -0.00420162,  0.00292711, ..., -0.08721858,
         -0.07901763, -0.06717722],
        ...,
        [-0.00390233,  0.00365059,  0.01029901, ..., -0.09039354,
         -0.08226441, -0.07050686],
        [-0.00840894, -0.00149062,  0.0046349 , ..., -0.08659687,
         -0.07812857, -0.06617481],
        [-0.00430822,  0.00266665,  0.00871926, ..., -0.0875811 ,
         -0.07900967, -0.0669555 ]]], shape=(4, 1000, 179))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>channel_contribution_original_scale</span></div><div class="xr-var-dims">(chain, draw, date, channel)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">1.231 0.0 0.8333 ... 1.725 0.004829</div><input id="attrs-0d6dfa07-a899-4c38-b89e-4c11755b1c3f" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-0d6dfa07-a899-4c38-b89e-4c11755b1c3f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-de02592f-8ad6-4901-a2b6-0f8f921458cc" class="xr-var-data-in" type="checkbox"><label for="data-de02592f-8ad6-4901-a2b6-0f8f921458cc" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[[1.23073097e+00, 0.00000000e+00],
         [8.33278510e-01, 0.00000000e+00],
         [1.59182332e+00, 0.00000000e+00],
         ...,
         [2.01585134e+00, 7.74183554e-02],
         [1.59402483e+00, 2.37191836e-02],
         [1.89558815e+00, 7.26532899e-03]],

        [[1.21255224e+00, 0.00000000e+00],
         [8.67807725e-01, 0.00000000e+00],
         [1.61133910e+00, 0.00000000e+00],
         ...,
         [2.10479452e+00, 9.35692278e-02],
         [1.70163013e+00, 3.06978696e-02],
         [1.96244291e+00, 1.00687623e-02]],

        [[1.21827793e+00, 0.00000000e+00],
         [8.68547439e-01, 0.00000000e+00],
         [1.62497387e+00, 0.00000000e+00],
         ...,
...
         ...,
         [2.09644298e+00, 4.92994906e-02],
         [1.65265552e+00, 1.16859873e-02],
         [1.98220484e+00, 2.76961035e-03]],

        [[1.13238861e+00, 0.00000000e+00],
         [7.93240979e-01, 0.00000000e+00],
         [1.49874922e+00, 0.00000000e+00],
         ...,
         [1.95546296e+00, 3.26542200e-02],
         [1.55663684e+00, 6.83926485e-03],
         [1.82203418e+00, 1.43232306e-03]],

        [[1.08352724e+00, 0.00000000e+00],
         [7.43086556e-01, 0.00000000e+00],
         [1.42535257e+00, 0.00000000e+00],
         ...,
         [1.84943707e+00, 6.32203004e-02],
         [1.45376041e+00, 1.74738625e-02],
         [1.72546765e+00, 4.82872650e-03]]]], shape=(4, 1000, 179, 2))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>control_contribution_original_scale</span></div><div class="xr-var-dims">(chain, draw, date, control)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.0 0.0 0.0 0.0 ... 0.0 0.0 1.126</div><input id="attrs-234f80ff-574d-4373-94f8-48f44c3e1dfe" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-234f80ff-574d-4373-94f8-48f44c3e1dfe" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-b4a3ab6c-2bd6-4dd0-9b79-3e647a0f1c8e" class="xr-var-data-in" type="checkbox"><label for="data-b4a3ab6c-2bd6-4dd0-9b79-3e647a0f1c8e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[[0.        , 0.        , 0.        ],
         [0.        , 0.        , 0.00597836],
         [0.        , 0.        , 0.01195671],
         ...,
         [0.        , 0.        , 1.05219053],
         [0.        , 0.        , 1.05816888],
         [0.        , 0.        , 1.06414724]],

        [[0.        , 0.        , 0.        ],
         [0.        , 0.        , 0.00560953],
         [0.        , 0.        , 0.01121906],
         ...,
         [0.        , 0.        , 0.98727752],
         [0.        , 0.        , 0.99288705],
         [0.        , 0.        , 0.99849658]],

        [[0.        , 0.        , 0.        ],
         [0.        , 0.        , 0.00591936],
         [0.        , 0.        , 0.01183872],
         ...,
...
         ...,
         [0.        , 0.        , 1.11279596],
         [0.        , 0.        , 1.11911866],
         [0.        , 0.        , 1.12544136]],

        [[0.        , 0.        , 0.        ],
         [0.        , 0.        , 0.0064351 ],
         [0.        , 0.        , 0.0128702 ],
         ...,
         [0.        , 0.        , 1.1325778 ],
         [0.        , 0.        , 1.1390129 ],
         [0.        , 0.        , 1.145448  ]],

        [[0.        , 0.        , 0.        ],
         [0.        , 0.        , 0.00632531],
         [0.        , 0.        , 0.01265062],
         ...,
         [0.        , 0.        , 1.11325499],
         [0.        , 0.        , 1.1195803 ],
         [0.        , 0.        , 1.12590561]]]], shape=(4, 1000, 179, 3))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>intercept_contribution_original_scale</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">2.786 2.705 2.737 ... 2.851 2.911</div><input id="attrs-f4f18ce2-248c-4495-936b-7bb972cfd011" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-f4f18ce2-248c-4495-936b-7bb972cfd011" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-d05ea7d6-c25e-46cf-9b21-e4660b5da35f" class="xr-var-data-in" type="checkbox"><label for="data-d05ea7d6-c25e-46cf-9b21-e4660b5da35f" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[2.7856036 , 2.70464586, 2.73697086, ..., 2.69382834, 2.88526435,
        2.87659134],
       [2.64935621, 2.85043299, 2.91766525, ..., 2.83735418, 2.85909139,
        2.80743544],
       [2.90583537, 3.04371946, 2.91468827, ..., 2.66914148, 2.67858318,
        3.03133814],
       [2.65901256, 2.74280758, 2.53769202, ..., 2.6971152 , 2.85103544,
        2.91133969]], shape=(4, 1000))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>yearly_seasonality_contribution_original_scale</span></div><div class="xr-var-dims">(chain, draw, date)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.03864 0.01799 ... -0.5968</div><input id="attrs-c1029b30-7492-49e0-a869-8a5f1f271384" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c1029b30-7492-49e0-a869-8a5f1f271384" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-22a0aef2-b930-41e7-8aeb-c3e997373f64" class="xr-var-data-in" type="checkbox"><label for="data-22a0aef2-b930-41e7-8aeb-c3e997373f64" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[-0.03863931,  0.01799059,  0.06771045, ..., -0.7419016 ,
         -0.67471305, -0.57825928],
        [-0.04035362,  0.02121542,  0.07558178, ..., -0.77007465,
         -0.70164065, -0.60252587],
        [-0.00963267,  0.05583052,  0.11343248, ..., -0.77314521,
         -0.7086746 , -0.61329667],
        ...,
        [-0.0957502 , -0.01875175,  0.05149042, ..., -0.71386117,
         -0.64757684, -0.55015425],
        [ 0.04098799,  0.08844892,  0.12765796, ..., -0.85397549,
         -0.78405365, -0.68315839],
        [-0.0624904 , -0.00992761,  0.03635455, ..., -0.76173584,
         -0.69079243, -0.59018764]],

       [[-0.05705153,  0.00443485,  0.05846131, ..., -0.77517654,
         -0.70044243, -0.59472794],
        [-0.09372611, -0.01634502,  0.05539169, ..., -0.80482947,
         -0.74404452, -0.64928685],
        [-0.10411719, -0.04481136,  0.01065648, ..., -0.75980291,
         -0.70293606, -0.61532788],
...
        [ 0.0296045 ,  0.09883272,  0.1588806 , ..., -0.80350827,
         -0.7382806 , -0.64117805],
        [ 0.00389934,  0.06825219,  0.12398603, ..., -0.81312044,
         -0.74315864, -0.64131166],
        [-0.10380508, -0.03785278,  0.02433247, ..., -0.80841392,
         -0.7537679 , -0.66616577]],

       [[ 0.02115324,  0.08136352,  0.1352926 , ..., -0.87770019,
         -0.82540523, -0.73982178],
        [ 0.00395656,  0.05790929,  0.10590217, ..., -0.81663207,
         -0.76214729, -0.6767704 ],
        [-0.10739136, -0.0374532 ,  0.02609224, ..., -0.77746631,
         -0.70436308, -0.59881767],
        ...,
        [-0.03478535,  0.03254138,  0.09180533, ..., -0.80576789,
         -0.7333048 , -0.62849803],
        [-0.07495726, -0.01328734,  0.04131548, ..., -0.77192438,
         -0.69643793, -0.58988216],
        [-0.03840344,  0.02377049,  0.07772345, ..., -0.78069782,
         -0.70429212, -0.59684123]]], shape=(4, 1000, 179))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>y_original_scale</span></div><div class="xr-var-dims">(chain, draw, date)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">3.98 3.177 4.536 ... 4.402 4.815</div><input id="attrs-eaf111b4-df24-49e0-a4ed-67345724c463" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-eaf111b4-df24-49e0-a4ed-67345724c463" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-abbe59de-8154-473a-bf5a-28cacc541fc3" class="xr-var-data-in" type="checkbox"><label for="data-abbe59de-8154-473a-bf5a-28cacc541fc3" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[3.97950867, 3.17744634, 4.53578731, ..., 4.53059896,
         5.11451267, 5.07299749],
        [3.81202113, 3.42348348, 4.49988928, ..., 4.63828647,
         4.89247533, 5.05767658],
        [3.78273754, 3.57927253, 4.74710296, ..., 5.55727734,
         5.18601754, 5.18202987],
        ...,
        [4.06237385, 3.92424452, 4.84600676, ..., 5.04893985,
         4.5430765 , 5.30663836],
        [4.14995441, 3.91468273, 4.84021393, ..., 5.17139176,
         4.86204464, 4.61134855],
        [4.17830622, 3.31190104, 4.51991238, ..., 5.00661422,
         4.79644809, 4.73825419]],

       [[3.64861261, 3.24957076, 4.06776771, ..., 5.56368128,
         4.57263139, 5.22486904],
        [4.17047689, 3.70705749, 4.42335596, ..., 5.40742193,
         4.84163359, 5.15639825],
        [4.46955361, 3.38003983, 4.669285  , ..., 5.084655  ,
         4.82910804, 5.08139566],
...
        [4.41354129, 3.60531033, 4.44177744, ..., 5.16962004,
         5.19972105, 5.09115557],
        [4.25006701, 3.95718272, 4.43686364, ..., 5.03899665,
         4.58565981, 5.05862362],
        [3.70224026, 3.53737136, 4.4460429 , ..., 5.07922635,
         4.89153261, 5.00466427]],

       [[4.09219094, 3.59483771, 4.81444239, ..., 4.49260001,
         4.43404874, 4.85853947],
        [4.13001   , 3.46833844, 4.06653191, ..., 4.89842395,
         4.27070062, 4.90545277],
        [4.25319794, 3.26463069, 4.49299116, ..., 4.929584  ,
         4.74837491, 5.12855025],
        ...,
        [4.17607879, 4.00133346, 4.57137782, ..., 5.01104847,
         4.73957722, 5.5348737 ],
        [3.76748488, 3.87064961, 4.66065867, ..., 4.87070233,
         4.94976587, 5.00785569],
        [3.76046291, 4.12644427, 4.49077583, ..., 5.30761378,
         4.40198745, 4.81459711]]], shape=(4, 1000, 179))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-f5113d59-3ef1-45f3-82b9-688450a7fed7" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-f5113d59-3ef1-45f3-82b9-688450a7fed7" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(7)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2026-02-25T20:16:05.072552+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.23.1</dd><dt><span>inference_library :</span></dt><dd>numpyro</dd><dt><span>inference_library_version :</span></dt><dd>0.20.0</dd><dt><span>sampling_time :</span></dt><dd>41.909262</dd><dt><span>tuning_steps :</span></dt><dd>1000</dd><dt><span>pymc_marketing_version :</span></dt><dd>0.17.1</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_sample_stats87cce191-ca7c-4555-bda8-3a373a289928" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_sample_stats87cce191-ca7c-4555-bda8-3a373a289928" class="xr-section-summary">sample_stats</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in notebooks */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
  line-height: 1.6;
  padding-bottom: 4px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
}

.xr-header {
  border-bottom: solid 1px var(--xr-border-color);
  margin-bottom: 4px;
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-obj-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type,
.xr-group-box-contents > label {
  color: var(--xr-font-color2);
  display: block;
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
  margin-block-start: 0;
  margin-block-end: 0;
}

.xr-section-item {
  display: contents;
}

.xr-section-item > input,
.xr-group-box-contents > input,
.xr-array-wrap > input {
  display: block;
  opacity: 0;
  height: 0;
  margin: 0;
}

.xr-section-item > input + label,
.xr-var-item > input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item > input:enabled + label,
.xr-var-item > input:enabled + label,
.xr-array-wrap > input:enabled + label,
.xr-group-box-contents > input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item > input:focus-visible + label,
.xr-var-item > input:focus-visible + label,
.xr-array-wrap > input:focus-visible + label,
.xr-group-box-contents > input:focus-visible + label {
  outline: auto;
}

.xr-section-item > input:enabled + label:hover,
.xr-var-item > input:enabled + label:hover,
.xr-array-wrap > input:enabled + label:hover,
.xr-group-box-contents > input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
  white-space: nowrap;
}

.xr-section-summary > em {
  font-weight: normal;
}

.xr-span-grid {
  grid-column-end: -1;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.3em;
}

.xr-group-box-contents > input:checked + label > span {
  display: inline-block;
  padding-left: 0.6em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details,
.xr-group-box-contents > label {
  padding-top: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  grid-column: 1 / -1;
  margin-top: 4px;
  margin-bottom: 5px;
}

.xr-section-summary-in ~ .xr-section-details {
  display: none;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-children {
  display: inline-grid;
  grid-template-columns: 100%;
  grid-column: 1 / -1;
  padding-top: 4px;
}

.xr-group-box {
  display: inline-grid;
  grid-template-columns: 0px 30px auto;
}

.xr-group-box-vline {
  grid-column-start: 1;
  border-right: 0.2em solid;
  border-color: var(--xr-border-color);
  width: 0px;
}

.xr-group-box-hline {
  grid-column-start: 2;
  grid-row-start: 1;
  height: 1em;
  width: 26px;
  border-bottom: 0.2em solid;
  border-color: var(--xr-border-color);
}

.xr-group-box-contents {
  grid-column-start: 3;
  padding-bottom: 4px;
}

.xr-group-box-contents > label::before {
  content: "📂";
  padding-right: 0.3em;
}

.xr-group-box-contents > input:checked + label::before {
  content: "📁";
}

.xr-group-box-contents > input:checked + label {
  padding-bottom: 0px;
}

.xr-group-box-contents > input:checked ~ .xr-sections {
  display: none;
}

.xr-group-box-contents > input + label > span {
  display: none;
}

.xr-group-box-ellipsis {
  font-size: 1.4em;
  font-weight: 900;
  color: var(--xr-font-color2);
  letter-spacing: 0.15em;
  cursor: default;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 204kB
Dimensions:          (chain: 4, draw: 1000)
Coordinates:
  * chain            (chain) int64 32B 0 1 2 3
  * draw             (draw) int64 8kB 0 1 2 3 4 5 6 ... 994 995 996 997 998 999
Data variables:
    acceptance_rate  (chain, draw) float64 32kB 0.9992 0.7174 ... 0.9995 0.9983
    step_size        (chain, draw) float64 32kB 0.007295 0.007295 ... 0.007262
    diverging        (chain, draw) bool 4kB False False False ... False False
    energy           (chain, draw) float64 32kB -349.3 -354.0 ... -351.6 -351.0
    n_steps          (chain, draw) int64 32kB 1023 511 511 511 ... 511 255 255
    tree_depth       (chain, draw) int64 32kB 10 9 9 9 9 9 9 9 ... 8 9 9 9 9 8 8
    lp               (chain, draw) float64 32kB -362.8 -360.0 ... -360.9 -360.9
Attributes:
    created_at:     2026-02-25T20:16:05.078469+00:00
    arviz_version:  0.23.1</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-065fcf8f-a49b-436e-a731-f50eb68477e8" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-065fcf8f-a49b-436e-a731-f50eb68477e8" class="xr-section-summary">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 4</li><li><span class="xr-has-index">draw</span>: 1000</li></ul></div></li><li class="xr-section-item"><input id="section-cd08803f-f4f6-475f-b3d5-844163305eef" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-cd08803f-f4f6-475f-b3d5-844163305eef" class="xr-section-summary" title="Expand/collapse section">Coordinates: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3</div><input id="attrs-2f6729c1-3a43-4b60-b5f3-c2235377c691" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-2f6729c1-3a43-4b60-b5f3-c2235377c691" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ea5dee46-a338-4421-9aac-c3b205f3eb9e" class="xr-var-data-in" type="checkbox"><label for="data-ea5dee46-a338-4421-9aac-c3b205f3eb9e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0, 1, 2, 3])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 995 996 997 998 999</div><input id="attrs-1f89d122-bf28-4de8-8a31-6de46f8dcc22" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-1f89d122-bf28-4de8-8a31-6de46f8dcc22" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-bd0ea252-58bc-4a38-a42d-587bd700e793" class="xr-var-data-in" type="checkbox"><label for="data-bd0ea252-58bc-4a38-a42d-587bd700e793" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 997, 998, 999], shape=(1000,))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-6135a3fb-a55f-448e-b58e-5b77003969d9" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-6135a3fb-a55f-448e-b58e-5b77003969d9" class="xr-section-summary" title="Expand/collapse section">Data variables: <span>(7)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>acceptance_rate</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.9992 0.7174 ... 0.9995 0.9983</div><input id="attrs-285e84cc-e108-46ed-9430-0269c49f7eaa" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-285e84cc-e108-46ed-9430-0269c49f7eaa" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-05dce9ab-67e3-4e45-9ec4-99ad8be55c31" class="xr-var-data-in" type="checkbox"><label for="data-05dce9ab-67e3-4e45-9ec4-99ad8be55c31" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.99918722, 0.71737954, 0.72665085, ..., 0.98915169, 0.97256799,
        0.99451998],
       [0.99989638, 0.96341671, 0.99472787, ..., 0.99753739, 0.996947  ,
        0.8389056 ],
       [0.97771906, 0.95876224, 0.99483201, ..., 0.87241243, 0.99164482,
        0.91982939],
       [0.87392404, 0.99901481, 0.96124212, ..., 0.96727699, 0.99948226,
        0.99825338]], shape=(4, 1000))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>step_size</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.007295 0.007295 ... 0.007262</div><input id="attrs-edf21441-cb84-4662-8d8d-d01983a6286d" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-edf21441-cb84-4662-8d8d-d01983a6286d" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-614e867a-88d4-4ae8-a710-7217a568e6ad" class="xr-var-data-in" type="checkbox"><label for="data-614e867a-88d4-4ae8-a710-7217a568e6ad" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.00729503, 0.00729503, 0.00729503, ..., 0.00729503, 0.00729503,
        0.00729503],
       [0.00718387, 0.00718387, 0.00718387, ..., 0.00718387, 0.00718387,
        0.00718387],
       [0.00679691, 0.00679691, 0.00679691, ..., 0.00679691, 0.00679691,
        0.00679691],
       [0.00726158, 0.00726158, 0.00726158, ..., 0.00726158, 0.00726158,
        0.00726158]], shape=(4, 1000))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>diverging</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">bool</div><div class="xr-var-preview xr-preview">False False False ... False False</div><input id="attrs-63457041-ba6b-4971-9a17-c54dd6127f49" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-63457041-ba6b-4971-9a17-c54dd6127f49" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-b1df9ec7-ea19-4e96-a565-97f2d5608a2b" class="xr-var-data-in" type="checkbox"><label for="data-b1df9ec7-ea19-4e96-a565-97f2d5608a2b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[False, False, False, ..., False, False, False],
       [False, False, False, ..., False, False, False],
       [False, False, False, ..., False, False, False],
       [False, False, False, ..., False, False, False]], shape=(4, 1000))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>energy</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-349.3 -354.0 ... -351.6 -351.0</div><input id="attrs-54a2f30a-a433-4bc4-8844-2d6e6e6a6d65" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-54a2f30a-a433-4bc4-8844-2d6e6e6a6d65" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-da29156d-725b-47fd-9469-2c87585c2ace" class="xr-var-data-in" type="checkbox"><label for="data-da29156d-725b-47fd-9469-2c87585c2ace" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[-349.34538951, -353.96498407, -352.09501077, ..., -352.39402363,
        -350.50329483, -352.40687885],
       [-358.48749481, -355.22212568, -355.49079342, ..., -352.65090355,
        -345.74759613, -356.51353297],
       [-352.65727972, -351.23029407, -346.16272933, ..., -347.74484806,
        -349.59462094, -350.1143151 ],
       [-347.42111371, -347.59656304, -349.83362457, ..., -352.68883273,
        -351.64120951, -350.96991969]], shape=(4, 1000))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>n_steps</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">1023 511 511 511 ... 511 255 255</div><input id="attrs-3b2737a7-ee09-4550-b384-202a20e767a2" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-3b2737a7-ee09-4550-b384-202a20e767a2" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-7b610f13-1307-43ba-bcc0-d9a6d9369075" class="xr-var-data-in" type="checkbox"><label for="data-7b610f13-1307-43ba-bcc0-d9a6d9369075" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[1023,  511,  511, ...,  511,  511,  255],
       [ 511,  511,  511, ...,  511,  511,  511],
       [ 511,  255,  511, ...,  511,  511,  511],
       [ 511,  511,  511, ...,  511,  255,  255]], shape=(4, 1000))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>tree_depth</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">10 9 9 9 9 9 9 9 ... 8 9 9 9 9 8 8</div><input id="attrs-98f98537-275b-4871-b062-039d9c8194f4" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-98f98537-275b-4871-b062-039d9c8194f4" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-b0b57939-2fc7-4ca7-a9a2-f976cc4ee9aa" class="xr-var-data-in" type="checkbox"><label for="data-b0b57939-2fc7-4ca7-a9a2-f976cc4ee9aa" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[10,  9,  9, ...,  9,  9,  8],
       [ 9,  9,  9, ...,  9,  9,  9],
       [ 9,  8,  9, ...,  9,  9,  9],
       [ 9,  9,  9, ...,  9,  8,  8]], shape=(4, 1000))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>lp</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-362.8 -360.0 ... -360.9 -360.9</div><input id="attrs-6c7c9e5e-eab2-45fe-b034-c4815521f7b9" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-6c7c9e5e-eab2-45fe-b034-c4815521f7b9" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-bf01d500-e48f-4926-a83f-31622a483828" class="xr-var-data-in" type="checkbox"><label for="data-bf01d500-e48f-4926-a83f-31622a483828" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[-362.79465864, -360.03791169, -361.47116864, ..., -357.17478443,
        -359.19294683, -361.88706277],
       [-364.41758101, -362.10597331, -359.79855282, ..., -357.17457589,
        -360.82148069, -361.44584252],
       [-361.1260787 , -353.07063684, -358.50188644, ..., -354.87016953,
        -358.18772782, -359.21934279],
       [-356.61403969, -359.30070291, -356.15404534, ..., -356.93064038,
        -360.87192186, -360.89206617]], shape=(4, 1000))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-7b67cbd8-a844-4f2a-9065-9ea39d493d59" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-7b67cbd8-a844-4f2a-9065-9ea39d493d59" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2026-02-25T20:16:05.078469+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.23.1</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_priora89180d3-8bf0-4194-ad6c-e17757eae606" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_priora89180d3-8bf0-4194-ad6c-e17757eae606" class="xr-section-summary">prior</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in notebooks */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
  line-height: 1.6;
  padding-bottom: 4px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
}

.xr-header {
  border-bottom: solid 1px var(--xr-border-color);
  margin-bottom: 4px;
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-obj-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type,
.xr-group-box-contents > label {
  color: var(--xr-font-color2);
  display: block;
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
  margin-block-start: 0;
  margin-block-end: 0;
}

.xr-section-item {
  display: contents;
}

.xr-section-item > input,
.xr-group-box-contents > input,
.xr-array-wrap > input {
  display: block;
  opacity: 0;
  height: 0;
  margin: 0;
}

.xr-section-item > input + label,
.xr-var-item > input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item > input:enabled + label,
.xr-var-item > input:enabled + label,
.xr-array-wrap > input:enabled + label,
.xr-group-box-contents > input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item > input:focus-visible + label,
.xr-var-item > input:focus-visible + label,
.xr-array-wrap > input:focus-visible + label,
.xr-group-box-contents > input:focus-visible + label {
  outline: auto;
}

.xr-section-item > input:enabled + label:hover,
.xr-var-item > input:enabled + label:hover,
.xr-array-wrap > input:enabled + label:hover,
.xr-group-box-contents > input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
  white-space: nowrap;
}

.xr-section-summary > em {
  font-weight: normal;
}

.xr-span-grid {
  grid-column-end: -1;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.3em;
}

.xr-group-box-contents > input:checked + label > span {
  display: inline-block;
  padding-left: 0.6em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details,
.xr-group-box-contents > label {
  padding-top: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  grid-column: 1 / -1;
  margin-top: 4px;
  margin-bottom: 5px;
}

.xr-section-summary-in ~ .xr-section-details {
  display: none;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-children {
  display: inline-grid;
  grid-template-columns: 100%;
  grid-column: 1 / -1;
  padding-top: 4px;
}

.xr-group-box {
  display: inline-grid;
  grid-template-columns: 0px 30px auto;
}

.xr-group-box-vline {
  grid-column-start: 1;
  border-right: 0.2em solid;
  border-color: var(--xr-border-color);
  width: 0px;
}

.xr-group-box-hline {
  grid-column-start: 2;
  grid-row-start: 1;
  height: 1em;
  width: 26px;
  border-bottom: 0.2em solid;
  border-color: var(--xr-border-color);
}

.xr-group-box-contents {
  grid-column-start: 3;
  padding-bottom: 4px;
}

.xr-group-box-contents > label::before {
  content: "📂";
  padding-right: 0.3em;
}

.xr-group-box-contents > input:checked + label::before {
  content: "📁";
}

.xr-group-box-contents > input:checked + label {
  padding-bottom: 0px;
}

.xr-group-box-contents > input:checked ~ .xr-sections {
  display: none;
}

.xr-group-box-contents > input + label > span {
  display: none;
}

.xr-group-box-ellipsis {
  font-size: 1.4em;
  font-weight: 900;
  color: var(--xr-font-color2);
  letter-spacing: 0.15em;
  cursor: default;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 12MB
Dimensions:                                         (chain: 1, draw: 500,
                                                     date: 179, channel: 2,
                                                     fourier_mode: 4, control: 3)
Coordinates:
  * chain                                           (chain) int64 8B 0
  * draw                                            (draw) int64 4kB 0 1 ... 499
  * date                                            (date) datetime64[ms] 1kB ...
  * channel                                         (channel) &lt;U2 16B 'x1' 'x2'
  * fourier_mode                                    (fourier_mode) &lt;U5 80B 's...
  * control                                         (control) &lt;U7 84B 'event_...
Data variables: (12/17)
    channel_contribution                            (chain, draw, date, channel) float64 1MB ...
    intercept_contribution_original_scale           (chain, draw) float64 4kB ...
    intercept_contribution                          (chain, draw) float64 4kB ...
    gamma_fourier                                   (chain, draw, fourier_mode) float64 16kB ...
    control_contribution                            (chain, draw, date, control) float64 2MB ...
    saturation_lam                                  (chain, draw, channel) float64 8kB ...
    ...                                              ...
    yearly_seasonality_contribution_original_scale  (chain, draw, date) float64 716kB ...
    saturation_beta                                 (chain, draw, channel) float64 8kB ...
    fourier_contribution                            (chain, draw, date, fourier_mode) float64 3MB ...
    adstock_alpha                                   (chain, draw, channel) float64 8kB ...
    total_media_contribution_original_scale         (chain, draw) float64 4kB ...
    yearly_seasonality_contribution                 (chain, draw, date) float64 716kB ...
Attributes:
    created_at:                 2026-02-25T20:15:19.147585+00:00
    arviz_version:              0.23.1
    inference_library:          pymc
    inference_library_version:  5.27.1
    pymc_marketing_version:     0.17.1</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-54bb987f-dc80-49e5-a48e-8584d022c826" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-54bb987f-dc80-49e5-a48e-8584d022c826" class="xr-section-summary">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 1</li><li><span class="xr-has-index">draw</span>: 500</li><li><span class="xr-has-index">date</span>: 179</li><li><span class="xr-has-index">channel</span>: 2</li><li><span class="xr-has-index">fourier_mode</span>: 4</li><li><span class="xr-has-index">control</span>: 3</li></ul></div></li><li class="xr-section-item"><input id="section-5c8d349d-01a5-402b-b530-a904f76cdc42" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-5c8d349d-01a5-402b-b530-a904f76cdc42" class="xr-section-summary" title="Expand/collapse section">Coordinates: <span>(6)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0</div><input id="attrs-757f0e86-9db3-461b-898e-27080ca47f1c" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-757f0e86-9db3-461b-898e-27080ca47f1c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-94a7c723-c478-4def-8f66-50598900c94e" class="xr-var-data-in" type="checkbox"><label for="data-94a7c723-c478-4def-8f66-50598900c94e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 495 496 497 498 499</div><input id="attrs-5d63b91f-bedc-433b-a462-f03d448b86a7" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-5d63b91f-bedc-433b-a462-f03d448b86a7" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-5aa79f82-c016-4cdf-b69d-27417cadb81d" class="xr-var-data-in" type="checkbox"><label for="data-5aa79f82-c016-4cdf-b69d-27417cadb81d" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 497, 498, 499], shape=(500,))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">date</span></div><div class="xr-var-dims">(date)</div><div class="xr-var-dtype">datetime64[ms]</div><div class="xr-var-preview xr-preview">2018-04-02 ... 2021-08-30</div><input id="attrs-dbc3e0ee-194b-4bf2-a5b4-9181e80b8ffe" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-dbc3e0ee-194b-4bf2-a5b4-9181e80b8ffe" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-9c92bc5f-a91f-4bb3-b464-c2d01c4a2a41" class="xr-var-data-in" type="checkbox"><label for="data-9c92bc5f-a91f-4bb3-b464-c2d01c4a2a41" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['2018-04-02T00:00:00.000', '2018-04-09T00:00:00.000',
       '2018-04-16T00:00:00.000', '2018-04-23T00:00:00.000',
       '2018-04-30T00:00:00.000', '2018-05-07T00:00:00.000',
       '2018-05-14T00:00:00.000', '2018-05-21T00:00:00.000',
       '2018-05-28T00:00:00.000', '2018-06-04T00:00:00.000',
       '2018-06-11T00:00:00.000', '2018-06-18T00:00:00.000',
       '2018-06-25T00:00:00.000', '2018-07-02T00:00:00.000',
       '2018-07-09T00:00:00.000', '2018-07-16T00:00:00.000',
       '2018-07-23T00:00:00.000', '2018-07-30T00:00:00.000',
       '2018-08-06T00:00:00.000', '2018-08-13T00:00:00.000',
       '2018-08-20T00:00:00.000', '2018-08-27T00:00:00.000',
       '2018-09-03T00:00:00.000', '2018-09-10T00:00:00.000',
       '2018-09-17T00:00:00.000', '2018-09-24T00:00:00.000',
       '2018-10-01T00:00:00.000', '2018-10-08T00:00:00.000',
       '2018-10-15T00:00:00.000', '2018-10-22T00:00:00.000',
       '2018-10-29T00:00:00.000', '2018-11-05T00:00:00.000',
       '2018-11-12T00:00:00.000', '2018-11-19T00:00:00.000',
       '2018-11-26T00:00:00.000', '2018-12-03T00:00:00.000',
       '2018-12-10T00:00:00.000', '2018-12-17T00:00:00.000',
       '2018-12-24T00:00:00.000', '2018-12-31T00:00:00.000',
       '2019-01-07T00:00:00.000', '2019-01-14T00:00:00.000',
       '2019-01-21T00:00:00.000', '2019-01-28T00:00:00.000',
       '2019-02-04T00:00:00.000', '2019-02-11T00:00:00.000',
       '2019-02-18T00:00:00.000', '2019-02-25T00:00:00.000',
       '2019-03-04T00:00:00.000', '2019-03-11T00:00:00.000',
       '2019-03-18T00:00:00.000', '2019-03-25T00:00:00.000',
       '2019-04-01T00:00:00.000', '2019-04-08T00:00:00.000',
       '2019-04-15T00:00:00.000', '2019-04-22T00:00:00.000',
       '2019-04-29T00:00:00.000', '2019-05-06T00:00:00.000',
       '2019-05-13T00:00:00.000', '2019-05-20T00:00:00.000',
       '2019-05-27T00:00:00.000', '2019-06-03T00:00:00.000',
       '2019-06-10T00:00:00.000', '2019-06-17T00:00:00.000',
       '2019-06-24T00:00:00.000', '2019-07-01T00:00:00.000',
       '2019-07-08T00:00:00.000', '2019-07-15T00:00:00.000',
       '2019-07-22T00:00:00.000', '2019-07-29T00:00:00.000',
       '2019-08-05T00:00:00.000', '2019-08-12T00:00:00.000',
       '2019-08-19T00:00:00.000', '2019-08-26T00:00:00.000',
       '2019-09-02T00:00:00.000', '2019-09-09T00:00:00.000',
       '2019-09-16T00:00:00.000', '2019-09-23T00:00:00.000',
       '2019-09-30T00:00:00.000', '2019-10-07T00:00:00.000',
       '2019-10-14T00:00:00.000', '2019-10-21T00:00:00.000',
       '2019-10-28T00:00:00.000', '2019-11-04T00:00:00.000',
       '2019-11-11T00:00:00.000', '2019-11-18T00:00:00.000',
       '2019-11-25T00:00:00.000', '2019-12-02T00:00:00.000',
       '2019-12-09T00:00:00.000', '2019-12-16T00:00:00.000',
       '2019-12-23T00:00:00.000', '2019-12-30T00:00:00.000',
       '2020-01-06T00:00:00.000', '2020-01-13T00:00:00.000',
       '2020-01-20T00:00:00.000', '2020-01-27T00:00:00.000',
       '2020-02-03T00:00:00.000', '2020-02-10T00:00:00.000',
       '2020-02-17T00:00:00.000', '2020-02-24T00:00:00.000',
       '2020-03-02T00:00:00.000', '2020-03-09T00:00:00.000',
       '2020-03-16T00:00:00.000', '2020-03-23T00:00:00.000',
       '2020-03-30T00:00:00.000', '2020-04-06T00:00:00.000',
       '2020-04-13T00:00:00.000', '2020-04-20T00:00:00.000',
       '2020-04-27T00:00:00.000', '2020-05-04T00:00:00.000',
       '2020-05-11T00:00:00.000', '2020-05-18T00:00:00.000',
       '2020-05-25T00:00:00.000', '2020-06-01T00:00:00.000',
       '2020-06-08T00:00:00.000', '2020-06-15T00:00:00.000',
       '2020-06-22T00:00:00.000', '2020-06-29T00:00:00.000',
       '2020-07-06T00:00:00.000', '2020-07-13T00:00:00.000',
       '2020-07-20T00:00:00.000', '2020-07-27T00:00:00.000',
       '2020-08-03T00:00:00.000', '2020-08-10T00:00:00.000',
       '2020-08-17T00:00:00.000', '2020-08-24T00:00:00.000',
       '2020-08-31T00:00:00.000', '2020-09-07T00:00:00.000',
       '2020-09-14T00:00:00.000', '2020-09-21T00:00:00.000',
       '2020-09-28T00:00:00.000', '2020-10-05T00:00:00.000',
       '2020-10-12T00:00:00.000', '2020-10-19T00:00:00.000',
       '2020-10-26T00:00:00.000', '2020-11-02T00:00:00.000',
       '2020-11-09T00:00:00.000', '2020-11-16T00:00:00.000',
       '2020-11-23T00:00:00.000', '2020-11-30T00:00:00.000',
       '2020-12-07T00:00:00.000', '2020-12-14T00:00:00.000',
       '2020-12-21T00:00:00.000', '2020-12-28T00:00:00.000',
       '2021-01-04T00:00:00.000', '2021-01-11T00:00:00.000',
       '2021-01-18T00:00:00.000', '2021-01-25T00:00:00.000',
       '2021-02-01T00:00:00.000', '2021-02-08T00:00:00.000',
       '2021-02-15T00:00:00.000', '2021-02-22T00:00:00.000',
       '2021-03-01T00:00:00.000', '2021-03-08T00:00:00.000',
       '2021-03-15T00:00:00.000', '2021-03-22T00:00:00.000',
       '2021-03-29T00:00:00.000', '2021-04-05T00:00:00.000',
       '2021-04-12T00:00:00.000', '2021-04-19T00:00:00.000',
       '2021-04-26T00:00:00.000', '2021-05-03T00:00:00.000',
       '2021-05-10T00:00:00.000', '2021-05-17T00:00:00.000',
       '2021-05-24T00:00:00.000', '2021-05-31T00:00:00.000',
       '2021-06-07T00:00:00.000', '2021-06-14T00:00:00.000',
       '2021-06-21T00:00:00.000', '2021-06-28T00:00:00.000',
       '2021-07-05T00:00:00.000', '2021-07-12T00:00:00.000',
       '2021-07-19T00:00:00.000', '2021-07-26T00:00:00.000',
       '2021-08-02T00:00:00.000', '2021-08-09T00:00:00.000',
       '2021-08-16T00:00:00.000', '2021-08-23T00:00:00.000',
       '2021-08-30T00:00:00.000'], dtype='datetime64[ms]')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">channel</span></div><div class="xr-var-dims">(channel)</div><div class="xr-var-dtype">&lt;U2</div><div class="xr-var-preview xr-preview">'x1' 'x2'</div><input id="attrs-c0b8aece-3c0c-4799-ac3f-30ff5f81148c" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c0b8aece-3c0c-4799-ac3f-30ff5f81148c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-24332533-4d12-47ea-bd1d-581298af175b" class="xr-var-data-in" type="checkbox"><label for="data-24332533-4d12-47ea-bd1d-581298af175b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['x1', 'x2'], dtype='&lt;U2')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">fourier_mode</span></div><div class="xr-var-dims">(fourier_mode)</div><div class="xr-var-dtype">&lt;U5</div><div class="xr-var-preview xr-preview">'sin_1' 'sin_2' 'cos_1' 'cos_2'</div><input id="attrs-e03a1d4b-93b9-4a99-900f-6728e8044397" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-e03a1d4b-93b9-4a99-900f-6728e8044397" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-1d712f44-0f2c-4165-b223-7f80eead65f3" class="xr-var-data-in" type="checkbox"><label for="data-1d712f44-0f2c-4165-b223-7f80eead65f3" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['sin_1', 'sin_2', 'cos_1', 'cos_2'], dtype='&lt;U5')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">control</span></div><div class="xr-var-dims">(control)</div><div class="xr-var-dtype">&lt;U7</div><div class="xr-var-preview xr-preview">'event_1' 'event_2' 't'</div><input id="attrs-7da4ee1b-3bdd-415f-8f4d-278e7619c160" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-7da4ee1b-3bdd-415f-8f4d-278e7619c160" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-a419fc75-23cd-4cc0-adde-b2b8106d6e4e" class="xr-var-data-in" type="checkbox"><label for="data-a419fc75-23cd-4cc0-adde-b2b8106d6e4e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['event_1', 'event_2', 't'], dtype='&lt;U7')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-e53adee9-aa4c-4dc3-b823-f8d65b9f4a74" class="xr-section-summary-in" type="checkbox"><label for="section-e53adee9-aa4c-4dc3-b823-f8d65b9f4a74" class="xr-section-summary" title="Expand/collapse section">Data variables: <span>(17)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>channel_contribution</span></div><div class="xr-var-dims">(chain, draw, date, channel)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.01959 0.0 ... 0.5405 0.0001204</div><input id="attrs-e2612197-84d8-4c8e-9a39-af21449f7214" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-e2612197-84d8-4c8e-9a39-af21449f7214" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-7fb17264-edf0-4e32-ad9c-c89679df2843" class="xr-var-data-in" type="checkbox"><label for="data-7fb17264-edf0-4e32-ad9c-c89679df2843" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[[1.95855422e-02, 0.00000000e+00],
         [5.97674403e-03, 0.00000000e+00],
         [2.14385720e-02, 0.00000000e+00],
         ...,
         [1.50671874e-02, 3.68379250e-05],
         [1.32391640e-02, 2.06435785e-06],
         [2.28525237e-02, 1.15684401e-07]],

        [[5.34969661e-01, 0.00000000e+00],
         [2.43133168e-01, 0.00000000e+00],
         [6.07828748e-01, 0.00000000e+00],
         ...,
         [5.90734792e-01, 1.37218580e-02],
         [4.49006049e-01, 5.41891613e-03],
         [6.63206542e-01, 2.13691408e-03]],

        [[5.80283891e-01, 0.00000000e+00],
         [1.91498021e-01, 0.00000000e+00],
         [6.44544159e-01, 0.00000000e+00],
         ...,
...
         ...,
         [1.12772586e-01, 2.37387735e-02],
         [9.08927436e-02, 8.35915153e-03],
         [1.01558122e-01, 2.94209164e-03]],

        [[9.45649145e-02, 0.00000000e+00],
         [4.88819857e-02, 0.00000000e+00],
         [1.13926105e-01, 0.00000000e+00],
         ...,
         [1.25936129e-01, 3.70254768e-03],
         [9.13882105e-02, 8.54380406e-04],
         [1.29528610e-01, 1.97134029e-04]],

        [[3.51670427e-01, 0.00000000e+00],
         [2.10777197e-01, 0.00000000e+00],
         [4.51983505e-01, 0.00000000e+00],
         ...,
         [5.67908807e-01, 3.75964809e-03],
         [4.11973795e-01, 6.72814952e-04],
         [5.40489479e-01, 1.20403541e-04]]]], shape=(1, 500, 179, 2))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>intercept_contribution_original_scale</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">4.881 7.127 2.728 ... 2.816 8.204</div><input id="attrs-6ae89ada-faec-4f98-9bd5-28696825b09e" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-6ae89ada-faec-4f98-9bd5-28696825b09e" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-2d979df1-4673-450f-96ab-a6991e428e90" class="xr-var-data-in" type="checkbox"><label for="data-2d979df1-4673-450f-96ab-a6991e428e90" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[4.88110426, 7.12690845, 2.72806562, 3.53945051, 4.30380192,
        6.42232235, 2.44951749, 2.26329193, 4.5486958 , 4.15923541,
        6.08658749, 8.88004392, 3.94724535, 3.28721561, 5.12963223,
        2.51631958, 6.7992397 , 6.02909075, 5.33868272, 4.5491046 ,
        5.25274758, 5.58738029, 1.81044737, 3.51340157, 6.00846267,
        3.09658726, 5.24609434, 7.19461435, 2.42698381, 6.21459382,
        2.39107849, 6.15127908, 4.87994981, 5.02356727, 3.7023398 ,
        4.39240425, 4.89381757, 3.1936771 , 1.92704369, 3.86770459,
        0.40370377, 4.51214963, 4.10073053, 3.38597511, 3.4094486 ,
        3.14366863, 5.58046988, 6.74970567, 2.36731163, 3.06455146,
        1.86642822, 7.58919872, 5.94782373, 2.0578158 , 1.81033023,
        5.02417377, 7.60330691, 5.3638244 , 5.96107715, 3.04610156,
        1.63930471, 3.4129571 , 5.2224191 , 4.47050883, 2.21407136,
        5.65298913, 2.64370567, 5.54107657, 6.6238075 , 7.44469045,
        3.38190554, 6.8172785 , 3.49244479, 6.70269649, 5.19043794,
        7.14168189, 5.62985751, 5.90141064, 3.49160777, 3.6251109 ,
        6.12963371, 6.064823  , 4.98287412, 3.8770911 , 4.01219787,
        4.15933826, 7.22929069, 7.16875798, 6.9610565 , 5.24523345,
        7.78279893, 2.23870145, 3.00086383, 3.32566113, 4.75682122,
        2.79841258, 5.117267  , 6.96365064, 4.08502187, 5.01578143,
...
        5.12030151, 1.37576063, 1.26679269, 2.98463202, 8.2073205 ,
        3.95800064, 3.08632888, 0.4306388 , 4.28504678, 4.10981237,
        3.07169239, 7.3976498 , 4.4448704 , 4.19359958, 4.93044982,
        3.61249709, 5.32176713, 2.75632005, 1.63045086, 7.66743199,
        3.90697935, 5.00068155, 4.6610847 , 7.0670729 , 4.91068479,
        7.73024421, 2.45232427, 3.22884597, 3.00017479, 3.96156295,
        3.08824853, 6.04961622, 4.8135456 , 1.1980178 , 2.85479761,
        4.26624167, 4.00193911, 3.78217481, 3.83268227, 6.35845464,
        3.14082016, 3.88627667, 3.78626077, 6.4829876 , 6.761145  ,
        4.56671135, 1.96183161, 5.62674144, 4.04941299, 6.95603845,
        5.43247522, 3.49732401, 7.07716841, 3.28629589, 6.57876485,
        5.86746688, 7.24609616, 4.73982212, 1.62143182, 5.46431504,
        3.40022497, 4.5685275 , 6.10513444, 5.53660045, 4.979045  ,
        1.95258196, 2.88745447, 2.26868814, 2.1960384 , 4.08837857,
        4.63380097, 5.54216969, 5.58372826, 2.22452481, 8.06995237,
        6.50291317, 4.23001623, 3.13359559, 5.113449  , 4.31923343,
        3.46845348, 7.75052018, 5.05503738, 3.61403435, 1.85145675,
        4.16146974, 3.284042  , 1.65158832, 4.98214706, 3.24847284,
        3.69619851, 3.20966253, 5.78645634, 6.93948065, 0.52030806,
        4.83648062, 4.96348479, 4.29835342, 2.8162317 , 8.20371318]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>intercept_contribution</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.5476 0.7995 ... 0.3159 0.9203</div><input id="attrs-1f104c6a-233e-47b9-a925-499f55be8b40" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-1f104c6a-233e-47b9-a925-499f55be8b40" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-14c4c8c6-826a-44f5-a290-9d4dff9f4ee6" class="xr-var-data-in" type="checkbox"><label for="data-14c4c8c6-826a-44f5-a290-9d4dff9f4ee6" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.54757741, 0.79951869, 0.30604286, 0.39706653, 0.48281385,
        0.72047604, 0.27479447, 0.25390311, 0.5102868 , 0.46659593,
        0.68281226, 0.99619086, 0.44281422, 0.36877004, 0.57545805,
        0.28228853, 0.76275979, 0.6763621 , 0.59890998, 0.51033266,
        0.58926951, 0.62680965, 0.2031016 , 0.39414428, 0.67404797,
        0.34738476, 0.58852313, 0.80711415, 0.27226657, 0.69717241,
        0.2682386 , 0.69006956, 0.5474479 , 0.56355935, 0.41533996,
        0.49275353, 0.54900363, 0.3582766 , 0.21618174, 0.43389109,
        0.04528874, 0.50618694, 0.46003267, 0.37984919, 0.38248252,
        0.3526665 , 0.62603442, 0.75720291, 0.26557236, 0.34379089,
        0.20938171, 0.85137985, 0.66724531, 0.23085216, 0.20308846,
        0.56362739, 0.85296255, 0.60173045, 0.66873212, 0.34172112,
        0.18390229, 0.38287611, 0.58586717, 0.50151554, 0.24838139,
        0.63416985, 0.2965791 , 0.62161515, 0.74307926, 0.83516846,
        0.37939265, 0.76478344, 0.39179329, 0.75192928, 0.58227942,
        0.80117602, 0.63157487, 0.66203854, 0.39169939, 0.40667618,
        0.68764132, 0.68037065, 0.55899427, 0.4349441 , 0.4501008 ,
        0.46660746, 0.81100425, 0.8042135 , 0.7809129 , 0.58842655,
        0.87309852, 0.25114447, 0.33664621, 0.37308298, 0.53363496,
        0.3139346 , 0.57407088, 0.78120392, 0.45827042, 0.56268591,
...
        0.5744113 , 0.15433709, 0.14211273, 0.33482527, 0.92072266,
        0.44402079, 0.34623394, 0.0483104 , 0.48070984, 0.4610515 ,
        0.34459198, 0.82989129, 0.49863934, 0.470451  , 0.55311315,
        0.40526113, 0.59701234, 0.30921253, 0.18290903, 0.8601563 ,
        0.43829706, 0.56099196, 0.52289494, 0.79280615, 0.55089585,
        0.86720277, 0.27510934, 0.36222195, 0.33656891, 0.44442042,
        0.3464493 , 0.67866471, 0.53999847, 0.13439735, 0.32026005,
        0.47860022, 0.44894994, 0.4242961 , 0.42996218, 0.71331116,
        0.35234694, 0.43597457, 0.42475447, 0.72728165, 0.75848621,
        0.51230784, 0.22008435, 0.6312253 , 0.45427571, 0.78034996,
        0.60943192, 0.39234065, 0.7939387 , 0.36866686, 0.73802624,
        0.65823063, 0.81288954, 0.53172794, 0.18189725, 0.61300381,
        0.38144778, 0.51251158, 0.68489291, 0.62111301, 0.55856471,
        0.2190467 , 0.3239236 , 0.25450847, 0.2463584 , 0.45864699,
        0.51983416, 0.62173778, 0.62639995, 0.24955409, 0.90531228,
        0.72951696, 0.47453634, 0.35153647, 0.57364257, 0.484545  ,
        0.38910187, 0.86947739, 0.56708977, 0.40543358, 0.20770216,
        0.46684658, 0.36841401, 0.1852803 , 0.55891271, 0.36442376,
        0.41465101, 0.3600699 , 0.64914262, 0.77849246, 0.05836977,
        0.54257139, 0.55681912, 0.48220262, 0.3159336 , 0.92031798]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>gamma_fourier</span></div><div class="xr-var-dims">(chain, draw, fourier_mode)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.5103 0.3597 ... -0.0688 0.02724</div><input id="attrs-cd0d7a0e-1a6a-403c-81ca-b41b9bb3ecc9" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-cd0d7a0e-1a6a-403c-81ca-b41b9bb3ecc9" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-013ab53d-e892-4bb5-8275-adac06723a6d" class="xr-var-data-in" type="checkbox"><label for="data-013ab53d-e892-4bb5-8275-adac06723a6d" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[ 0.51034018,  0.35967602,  0.42267296, -0.00360874],
        [-0.06870662, -0.04295012, -0.25578504, -0.27605908],
        [-0.13239368,  0.1502896 , -0.07659457, -0.05021182],
        ...,
        [-0.17281746,  0.1196555 , -0.01982358, -0.19877479],
        [-0.04436015, -0.01725794, -0.18143106,  0.09307142],
        [-0.01474902,  0.44065915, -0.06879895,  0.02723951]]],
      shape=(1, 500, 4))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>control_contribution</span></div><div class="xr-var-dims">(chain, draw, date, control)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.0 0.0 0.0 ... -0.0 -0.0 -7.378</div><input id="attrs-038f0523-bcd4-4a31-b17f-e8d054186e2c" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-038f0523-bcd4-4a31-b17f-e8d054186e2c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-c8011f09-401e-4a13-b151-091464a09fc4" class="xr-var-data-in" type="checkbox"><label for="data-c8011f09-401e-4a13-b151-091464a09fc4" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[[-0.        ,  0.        ,  0.        ],
         [-0.        ,  0.        ,  0.0454157 ],
         [-0.        ,  0.        ,  0.0908314 ],
         ...,
         [-0.        ,  0.        ,  7.99316325],
         [-0.        ,  0.        ,  8.03857895],
         [-0.        ,  0.        ,  8.08399465]],

        [[-0.        ,  0.        , -0.        ],
         [-0.        ,  0.        , -0.01094273],
         [-0.        ,  0.        , -0.02188545],
         ...,
         [-0.        ,  0.        , -1.92591967],
         [-0.        ,  0.        , -1.9368624 ],
         [-0.        ,  0.        , -1.94780512]],

        [[ 0.        ,  0.        ,  0.        ],
         [ 0.        ,  0.        ,  0.01383844],
         [ 0.        ,  0.        ,  0.02767688],
         ...,
...
         [-0.        ,  0.        , -1.91100424],
         [-0.        ,  0.        , -1.92186222],
         [-0.        ,  0.        , -1.9327202 ]],

        [[ 0.        , -0.        , -0.        ],
         [ 0.        , -0.        , -0.01018041],
         [ 0.        , -0.        , -0.02036081],
         ...,
         [ 0.        , -0.        , -1.79175158],
         [ 0.        , -0.        , -1.80193198],
         [ 0.        , -0.        , -1.81211239]],

        [[-0.        , -0.        , -0.        ],
         [-0.        , -0.        , -0.04144833],
         [-0.        , -0.        , -0.08289667],
         ...,
         [-0.        , -0.        , -7.29490673],
         [-0.        , -0.        , -7.33635506],
         [-0.        , -0.        , -7.3778034 ]]]],
      shape=(1, 500, 179, 3))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>saturation_lam</span></div><div class="xr-var-dims">(chain, draw, channel)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">2.1 0.7213 3.362 ... 1.232 2.268</div><input id="attrs-ccf9ead7-2114-4f99-888c-c003c78c0432" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-ccf9ead7-2114-4f99-888c-c003c78c0432" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-028a5313-67d7-46f7-9461-eb4c240fee14" class="xr-var-data-in" type="checkbox"><label for="data-028a5313-67d7-46f7-9461-eb4c240fee14" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[ 2.0999606 ,  0.7213186 ],
        [ 3.36246373,  3.23800006],
        [ 1.30776779,  1.08702657],
        [ 2.62135426,  6.81531606],
        [ 3.05623084,  3.53012859],
        [ 2.38707457,  2.65042767],
        [ 2.9557197 ,  1.88986169],
        [ 2.71869808,  1.11053708],
        [ 4.68131088,  4.14719646],
        [ 2.48173259,  3.59816408],
        [ 0.93416395,  3.05718922],
        [ 2.7709873 ,  4.04101021],
        [ 0.4544018 ,  2.76468373],
        [ 2.98408495,  4.07185164],
        [ 3.8428807 ,  4.87823264],
        [ 5.21931369,  1.24649142],
        [ 1.27113838,  2.13660772],
        [ 2.02594734,  2.42650999],
        [ 3.08835079,  6.50755091],
        [ 4.51068138,  3.84151723],
...
        [ 3.56829016,  4.67697517],
        [ 0.87186842,  3.77028257],
        [ 4.47352323,  5.86116375],
        [ 5.99721736,  5.3198431 ],
        [ 2.87423221,  3.60935119],
        [ 1.2082119 ,  3.16968982],
        [ 0.65633315,  2.6462561 ],
        [ 3.58923285,  0.48367807],
        [ 2.13024023,  1.04686203],
        [ 1.11390443,  2.57826578],
        [ 2.95490832,  5.50062756],
        [ 3.10951265,  1.45731553],
        [ 1.61091303,  4.96186477],
        [ 1.709923  ,  0.9162964 ],
        [ 1.26549942,  1.73985461],
        [ 4.83923662,  1.84259647],
        [ 5.24229094,  2.53185695],
        [ 2.2322327 ,  2.44258302],
        [ 2.00479933,  3.21787276],
        [ 1.23194229,  2.26820579]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>y_sigma</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">4.355 6.457 5.124 ... 7.292 7.839</div><input id="attrs-f1aee8e7-457e-4c35-9e46-fb31e4d4aaba" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-f1aee8e7-457e-4c35-9e46-fb31e4d4aaba" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-62fc8625-d528-46ac-aba4-4508a060f448" class="xr-var-data-in" type="checkbox"><label for="data-62fc8625-d528-46ac-aba4-4508a060f448" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[4.35474428e+00, 6.45720156e+00, 5.12424493e+00, 6.58502665e-01,
        1.17513613e+00, 2.60345913e+00, 1.69118414e+00, 1.63138745e+00,
        4.23474430e+00, 9.58813051e+00, 7.67872949e+00, 3.51491001e+00,
        2.24533222e+00, 7.07437930e+00, 5.01305804e+00, 5.05101066e+00,
        4.74600693e+00, 5.44758926e+00, 9.20800127e+00, 4.10184720e+00,
        9.11781540e+00, 1.22505485e+01, 3.79510177e+00, 3.55497245e+00,
        1.13208344e+01, 6.15981942e-01, 9.91489362e-01, 1.69466108e+01,
        3.28812413e+00, 3.21543622e+00, 6.87063727e+00, 8.09073003e+00,
        3.85072262e+00, 4.10073543e+00, 2.07352112e+00, 2.45197376e+00,
        1.99727576e+00, 1.14102977e+00, 1.16711834e+00, 9.32392107e+00,
        7.21797923e+00, 1.09480498e+00, 6.31930537e+00, 3.90716705e+00,
        2.65131734e+00, 7.43552686e+00, 5.52791851e+00, 3.52310541e+00,
        1.19118659e+01, 8.45661908e+00, 1.17063420e+01, 7.57789545e+00,
        1.66189297e+00, 6.56925342e+00, 8.86024566e+00, 2.82082959e+00,
        1.95243560e+00, 1.92535016e+00, 1.22091452e+00, 2.59073336e+00,
        3.02168633e+00, 4.58944749e+00, 5.21454551e+00, 1.05923395e+01,
        2.11147040e+00, 1.20875621e+01, 2.96134867e+00, 1.65640840e+00,
        7.29874698e+00, 1.11398451e+01, 9.26926222e-01, 4.11704566e+00,
        1.85791291e+00, 7.10322950e+00, 5.39719065e+00, 1.43182851e+00,
        1.97078757e+00, 2.84422490e+00, 4.97782225e+00, 5.09277266e+00,
...
        1.12532760e+01, 3.02332650e-01, 9.87636580e+00, 8.51036678e+00,
        8.54803293e+00, 3.89597527e+00, 1.85528023e+00, 2.53996722e+00,
        1.24305387e+01, 3.48008257e+00, 5.38372212e+00, 3.43828915e+00,
        8.63228596e+00, 4.52531206e+00, 2.16064593e+00, 3.69777894e+00,
        4.68534057e+00, 9.70364245e+00, 2.33526515e+00, 3.26289510e+00,
        4.23209942e-02, 4.92435817e+00, 1.44058153e+01, 1.26226989e+01,
        9.39747336e+00, 1.47363378e+00, 7.32213485e+00, 4.03243163e-02,
        2.13987940e-01, 4.28817899e-02, 1.37591890e+01, 4.63041890e+00,
        1.29629303e+01, 6.03412892e+00, 1.23723022e+00, 1.12654652e+00,
        8.40192088e+00, 2.91065682e+00, 6.70917448e+00, 1.92247633e+00,
        4.98644838e+00, 3.51197829e+00, 2.82076095e+00, 3.61175997e+00,
        2.14447040e+00, 1.89653763e+00, 3.77695470e-01, 7.59606287e+00,
        2.18363312e+00, 5.39260597e-01, 4.12180167e+00, 5.07363797e+00,
        3.52744342e-01, 6.54930806e-02, 2.22387208e+00, 6.89370401e-01,
        4.27615697e+00, 1.50023098e+01, 7.91377680e+00, 5.63688630e+00,
        3.00832852e+00, 1.06620081e+00, 8.24787891e+00, 5.82526489e-01,
        1.85401187e+00, 2.75449152e+00, 3.21034877e+00, 3.00296542e+00,
        8.19419421e+00, 1.04880541e+01, 1.76600435e+00, 6.76467944e-01,
        5.30318886e+00, 1.99969117e+00, 2.34717856e+00, 5.85100400e+00,
        3.36352975e+00, 4.13615768e+00, 7.29192626e+00, 7.83893971e+00]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>gamma_control</span></div><div class="xr-var-dims">(chain, draw, control)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.09605 0.007198 ... -0.04145</div><input id="attrs-b2e02e70-fac2-47cd-8a4b-3ae4de8d4b34" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-b2e02e70-fac2-47cd-8a4b-3ae4de8d4b34" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-41642544-1f64-4c58-b1e4-b4bd857aa326" class="xr-var-data-in" type="checkbox"><label for="data-41642544-1f64-4c58-b1e4-b4bd857aa326" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[-0.09604872,  0.00719848,  0.0454157 ],
        [-0.01309965,  0.00733216, -0.01094273],
        [ 0.01218651,  0.06547251,  0.01383844],
        ...,
        [-0.01313327,  0.09092489, -0.01085798],
        [ 0.01618062, -0.02803723, -0.01018041],
        [-0.03478515, -0.01586325, -0.04144833]]], shape=(1, 500, 3))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>control_contribution_original_scale</span></div><div class="xr-var-dims">(chain, draw, date, control)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-0.0 0.0 0.0 ... -0.0 -0.0 -65.77</div><input id="attrs-90e7c471-b545-4c0d-803c-f9f48d57e1b0" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-90e7c471-b545-4c0d-803c-f9f48d57e1b0" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-0fffef60-c1c5-4ba9-9bbc-125d040fb07e" class="xr-var-data-in" type="checkbox"><label for="data-0fffef60-c1c5-4ba9-9bbc-125d040fb07e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[[ -0.        ,   0.        ,   0.        ],
         [ -0.        ,   0.        ,   0.40483549],
         [ -0.        ,   0.        ,   0.80967097],
         ...,
         [ -0.        ,   0.        ,  71.25104573],
         [ -0.        ,   0.        ,  71.65588122],
         [ -0.        ,   0.        ,  72.06071671]],

        [[ -0.        ,   0.        ,  -0.        ],
         [ -0.        ,   0.        ,  -0.09754344],
         [ -0.        ,   0.        ,  -0.19508688],
         ...,
         [ -0.        ,   0.        , -17.16764519],
         [ -0.        ,   0.        , -17.26518862],
         [ -0.        ,   0.        , -17.36273206]],

        [[  0.        ,   0.        ,   0.        ],
         [  0.        ,   0.        ,   0.12335582],
         [  0.        ,   0.        ,   0.24671164],
         ...,
...
         [ -0.        ,   0.        , -17.03468908],
         [ -0.        ,   0.        , -17.13147709],
         [ -0.        ,   0.        , -17.22826509]],

        [[  0.        ,  -0.        ,  -0.        ],
         [  0.        ,  -0.        ,  -0.09074813],
         [  0.        ,  -0.        ,  -0.18149626],
         ...,
         [  0.        ,  -0.        , -15.97167099],
         [  0.        ,  -0.        , -16.06241912],
         [  0.        ,  -0.        , -16.15316725]],

        [[ -0.        ,  -0.        ,  -0.        ],
         [ -0.        ,  -0.        ,  -0.36947039],
         [ -0.        ,  -0.        ,  -0.73894077],
         ...,
         [ -0.        ,  -0.        , -65.02678809],
         [ -0.        ,  -0.        , -65.39625848],
         [ -0.        ,  -0.        , -65.76572886]]]],
      shape=(1, 500, 179, 3))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>y_original_scale</span></div><div class="xr-var-dims">(chain, draw, date)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">68.18 35.16 51.16 ... -82.92 -152.0</div><input id="attrs-234e52c5-21ff-4e87-8a77-6851fea1e30f" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-234e52c5-21ff-4e87-8a77-6851fea1e30f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-952e72be-ea0a-4293-acc8-23e9975390c3" class="xr-var-data-in" type="checkbox"><label for="data-952e72be-ea0a-4293-acc8-23e9975390c3" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[  68.18238753,   35.16252845,   51.16038277, ...,
           29.57035401,   -1.84660982,   59.55121629],
        [  48.9062568 ,    9.87124645,   37.43562148, ...,
           64.12267976,  -78.11881782,   85.77079223],
        [  10.16458201,   47.75808461,  -32.79050365, ...,
           22.58476291,   74.19920052,  -27.53364799],
        ...,
        [  17.15992296,   -9.76283375,   13.91783001, ...,
          -35.21957988,   23.03032007,  -10.61156699],
        [ 107.96259465,   28.40961136,   62.83491478, ...,
           12.21904827,   19.75873691,  -29.80816464],
        [  16.99159981,   -5.68731669,   69.94202475, ...,
           87.59791566,  -82.92287607, -152.02807178]]],
      shape=(1, 500, 179))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>channel_contribution_original_scale</span></div><div class="xr-var-dims">(chain, draw, date, channel)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.1746 0.0 ... 4.818 0.001073</div><input id="attrs-ef478340-8117-47ec-9f0a-bb9fb08d8832" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-ef478340-8117-47ec-9f0a-bb9fb08d8832" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-7fbfae9f-00b7-4ab9-a60b-d044b926c95c" class="xr-var-data-in" type="checkbox"><label for="data-7fbfae9f-00b7-4ab9-a60b-d044b926c95c" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[[1.74585495e-01, 0.00000000e+00],
         [5.32766877e-02, 0.00000000e+00],
         [1.91103400e-01, 0.00000000e+00],
         ...,
         [1.34308887e-01, 3.28373211e-04],
         [1.18013889e-01, 1.84016829e-05],
         [2.03707363e-01, 1.03121059e-06]],

        [[4.76871879e+00, 0.00000000e+00],
         [2.16728871e+00, 0.00000000e+00],
         [5.41818459e+00, 0.00000000e+00],
         ...,
         [5.26580908e+00, 1.22316623e-01],
         [4.00243928e+00, 4.83042106e-02],
         [5.91182216e+00, 1.90484490e-02]],

        [[5.17264977e+00, 0.00000000e+00],
         [1.70701309e+00, 0.00000000e+00],
         [5.74546570e+00, 0.00000000e+00],
         ...,
...
         ...,
         [1.00525467e+00, 2.11607393e-01],
         [8.10217786e-01, 7.45134647e-02],
         [9.05288953e-01, 2.62258007e-02]],

        [[8.42951511e-01, 0.00000000e+00],
         [4.35733950e-01, 0.00000000e+00],
         [1.01553713e+00, 0.00000000e+00],
         ...,
         [1.12259447e+00, 3.30045047e-02],
         [8.14634377e-01, 7.61594571e-03],
         [1.15461784e+00, 1.75725245e-03]],

        [[3.13478968e+00, 0.00000000e+00],
         [1.87886763e+00, 0.00000000e+00],
         [4.02898031e+00, 0.00000000e+00],
         ...,
         [5.06233829e+00, 3.35134976e-02],
         [3.67233381e+00, 5.99747152e-03],
         [4.81792244e+00, 1.07327699e-03]]]], shape=(1, 500, 179, 2))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>yearly_seasonality_contribution_original_scale</span></div><div class="xr-var-dims">(chain, draw, date)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">4.461 3.206 1.939 ... 4.252 3.821</div><input id="attrs-c7c49482-4f03-4568-acb9-219f55863bf5" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c7c49482-4f03-4568-acb9-219f55863bf5" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-9863413a-be04-4dbb-8dc0-24e3f415a816" class="xr-var-data-in" type="checkbox"><label for="data-9863413a-be04-4dbb-8dc0-24e3f415a816" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[ 4.46062535,  3.20556216,  1.93897076, ..., -2.67248819,
         -2.77716501, -2.9768813 ],
        [ 1.88371392,  2.1688479 ,  2.31554269, ...,  1.64434984,
          2.08679195,  2.49074856],
        [-0.75622202, -0.99801239, -1.22888623, ...,  2.65085456,
          2.75564778,  2.7597128 ],
        ...,
        [ 0.20785902, -0.0723063 , -0.41331755, ...,  2.25897924,
          2.7615379 ,  3.16165765],
        [-1.20204012, -0.93929595, -0.63006217, ...,  1.28155668,
          0.97424556,  0.66751798],
        [-0.45985819, -1.31067385, -2.08797442, ...,  4.45845807,
          4.25174052,  3.82052683]]], shape=(1, 500, 179))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>saturation_beta</span></div><div class="xr-var-dims">(chain, draw, channel)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.05857 0.6063 ... 2.511 0.6312</div><input id="attrs-a15d6b35-a198-4e64-9e1d-7948f77661c6" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-a15d6b35-a198-4e64-9e1d-7948f77661c6" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-5f781dd9-553a-4c03-94b5-d283c44a0cf1" class="xr-var-data-in" type="checkbox"><label for="data-5f781dd9-553a-4c03-94b5-d283c44a0cf1" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[5.85661950e-02, 6.06276159e-01],
        [1.19752431e+00, 1.76584595e-01],
        [2.80822625e+00, 4.81958061e-01],
        [1.10006501e+00, 2.61991421e-01],
        [6.71056733e-01, 2.66994995e-01],
        [1.35470047e+00, 5.57071423e-01],
        [1.19015859e+00, 7.51022400e-01],
        [8.28945818e-01, 6.52711562e-01],
        [7.15745293e-01, 3.71995763e-01],
        [6.83158940e-01, 2.24119168e-01],
        [1.70241437e+00, 1.01969455e-01],
        [6.44311574e-01, 2.67450427e-01],
        [7.55811955e-01, 5.01257799e-01],
        [8.20530554e-02, 6.91183613e-01],
        [1.09490024e+00, 1.06976262e-01],
        [2.09014770e+00, 1.06355176e+00],
        [7.41881227e-01, 2.40188166e-01],
        [7.00066821e-02, 2.18432042e-01],
        [6.75505338e-01, 7.76233650e-01],
        [2.46219596e+00, 5.29293033e-01],
...
        [6.29102130e-01, 7.47550655e-01],
        [2.36893943e+00, 4.47167556e-01],
        [1.68700196e-01, 1.21108948e-01],
        [1.48996858e+00, 1.04871926e+00],
        [4.49842551e-01, 1.20946988e+00],
        [6.16841095e-01, 6.23282051e-02],
        [5.20396790e-01, 1.36144003e-01],
        [2.59283075e+00, 4.85586456e-01],
        [2.50671139e+00, 1.21444350e-01],
        [1.13392787e+00, 3.22641961e-01],
        [3.52691108e+00, 3.99194394e-01],
        [5.69117992e-01, 1.27078331e-01],
        [4.83888473e-01, 3.75524382e-01],
        [6.09467914e-02, 2.17827907e-01],
        [1.05987510e+00, 9.26324537e-01],
        [1.63134055e+00, 6.13056833e-02],
        [1.03521484e+00, 4.14774795e-01],
        [2.71181164e-01, 5.46368257e-01],
        [3.72780285e-01, 2.10108036e-01],
        [2.51132328e+00, 6.31183681e-01]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>fourier_contribution</span></div><div class="xr-var-dims">(chain, draw, date, fourier_mode)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.5103 -0.008507 ... -0.01238</div><input id="attrs-2cbaef1d-53bd-41ba-a6df-01b0e3b395cf" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-2cbaef1d-53bd-41ba-a6df-01b0e3b395cf" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-eb78d93e-ccd7-4556-aae1-d30f5a8e017c" class="xr-var-data-in" type="checkbox"><label for="data-eb78d93e-ccd7-4556-aae1-d30f5a8e017c" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[[ 5.10304487e-01, -8.50674328e-03, -4.99869551e-03,
           3.60773481e-03],
         [ 5.05884166e-01, -9.40244900e-02, -5.57330286e-02,
           3.48325619e-03],
         [ 4.94137260e-01, -1.74115032e-01, -1.05660195e-01,
           3.15771991e-03],
         ...,
         [-3.59114853e-01,  3.59659180e-01, -3.00317421e-01,
          -3.49189761e-05],
         [-4.00072923e-01,  3.50109299e-01, -2.62414138e-01,
           8.26779400e-04],
         [-4.35236844e-01,  3.20350696e-01, -2.20710382e-01,
           1.64075509e-03]],

        [[-6.87018198e-02,  1.01581887e-03,  3.02501382e-03,
           2.75981856e-01],
         [-6.81067160e-02,  1.12277810e-02,  3.37274358e-02,
           2.66459582e-01],
         [-6.65252409e-02,  2.07916624e-02,  6.39413923e-02,
           2.41556946e-01],
...
         [ 3.12152376e-02, -1.72571359e-02,  1.28910321e-01,
           9.00578792e-04],
         [ 3.47754242e-02, -1.67989143e-02,  1.12640455e-01,
          -2.13230763e-02],
         [ 3.78319676e-02, -1.53710395e-02,  9.47392470e-02,
          -4.23159383e-02]],

        [[-1.47479882e-02, -1.04220857e-02,  8.13643261e-04,
          -2.72318870e-02],
         [-1.46202393e-02, -1.15194647e-01,  9.07172742e-03,
          -2.62922981e-02],
         [-1.42807494e-02, -2.13318037e-01,  1.71984282e-02,
          -2.38350867e-02],
         ...,
         [ 1.03785519e-02,  4.40638522e-01,  4.88830026e-02,
           2.63575252e-04],
         [ 1.15622553e-02,  4.28938431e-01,  4.27134429e-02,
          -6.24069241e-03],
         [ 1.25785056e-02,  3.92479505e-01,  3.59252758e-02,
          -1.23847399e-02]]]], shape=(1, 500, 179, 4))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>adstock_alpha</span></div><div class="xr-var-dims">(chain, draw, channel)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.02212 0.05604 ... 0.3245 0.179</div><input id="attrs-78baa804-f1a1-4305-9716-907233aec889" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-78baa804-f1a1-4305-9716-907233aec889" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-d5de14c0-5c0e-4703-b5d2-034572d6a3a5" class="xr-var-data-in" type="checkbox"><label for="data-d5de14c0-5c0e-4703-b5d2-034572d6a3a5" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[2.21189505e-02, 5.60389284e-02],
        [1.56066481e-01, 3.94238878e-01],
        [5.34308295e-02, 2.41685767e-01],
        [1.23705624e-01, 6.40849534e-02],
        [5.88892707e-01, 2.47353428e-01],
        [3.01060119e-01, 3.92499623e-01],
        [2.78276250e-01, 9.01742375e-02],
        [2.93439341e-02, 1.43995280e-01],
        [5.07418261e-02, 5.12488970e-02],
        [2.23296601e-01, 5.31491414e-01],
        [3.69758542e-05, 1.37185224e-01],
        [1.40105140e-01, 1.67583232e-01],
        [4.85324670e-02, 4.39445148e-01],
        [1.91375296e-01, 7.88697466e-02],
        [8.22475911e-01, 1.47138191e-01],
        [2.94001128e-01, 2.57529061e-01],
        [2.78943832e-01, 1.38479796e-01],
        [3.37032053e-01, 3.89241270e-01],
        [6.68325189e-01, 1.67313115e-01],
        [9.24399381e-02, 2.12235554e-01],
...
        [1.03131702e-01, 1.76587106e-01],
        [1.61368773e-01, 1.82920866e-02],
        [3.49340369e-01, 1.50886264e-01],
        [4.40477448e-01, 4.98751037e-02],
        [6.64557853e-01, 3.91274931e-02],
        [5.37244776e-02, 3.29724653e-02],
        [2.60618453e-02, 5.03939799e-02],
        [1.56058722e-01, 2.79522202e-02],
        [4.17033301e-01, 5.62968675e-01],
        [2.69190618e-01, 1.08614875e-01],
        [8.07091204e-01, 3.73219840e-01],
        [4.55136342e-02, 1.25207539e-01],
        [1.68692429e-01, 9.49587828e-02],
        [1.38718736e-01, 6.70038252e-01],
        [6.06778765e-01, 1.62568216e-01],
        [1.01883527e-01, 4.02263459e-01],
        [1.32917277e-01, 1.17884024e-01],
        [5.24080725e-01, 3.51936497e-01],
        [2.36227465e-01, 2.30732118e-01],
        [3.24495157e-01, 1.78954847e-01]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>total_media_contribution_original_scale</span></div><div class="xr-var-dims">(chain, draw)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">80.14 893.4 945.9 ... 237.5 904.7</div><input id="attrs-c509a29a-f7a4-4034-8aca-e5313f428632" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c509a29a-f7a4-4034-8aca-e5313f428632" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-e589a6c6-4ad0-4731-a466-575a72830d9d" class="xr-var-data-in" type="checkbox"><label for="data-e589a6c6-4ad0-4731-a466-575a72830d9d" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[  80.14320438,  893.38315184,  945.94484557,  714.43666931,
         548.3531122 ,  900.07106237,  918.56613429,  565.40613268,
         705.62855608,  467.32675593,  418.113468  ,  472.86727135,
         236.99299817,  250.96933855,  952.17035348, 2162.0673998 ,
         282.82698983,   91.65778318,  765.28856197, 2224.90939926,
         313.07846182,  245.98566196,  387.72273799,  169.76660837,
        1054.01190164,  998.27385351,  219.90852385,  176.94407105,
         463.41588372,  387.24721537, 1015.14174669,  757.91681917,
        1076.20435668, 1527.5870887 ,  719.46892377,  451.23367239,
        1213.2747065 ,  420.23517828, 1789.02144105, 1617.36067218,
        1341.96183993,  449.76752281,  372.56959156,  909.98067307,
         685.13667923, 2155.94815051,  318.2372087 ,  186.69433351,
         545.07779318,  494.04094971, 1743.34095322, 1184.75687095,
         184.84620509,  887.86272305,  815.56710638,  270.51691429,
         671.92787952, 1854.31649597,  754.18027239,  268.03847826,
         276.22777708, 3428.85252299,  699.00828373,  874.44241748,
         207.65932248,   53.62831437, 1307.44384114,  365.38212556,
         339.19350733,  256.64795434, 1080.0038332 ,  383.07791696,
         561.27556404,   96.42113103,  230.55975516,  549.36178123,
        1282.67217949, 1069.29297304,  418.03769894,  186.19770331,
...
         976.46569521,  753.20703266,  523.00403953,  895.79825761,
         635.1519282 , 2326.62013207,   73.97616767,  308.88228453,
         383.14251813,  495.26436942,   55.83450201,  381.21073078,
        2677.51651936,  780.58637416, 1066.38342023,  293.39718533,
         535.42240616,  977.0835362 ,  160.08714466, 1457.93650135,
         231.19196825,  188.07879389,  819.22072628,  356.27272375,
         166.61099478,  543.59481799,  574.85260819,  850.2676893 ,
         930.30975739, 1218.77907798,  383.86684302,  663.87369343,
        1081.96307252,  301.05195287,  369.99682215, 1432.9091054 ,
         860.86170763, 1018.22242504,  359.79901956,  660.02818611,
         706.53955755,  362.03862127,  145.94325668,  753.05193766,
         315.17837235, 1008.74699919,  459.09659661, 1405.62563268,
         362.57452288, 2277.54268813,  270.60055669,  897.48143461,
        1403.45160195,  754.74930562,  671.43103157, 1416.05687766,
         676.02543662,  451.82452331,  234.82996519,  264.17838076,
         706.64369562,  626.64754688,  192.11332027, 1904.36026551,
         613.37897575,  196.04304707,  117.01543285, 1921.14493847,
        1271.1939266 ,  388.51852202, 2564.92548701,  386.2951282 ,
         302.23710342,   49.01701767,  505.47436889, 1436.08750085,
        1054.85788102,  287.20820671,  237.48538375,  904.67942388]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>yearly_seasonality_contribution</span></div><div class="xr-var-dims">(chain, draw, date)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.5004 0.3596 ... 0.477 0.4286</div><input id="attrs-1d4707ba-71b6-4494-a0d8-ca1ca87fefdf" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-1d4707ba-71b6-4494-a0d8-ca1ca87fefdf" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-3f77b478-4d2f-497a-a130-d7ff941aa0af" class="xr-var-data-in" type="checkbox"><label for="data-3f77b478-4d2f-497a-a130-d7ff941aa0af" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[ 0.50040678,  0.3596099 ,  0.21751975, ..., -0.29980801,
         -0.31155098, -0.33395578],
        [ 0.21132087,  0.24330808,  0.25976476, ...,  0.18446826,
          0.23410279,  0.2794199 ],
        [-0.08483533, -0.11196012, -0.13786027, ...,  0.29738108,
          0.30913711,  0.30959314],
        ...,
        [ 0.02331827, -0.00811155, -0.04636724, ...,  0.2534193 ,
          0.30979788,  0.35468456],
        [-0.13484859, -0.10537313, -0.07068233, ...,  0.143769  ,
          0.10929389,  0.07488424],
        [-0.05158832, -0.14703546, -0.23423545, ...,  0.50016365,
          0.47697344,  0.42859855]]], shape=(1, 500, 179))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-6d636df0-f0da-4aaf-86ff-f93d7a37dcd3" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-6d636df0-f0da-4aaf-86ff-f93d7a37dcd3" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(5)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2026-02-25T20:15:19.147585+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.23.1</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.27.1</dd><dt><span>pymc_marketing_version :</span></dt><dd>0.17.1</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_prior_predictive1bcb41b3-3c7d-40e9-856f-8d3782434ce9" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_prior_predictive1bcb41b3-3c7d-40e9-856f-8d3782434ce9" class="xr-section-summary">prior_predictive</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in notebooks */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
  line-height: 1.6;
  padding-bottom: 4px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
}

.xr-header {
  border-bottom: solid 1px var(--xr-border-color);
  margin-bottom: 4px;
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-obj-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type,
.xr-group-box-contents > label {
  color: var(--xr-font-color2);
  display: block;
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
  margin-block-start: 0;
  margin-block-end: 0;
}

.xr-section-item {
  display: contents;
}

.xr-section-item > input,
.xr-group-box-contents > input,
.xr-array-wrap > input {
  display: block;
  opacity: 0;
  height: 0;
  margin: 0;
}

.xr-section-item > input + label,
.xr-var-item > input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item > input:enabled + label,
.xr-var-item > input:enabled + label,
.xr-array-wrap > input:enabled + label,
.xr-group-box-contents > input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item > input:focus-visible + label,
.xr-var-item > input:focus-visible + label,
.xr-array-wrap > input:focus-visible + label,
.xr-group-box-contents > input:focus-visible + label {
  outline: auto;
}

.xr-section-item > input:enabled + label:hover,
.xr-var-item > input:enabled + label:hover,
.xr-array-wrap > input:enabled + label:hover,
.xr-group-box-contents > input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
  white-space: nowrap;
}

.xr-section-summary > em {
  font-weight: normal;
}

.xr-span-grid {
  grid-column-end: -1;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.3em;
}

.xr-group-box-contents > input:checked + label > span {
  display: inline-block;
  padding-left: 0.6em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details,
.xr-group-box-contents > label {
  padding-top: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  grid-column: 1 / -1;
  margin-top: 4px;
  margin-bottom: 5px;
}

.xr-section-summary-in ~ .xr-section-details {
  display: none;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-children {
  display: inline-grid;
  grid-template-columns: 100%;
  grid-column: 1 / -1;
  padding-top: 4px;
}

.xr-group-box {
  display: inline-grid;
  grid-template-columns: 0px 30px auto;
}

.xr-group-box-vline {
  grid-column-start: 1;
  border-right: 0.2em solid;
  border-color: var(--xr-border-color);
  width: 0px;
}

.xr-group-box-hline {
  grid-column-start: 2;
  grid-row-start: 1;
  height: 1em;
  width: 26px;
  border-bottom: 0.2em solid;
  border-color: var(--xr-border-color);
}

.xr-group-box-contents {
  grid-column-start: 3;
  padding-bottom: 4px;
}

.xr-group-box-contents > label::before {
  content: "📂";
  padding-right: 0.3em;
}

.xr-group-box-contents > input:checked + label::before {
  content: "📁";
}

.xr-group-box-contents > input:checked + label {
  padding-bottom: 0px;
}

.xr-group-box-contents > input:checked ~ .xr-sections {
  display: none;
}

.xr-group-box-contents > input + label > span {
  display: none;
}

.xr-group-box-ellipsis {
  font-size: 1.4em;
  font-weight: 900;
  color: var(--xr-font-color2);
  letter-spacing: 0.15em;
  cursor: default;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 721kB
Dimensions:  (chain: 1, draw: 500, date: 179)
Coordinates:
  * chain    (chain) int64 8B 0
  * draw     (draw) int64 4kB 0 1 2 3 4 5 6 7 ... 493 494 495 496 497 498 499
  * date     (date) datetime64[ms] 1kB 2018-04-02 2018-04-09 ... 2021-08-30
Data variables:
    y        (chain, draw, date) float64 716kB 7.649 3.945 ... -9.303 -17.05
Attributes:
    created_at:                 2026-02-25T20:15:19.150492+00:00
    arviz_version:              0.23.1
    inference_library:          pymc
    inference_library_version:  5.27.1
    pymc_marketing_version:     0.17.1</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-ddbf9a62-6fde-4bd1-8aa4-add1bf624808" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-ddbf9a62-6fde-4bd1-8aa4-add1bf624808" class="xr-section-summary">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">chain</span>: 1</li><li><span class="xr-has-index">draw</span>: 500</li><li><span class="xr-has-index">date</span>: 179</li></ul></div></li><li class="xr-section-item"><input id="section-468b8df6-1b37-492b-a5dc-c092cb798b7c" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-468b8df6-1b37-492b-a5dc-c092cb798b7c" class="xr-section-summary" title="Expand/collapse section">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(chain)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0</div><input id="attrs-9e5683bb-d9fd-442e-87bb-24f606f32d97" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-9e5683bb-d9fd-442e-87bb-24f606f32d97" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-40e4792e-6421-46dd-9049-70759400523e" class="xr-var-data-in" type="checkbox"><label for="data-40e4792e-6421-46dd-9049-70759400523e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(draw)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 495 496 497 498 499</div><input id="attrs-6168ff57-988b-4b24-8831-f19a4ef15f2b" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-6168ff57-988b-4b24-8831-f19a4ef15f2b" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-715698f4-62fc-4c88-9c73-4caea10266f6" class="xr-var-data-in" type="checkbox"><label for="data-715698f4-62fc-4c88-9c73-4caea10266f6" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2, ..., 497, 498, 499], shape=(500,))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">date</span></div><div class="xr-var-dims">(date)</div><div class="xr-var-dtype">datetime64[ms]</div><div class="xr-var-preview xr-preview">2018-04-02 ... 2021-08-30</div><input id="attrs-771f284f-8901-4d68-9709-a3a177b0f055" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-771f284f-8901-4d68-9709-a3a177b0f055" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-1ffb4ef1-0cad-44e6-9df2-4669c5141b28" class="xr-var-data-in" type="checkbox"><label for="data-1ffb4ef1-0cad-44e6-9df2-4669c5141b28" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['2018-04-02T00:00:00.000', '2018-04-09T00:00:00.000',
       '2018-04-16T00:00:00.000', '2018-04-23T00:00:00.000',
       '2018-04-30T00:00:00.000', '2018-05-07T00:00:00.000',
       '2018-05-14T00:00:00.000', '2018-05-21T00:00:00.000',
       '2018-05-28T00:00:00.000', '2018-06-04T00:00:00.000',
       '2018-06-11T00:00:00.000', '2018-06-18T00:00:00.000',
       '2018-06-25T00:00:00.000', '2018-07-02T00:00:00.000',
       '2018-07-09T00:00:00.000', '2018-07-16T00:00:00.000',
       '2018-07-23T00:00:00.000', '2018-07-30T00:00:00.000',
       '2018-08-06T00:00:00.000', '2018-08-13T00:00:00.000',
       '2018-08-20T00:00:00.000', '2018-08-27T00:00:00.000',
       '2018-09-03T00:00:00.000', '2018-09-10T00:00:00.000',
       '2018-09-17T00:00:00.000', '2018-09-24T00:00:00.000',
       '2018-10-01T00:00:00.000', '2018-10-08T00:00:00.000',
       '2018-10-15T00:00:00.000', '2018-10-22T00:00:00.000',
       '2018-10-29T00:00:00.000', '2018-11-05T00:00:00.000',
       '2018-11-12T00:00:00.000', '2018-11-19T00:00:00.000',
       '2018-11-26T00:00:00.000', '2018-12-03T00:00:00.000',
       '2018-12-10T00:00:00.000', '2018-12-17T00:00:00.000',
       '2018-12-24T00:00:00.000', '2018-12-31T00:00:00.000',
       '2019-01-07T00:00:00.000', '2019-01-14T00:00:00.000',
       '2019-01-21T00:00:00.000', '2019-01-28T00:00:00.000',
       '2019-02-04T00:00:00.000', '2019-02-11T00:00:00.000',
       '2019-02-18T00:00:00.000', '2019-02-25T00:00:00.000',
       '2019-03-04T00:00:00.000', '2019-03-11T00:00:00.000',
       '2019-03-18T00:00:00.000', '2019-03-25T00:00:00.000',
       '2019-04-01T00:00:00.000', '2019-04-08T00:00:00.000',
       '2019-04-15T00:00:00.000', '2019-04-22T00:00:00.000',
       '2019-04-29T00:00:00.000', '2019-05-06T00:00:00.000',
       '2019-05-13T00:00:00.000', '2019-05-20T00:00:00.000',
       '2019-05-27T00:00:00.000', '2019-06-03T00:00:00.000',
       '2019-06-10T00:00:00.000', '2019-06-17T00:00:00.000',
       '2019-06-24T00:00:00.000', '2019-07-01T00:00:00.000',
       '2019-07-08T00:00:00.000', '2019-07-15T00:00:00.000',
       '2019-07-22T00:00:00.000', '2019-07-29T00:00:00.000',
       '2019-08-05T00:00:00.000', '2019-08-12T00:00:00.000',
       '2019-08-19T00:00:00.000', '2019-08-26T00:00:00.000',
       '2019-09-02T00:00:00.000', '2019-09-09T00:00:00.000',
       '2019-09-16T00:00:00.000', '2019-09-23T00:00:00.000',
       '2019-09-30T00:00:00.000', '2019-10-07T00:00:00.000',
       '2019-10-14T00:00:00.000', '2019-10-21T00:00:00.000',
       '2019-10-28T00:00:00.000', '2019-11-04T00:00:00.000',
       '2019-11-11T00:00:00.000', '2019-11-18T00:00:00.000',
       '2019-11-25T00:00:00.000', '2019-12-02T00:00:00.000',
       '2019-12-09T00:00:00.000', '2019-12-16T00:00:00.000',
       '2019-12-23T00:00:00.000', '2019-12-30T00:00:00.000',
       '2020-01-06T00:00:00.000', '2020-01-13T00:00:00.000',
       '2020-01-20T00:00:00.000', '2020-01-27T00:00:00.000',
       '2020-02-03T00:00:00.000', '2020-02-10T00:00:00.000',
       '2020-02-17T00:00:00.000', '2020-02-24T00:00:00.000',
       '2020-03-02T00:00:00.000', '2020-03-09T00:00:00.000',
       '2020-03-16T00:00:00.000', '2020-03-23T00:00:00.000',
       '2020-03-30T00:00:00.000', '2020-04-06T00:00:00.000',
       '2020-04-13T00:00:00.000', '2020-04-20T00:00:00.000',
       '2020-04-27T00:00:00.000', '2020-05-04T00:00:00.000',
       '2020-05-11T00:00:00.000', '2020-05-18T00:00:00.000',
       '2020-05-25T00:00:00.000', '2020-06-01T00:00:00.000',
       '2020-06-08T00:00:00.000', '2020-06-15T00:00:00.000',
       '2020-06-22T00:00:00.000', '2020-06-29T00:00:00.000',
       '2020-07-06T00:00:00.000', '2020-07-13T00:00:00.000',
       '2020-07-20T00:00:00.000', '2020-07-27T00:00:00.000',
       '2020-08-03T00:00:00.000', '2020-08-10T00:00:00.000',
       '2020-08-17T00:00:00.000', '2020-08-24T00:00:00.000',
       '2020-08-31T00:00:00.000', '2020-09-07T00:00:00.000',
       '2020-09-14T00:00:00.000', '2020-09-21T00:00:00.000',
       '2020-09-28T00:00:00.000', '2020-10-05T00:00:00.000',
       '2020-10-12T00:00:00.000', '2020-10-19T00:00:00.000',
       '2020-10-26T00:00:00.000', '2020-11-02T00:00:00.000',
       '2020-11-09T00:00:00.000', '2020-11-16T00:00:00.000',
       '2020-11-23T00:00:00.000', '2020-11-30T00:00:00.000',
       '2020-12-07T00:00:00.000', '2020-12-14T00:00:00.000',
       '2020-12-21T00:00:00.000', '2020-12-28T00:00:00.000',
       '2021-01-04T00:00:00.000', '2021-01-11T00:00:00.000',
       '2021-01-18T00:00:00.000', '2021-01-25T00:00:00.000',
       '2021-02-01T00:00:00.000', '2021-02-08T00:00:00.000',
       '2021-02-15T00:00:00.000', '2021-02-22T00:00:00.000',
       '2021-03-01T00:00:00.000', '2021-03-08T00:00:00.000',
       '2021-03-15T00:00:00.000', '2021-03-22T00:00:00.000',
       '2021-03-29T00:00:00.000', '2021-04-05T00:00:00.000',
       '2021-04-12T00:00:00.000', '2021-04-19T00:00:00.000',
       '2021-04-26T00:00:00.000', '2021-05-03T00:00:00.000',
       '2021-05-10T00:00:00.000', '2021-05-17T00:00:00.000',
       '2021-05-24T00:00:00.000', '2021-05-31T00:00:00.000',
       '2021-06-07T00:00:00.000', '2021-06-14T00:00:00.000',
       '2021-06-21T00:00:00.000', '2021-06-28T00:00:00.000',
       '2021-07-05T00:00:00.000', '2021-07-12T00:00:00.000',
       '2021-07-19T00:00:00.000', '2021-07-26T00:00:00.000',
       '2021-08-02T00:00:00.000', '2021-08-09T00:00:00.000',
       '2021-08-16T00:00:00.000', '2021-08-23T00:00:00.000',
       '2021-08-30T00:00:00.000'], dtype='datetime64[ms]')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-a66f7249-b93e-46f6-8dca-48330a623b72" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-a66f7249-b93e-46f6-8dca-48330a623b72" class="xr-section-summary" title="Expand/collapse section">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>y</span></div><div class="xr-var-dims">(chain, draw, date)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">7.649 3.945 5.739 ... -9.303 -17.05</div><input id="attrs-b5ba8ee5-fefe-4eb5-8b1c-f790e7a540bc" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-b5ba8ee5-fefe-4eb5-8b1c-f790e7a540bc" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-946c92d8-41d7-4ea5-9044-41577f8b0163" class="xr-var-data-in" type="checkbox"><label for="data-946c92d8-41d7-4ea5-9044-41577f8b0163" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[  7.64891166,   3.94464148,   5.73933038, ...,   3.31729401,
          -0.20715842,   6.68064011],
        [  5.48645554,   1.10738704,   4.1996441 , ...,   7.19348105,
          -8.76361122,   9.62203344],
        [  1.14029433,   5.35765002,  -3.67854038, ...,   2.53362874,
           8.3238964 ,  -3.08881001],
        ...,
        [  1.92505337,  -1.09522496,   1.56134533, ...,  -3.95104168,
           2.58361272,  -1.19043849],
        [ 12.11157865,   3.1870783 ,   7.04901559, ...,   1.37077073,
           2.21659638,  -3.34397234],
        [  1.90617036,  -0.63802082,   7.84631322, ...,   9.82700581,
          -9.30254537, -17.05498052]]], shape=(1, 500, 179))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-e409b5a9-ac8d-459c-b200-479cc11cd0c1" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-e409b5a9-ac8d-459c-b200-479cc11cd0c1" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(5)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2026-02-25T20:15:19.150492+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.23.1</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.27.1</dd><dt><span>pymc_marketing_version :</span></dt><dd>0.17.1</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_observed_data89dee1e2-1f3a-4266-b30f-5f178b5d4d12" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_observed_data89dee1e2-1f3a-4266-b30f-5f178b5d4d12" class="xr-section-summary">observed_data</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in notebooks */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
  line-height: 1.6;
  padding-bottom: 4px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
}

.xr-header {
  border-bottom: solid 1px var(--xr-border-color);
  margin-bottom: 4px;
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-obj-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type,
.xr-group-box-contents > label {
  color: var(--xr-font-color2);
  display: block;
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
  margin-block-start: 0;
  margin-block-end: 0;
}

.xr-section-item {
  display: contents;
}

.xr-section-item > input,
.xr-group-box-contents > input,
.xr-array-wrap > input {
  display: block;
  opacity: 0;
  height: 0;
  margin: 0;
}

.xr-section-item > input + label,
.xr-var-item > input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item > input:enabled + label,
.xr-var-item > input:enabled + label,
.xr-array-wrap > input:enabled + label,
.xr-group-box-contents > input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item > input:focus-visible + label,
.xr-var-item > input:focus-visible + label,
.xr-array-wrap > input:focus-visible + label,
.xr-group-box-contents > input:focus-visible + label {
  outline: auto;
}

.xr-section-item > input:enabled + label:hover,
.xr-var-item > input:enabled + label:hover,
.xr-array-wrap > input:enabled + label:hover,
.xr-group-box-contents > input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
  white-space: nowrap;
}

.xr-section-summary > em {
  font-weight: normal;
}

.xr-span-grid {
  grid-column-end: -1;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.3em;
}

.xr-group-box-contents > input:checked + label > span {
  display: inline-block;
  padding-left: 0.6em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details,
.xr-group-box-contents > label {
  padding-top: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  grid-column: 1 / -1;
  margin-top: 4px;
  margin-bottom: 5px;
}

.xr-section-summary-in ~ .xr-section-details {
  display: none;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-children {
  display: inline-grid;
  grid-template-columns: 100%;
  grid-column: 1 / -1;
  padding-top: 4px;
}

.xr-group-box {
  display: inline-grid;
  grid-template-columns: 0px 30px auto;
}

.xr-group-box-vline {
  grid-column-start: 1;
  border-right: 0.2em solid;
  border-color: var(--xr-border-color);
  width: 0px;
}

.xr-group-box-hline {
  grid-column-start: 2;
  grid-row-start: 1;
  height: 1em;
  width: 26px;
  border-bottom: 0.2em solid;
  border-color: var(--xr-border-color);
}

.xr-group-box-contents {
  grid-column-start: 3;
  padding-bottom: 4px;
}

.xr-group-box-contents > label::before {
  content: "📂";
  padding-right: 0.3em;
}

.xr-group-box-contents > input:checked + label::before {
  content: "📁";
}

.xr-group-box-contents > input:checked + label {
  padding-bottom: 0px;
}

.xr-group-box-contents > input:checked ~ .xr-sections {
  display: none;
}

.xr-group-box-contents > input + label > span {
  display: none;
}

.xr-group-box-ellipsis {
  font-size: 1.4em;
  font-weight: 900;
  color: var(--xr-font-color2);
  letter-spacing: 0.15em;
  cursor: default;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 3kB
Dimensions:  (date: 179)
Coordinates:
  * date     (date) datetime64[ms] 1kB 2018-04-02 2018-04-09 ... 2021-08-30
Data variables:
    y        (date) float64 1kB 0.4277 0.4094 0.5368 ... 0.5763 0.551 0.6142
Attributes:
    created_at:                 2026-02-25T20:16:05.079757+00:00
    arviz_version:              0.23.1
    inference_library:          numpyro
    inference_library_version:  0.20.0
    sampling_time:              41.909262
    tuning_steps:               1000</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-cf5d2ff6-36d1-4a10-9ad1-e1393fcecc7c" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-cf5d2ff6-36d1-4a10-9ad1-e1393fcecc7c" class="xr-section-summary">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">date</span>: 179</li></ul></div></li><li class="xr-section-item"><input id="section-b90b22c1-6315-4627-bf40-d15ee230e421" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-b90b22c1-6315-4627-bf40-d15ee230e421" class="xr-section-summary" title="Expand/collapse section">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">date</span></div><div class="xr-var-dims">(date)</div><div class="xr-var-dtype">datetime64[ms]</div><div class="xr-var-preview xr-preview">2018-04-02 ... 2021-08-30</div><input id="attrs-1e546c1c-2472-4eb4-85dc-b5ca7acf6c37" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-1e546c1c-2472-4eb4-85dc-b5ca7acf6c37" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-c489f255-1bc1-4a31-8b0b-c9d38e5f7194" class="xr-var-data-in" type="checkbox"><label for="data-c489f255-1bc1-4a31-8b0b-c9d38e5f7194" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['2018-04-02T00:00:00.000', '2018-04-09T00:00:00.000',
       '2018-04-16T00:00:00.000', '2018-04-23T00:00:00.000',
       '2018-04-30T00:00:00.000', '2018-05-07T00:00:00.000',
       '2018-05-14T00:00:00.000', '2018-05-21T00:00:00.000',
       '2018-05-28T00:00:00.000', '2018-06-04T00:00:00.000',
       '2018-06-11T00:00:00.000', '2018-06-18T00:00:00.000',
       '2018-06-25T00:00:00.000', '2018-07-02T00:00:00.000',
       '2018-07-09T00:00:00.000', '2018-07-16T00:00:00.000',
       '2018-07-23T00:00:00.000', '2018-07-30T00:00:00.000',
       '2018-08-06T00:00:00.000', '2018-08-13T00:00:00.000',
       '2018-08-20T00:00:00.000', '2018-08-27T00:00:00.000',
       '2018-09-03T00:00:00.000', '2018-09-10T00:00:00.000',
       '2018-09-17T00:00:00.000', '2018-09-24T00:00:00.000',
       '2018-10-01T00:00:00.000', '2018-10-08T00:00:00.000',
       '2018-10-15T00:00:00.000', '2018-10-22T00:00:00.000',
       '2018-10-29T00:00:00.000', '2018-11-05T00:00:00.000',
       '2018-11-12T00:00:00.000', '2018-11-19T00:00:00.000',
       '2018-11-26T00:00:00.000', '2018-12-03T00:00:00.000',
       '2018-12-10T00:00:00.000', '2018-12-17T00:00:00.000',
       '2018-12-24T00:00:00.000', '2018-12-31T00:00:00.000',
       '2019-01-07T00:00:00.000', '2019-01-14T00:00:00.000',
       '2019-01-21T00:00:00.000', '2019-01-28T00:00:00.000',
       '2019-02-04T00:00:00.000', '2019-02-11T00:00:00.000',
       '2019-02-18T00:00:00.000', '2019-02-25T00:00:00.000',
       '2019-03-04T00:00:00.000', '2019-03-11T00:00:00.000',
       '2019-03-18T00:00:00.000', '2019-03-25T00:00:00.000',
       '2019-04-01T00:00:00.000', '2019-04-08T00:00:00.000',
       '2019-04-15T00:00:00.000', '2019-04-22T00:00:00.000',
       '2019-04-29T00:00:00.000', '2019-05-06T00:00:00.000',
       '2019-05-13T00:00:00.000', '2019-05-20T00:00:00.000',
       '2019-05-27T00:00:00.000', '2019-06-03T00:00:00.000',
       '2019-06-10T00:00:00.000', '2019-06-17T00:00:00.000',
       '2019-06-24T00:00:00.000', '2019-07-01T00:00:00.000',
       '2019-07-08T00:00:00.000', '2019-07-15T00:00:00.000',
       '2019-07-22T00:00:00.000', '2019-07-29T00:00:00.000',
       '2019-08-05T00:00:00.000', '2019-08-12T00:00:00.000',
       '2019-08-19T00:00:00.000', '2019-08-26T00:00:00.000',
       '2019-09-02T00:00:00.000', '2019-09-09T00:00:00.000',
       '2019-09-16T00:00:00.000', '2019-09-23T00:00:00.000',
       '2019-09-30T00:00:00.000', '2019-10-07T00:00:00.000',
       '2019-10-14T00:00:00.000', '2019-10-21T00:00:00.000',
       '2019-10-28T00:00:00.000', '2019-11-04T00:00:00.000',
       '2019-11-11T00:00:00.000', '2019-11-18T00:00:00.000',
       '2019-11-25T00:00:00.000', '2019-12-02T00:00:00.000',
       '2019-12-09T00:00:00.000', '2019-12-16T00:00:00.000',
       '2019-12-23T00:00:00.000', '2019-12-30T00:00:00.000',
       '2020-01-06T00:00:00.000', '2020-01-13T00:00:00.000',
       '2020-01-20T00:00:00.000', '2020-01-27T00:00:00.000',
       '2020-02-03T00:00:00.000', '2020-02-10T00:00:00.000',
       '2020-02-17T00:00:00.000', '2020-02-24T00:00:00.000',
       '2020-03-02T00:00:00.000', '2020-03-09T00:00:00.000',
       '2020-03-16T00:00:00.000', '2020-03-23T00:00:00.000',
       '2020-03-30T00:00:00.000', '2020-04-06T00:00:00.000',
       '2020-04-13T00:00:00.000', '2020-04-20T00:00:00.000',
       '2020-04-27T00:00:00.000', '2020-05-04T00:00:00.000',
       '2020-05-11T00:00:00.000', '2020-05-18T00:00:00.000',
       '2020-05-25T00:00:00.000', '2020-06-01T00:00:00.000',
       '2020-06-08T00:00:00.000', '2020-06-15T00:00:00.000',
       '2020-06-22T00:00:00.000', '2020-06-29T00:00:00.000',
       '2020-07-06T00:00:00.000', '2020-07-13T00:00:00.000',
       '2020-07-20T00:00:00.000', '2020-07-27T00:00:00.000',
       '2020-08-03T00:00:00.000', '2020-08-10T00:00:00.000',
       '2020-08-17T00:00:00.000', '2020-08-24T00:00:00.000',
       '2020-08-31T00:00:00.000', '2020-09-07T00:00:00.000',
       '2020-09-14T00:00:00.000', '2020-09-21T00:00:00.000',
       '2020-09-28T00:00:00.000', '2020-10-05T00:00:00.000',
       '2020-10-12T00:00:00.000', '2020-10-19T00:00:00.000',
       '2020-10-26T00:00:00.000', '2020-11-02T00:00:00.000',
       '2020-11-09T00:00:00.000', '2020-11-16T00:00:00.000',
       '2020-11-23T00:00:00.000', '2020-11-30T00:00:00.000',
       '2020-12-07T00:00:00.000', '2020-12-14T00:00:00.000',
       '2020-12-21T00:00:00.000', '2020-12-28T00:00:00.000',
       '2021-01-04T00:00:00.000', '2021-01-11T00:00:00.000',
       '2021-01-18T00:00:00.000', '2021-01-25T00:00:00.000',
       '2021-02-01T00:00:00.000', '2021-02-08T00:00:00.000',
       '2021-02-15T00:00:00.000', '2021-02-22T00:00:00.000',
       '2021-03-01T00:00:00.000', '2021-03-08T00:00:00.000',
       '2021-03-15T00:00:00.000', '2021-03-22T00:00:00.000',
       '2021-03-29T00:00:00.000', '2021-04-05T00:00:00.000',
       '2021-04-12T00:00:00.000', '2021-04-19T00:00:00.000',
       '2021-04-26T00:00:00.000', '2021-05-03T00:00:00.000',
       '2021-05-10T00:00:00.000', '2021-05-17T00:00:00.000',
       '2021-05-24T00:00:00.000', '2021-05-31T00:00:00.000',
       '2021-06-07T00:00:00.000', '2021-06-14T00:00:00.000',
       '2021-06-21T00:00:00.000', '2021-06-28T00:00:00.000',
       '2021-07-05T00:00:00.000', '2021-07-12T00:00:00.000',
       '2021-07-19T00:00:00.000', '2021-07-26T00:00:00.000',
       '2021-08-02T00:00:00.000', '2021-08-09T00:00:00.000',
       '2021-08-16T00:00:00.000', '2021-08-23T00:00:00.000',
       '2021-08-30T00:00:00.000'], dtype='datetime64[ms]')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-6971d15b-c921-48ad-a45a-484350159dd5" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-6971d15b-c921-48ad-a45a-484350159dd5" class="xr-section-summary" title="Expand/collapse section">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>y</span></div><div class="xr-var-dims">(date)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.4277 0.4094 ... 0.551 0.6142</div><input id="attrs-4089302f-b526-4bee-b828-472b4d8f2756" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-4089302f-b526-4bee-b828-472b4d8f2756" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-aad3c78c-a83d-4069-9186-4aec682d3a31" class="xr-var-data-in" type="checkbox"><label for="data-aad3c78c-a83d-4069-9186-4aec682d3a31" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0.42774584, 0.40944257, 0.53677814, 0.53950314, 0.52733118,
       0.45668516, 0.46134912, 0.47698624, 0.40026434, 0.5551734 ,
       0.5788713 , 0.60988341, 0.54195446, 0.63159843, 0.5308901 ,
       0.41152621, 0.42478175, 0.55122536, 0.46693328, 0.47276132,
       0.39513901, 0.62356105, 0.49007504, 0.48211365, 0.58849293,
       0.50241778, 0.53756248, 0.76113205, 0.65226667, 0.52336223,
       0.55154362, 0.58168259, 0.64958224, 0.59880763, 0.75415297,
       0.85772213, 0.68396542, 0.48622145, 0.77847327, 0.68762202,
       0.55991692, 0.44829669, 0.55453598, 0.58262159, 0.53379501,
       0.67619207, 0.58336635, 0.83329105, 0.69070295, 0.53281947,
       0.60385937, 0.71914422, 0.50058491, 0.61642925, 0.67598015,
       0.64729543, 0.45544945, 0.44316441, 0.88886838, 0.57139337,
       0.48890292, 0.65381141, 0.57690104, 0.4278768 , 0.38575198,
       0.39725999, 0.35694535, 0.61232981, 0.50654857, 0.49680361,
       0.68204684, 0.50757745, 0.38665932, 0.39004028, 0.44895684,
       0.52075781, 0.50797883, 0.54814027, 0.42573481, 0.49960935,
       0.57454086, 0.58243003, 0.72140609, 0.65499785, 0.63448509,
       0.69802312, 0.58729857, 0.6375589 , 0.55058806, 1.        ,
       0.72777637, 0.75979254, 0.6239321 , 0.54993294, 0.60023863,
       0.50837346, 0.54525082, 0.92017333, 0.63605253, 0.59038205,
       0.70047137, 0.47509912, 0.56882015, 0.70374668, 0.75209834,
       0.59853301, 0.625571  , 0.83245943, 0.74909413, 0.6028062 ,
       0.76504574, 0.55050966, 0.70826589, 0.69002053, 0.57163721,
       0.5016389 , 0.66672666, 0.61571513, 0.54830009, 0.47958053,
       0.50874136, 0.579586  , 0.3566706 , 0.33470858, 0.57281485,
       0.49862294, 0.43857033, 0.59219152, 0.8006913 , 0.68067377,
       0.61551227, 0.58007991, 0.68388726, 0.67231263, 0.70343423,
       0.57050819, 0.63602537, 0.70285602, 0.67490556, 0.74301237,
       0.80165994, 0.75055485, 0.60756013, 0.65137728, 0.77359768,
       0.56840678, 0.60895462, 0.70165356, 0.55003776, 0.51871366,
       0.70196644, 0.78330989, 0.71514334, 0.49503513, 0.81785758,
       0.64439008, 0.81341884, 0.60667677, 0.54565019, 0.51195512,
       0.50244265, 0.53877667, 0.68654763, 0.62728464, 0.9333637 ,
       0.74697208, 0.68876026, 0.7152728 , 0.60322357, 0.48458922,
       0.52076151, 0.51011507, 0.81193774, 0.73428376, 0.57559959,
       0.62794343, 0.57631061, 0.55097696, 0.61424735])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-73e217a6-c6a9-4c33-aa80-3b651324ee7f" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-73e217a6-c6a9-4c33-aa80-3b651324ee7f" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(6)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2026-02-25T20:16:05.079757+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.23.1</dd><dt><span>inference_library :</span></dt><dd>numpyro</dd><dt><span>inference_library_version :</span></dt><dd>0.20.0</dd><dt><span>sampling_time :</span></dt><dd>41.909262</dd><dt><span>tuning_steps :</span></dt><dd>1000</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_constant_datac1fddc3e-31a3-4dee-86c6-ff591d615235" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_constant_datac1fddc3e-31a3-4dee-86c6-ff591d615235" class="xr-section-summary">constant_data</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in notebooks */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
  line-height: 1.6;
  padding-bottom: 4px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
}

.xr-header {
  border-bottom: solid 1px var(--xr-border-color);
  margin-bottom: 4px;
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-obj-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type,
.xr-group-box-contents > label {
  color: var(--xr-font-color2);
  display: block;
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
  margin-block-start: 0;
  margin-block-end: 0;
}

.xr-section-item {
  display: contents;
}

.xr-section-item > input,
.xr-group-box-contents > input,
.xr-array-wrap > input {
  display: block;
  opacity: 0;
  height: 0;
  margin: 0;
}

.xr-section-item > input + label,
.xr-var-item > input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item > input:enabled + label,
.xr-var-item > input:enabled + label,
.xr-array-wrap > input:enabled + label,
.xr-group-box-contents > input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item > input:focus-visible + label,
.xr-var-item > input:focus-visible + label,
.xr-array-wrap > input:focus-visible + label,
.xr-group-box-contents > input:focus-visible + label {
  outline: auto;
}

.xr-section-item > input:enabled + label:hover,
.xr-var-item > input:enabled + label:hover,
.xr-array-wrap > input:enabled + label:hover,
.xr-group-box-contents > input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
  white-space: nowrap;
}

.xr-section-summary > em {
  font-weight: normal;
}

.xr-span-grid {
  grid-column-end: -1;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.3em;
}

.xr-group-box-contents > input:checked + label > span {
  display: inline-block;
  padding-left: 0.6em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details,
.xr-group-box-contents > label {
  padding-top: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  grid-column: 1 / -1;
  margin-top: 4px;
  margin-bottom: 5px;
}

.xr-section-summary-in ~ .xr-section-details {
  display: none;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-children {
  display: inline-grid;
  grid-template-columns: 100%;
  grid-column: 1 / -1;
  padding-top: 4px;
}

.xr-group-box {
  display: inline-grid;
  grid-template-columns: 0px 30px auto;
}

.xr-group-box-vline {
  grid-column-start: 1;
  border-right: 0.2em solid;
  border-color: var(--xr-border-color);
  width: 0px;
}

.xr-group-box-hline {
  grid-column-start: 2;
  grid-row-start: 1;
  height: 1em;
  width: 26px;
  border-bottom: 0.2em solid;
  border-color: var(--xr-border-color);
}

.xr-group-box-contents {
  grid-column-start: 3;
  padding-bottom: 4px;
}

.xr-group-box-contents > label::before {
  content: "📂";
  padding-right: 0.3em;
}

.xr-group-box-contents > input:checked + label::before {
  content: "📁";
}

.xr-group-box-contents > input:checked + label {
  padding-bottom: 0px;
}

.xr-group-box-contents > input:checked ~ .xr-sections {
  display: none;
}

.xr-group-box-contents > input + label > span {
  display: none;
}

.xr-group-box-ellipsis {
  font-size: 1.4em;
  font-weight: 900;
  color: var(--xr-font-color2);
  letter-spacing: 0.15em;
  cursor: default;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 11kB
Dimensions:             (channel: 2, target_scale_dim_0: 1, date: 179,
                         control: 3)
Coordinates:
  * channel             (channel) &lt;U2 16B 'x1' 'x2'
  * target_scale_dim_0  (target_scale_dim_0) int64 8B 0
  * date                (date) datetime64[ms] 1kB 2018-04-02 ... 2021-08-30
  * control             (control) &lt;U7 84B 'event_1' 'event_2' 't'
Data variables:
    channel_scale       (channel) float64 16B 0.9979 0.964
    target_scale        (target_scale_dim_0) float64 8B 8.914
    channel_data        (date, channel) float64 3kB 0.338 0.0 ... 0.3955 0.0
    target_data         (date) float64 1kB 3.813 3.65 4.785 ... 4.911 5.475
    control_data        (date, control) float64 4kB 0.0 0.0 0.0 ... 0.0 178.0
    dayofyear           (date) int32 716B 92 99 106 113 120 ... 221 228 235 242
Attributes:
    created_at:                 2026-02-25T20:16:05.081063+00:00
    arviz_version:              0.23.1
    inference_library:          numpyro
    inference_library_version:  0.20.0
    sampling_time:              41.909262
    tuning_steps:               1000</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-f8b1a6ce-e254-45d0-8cd8-231c5f912bbb" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-f8b1a6ce-e254-45d0-8cd8-231c5f912bbb" class="xr-section-summary">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">channel</span>: 2</li><li><span class="xr-has-index">target_scale_dim_0</span>: 1</li><li><span class="xr-has-index">date</span>: 179</li><li><span class="xr-has-index">control</span>: 3</li></ul></div></li><li class="xr-section-item"><input id="section-60dccff2-e924-4f01-b289-b520d5b1548a" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-60dccff2-e924-4f01-b289-b520d5b1548a" class="xr-section-summary" title="Expand/collapse section">Coordinates: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">channel</span></div><div class="xr-var-dims">(channel)</div><div class="xr-var-dtype">&lt;U2</div><div class="xr-var-preview xr-preview">'x1' 'x2'</div><input id="attrs-ae7bd751-18e5-41b9-adfd-76147cfe609b" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-ae7bd751-18e5-41b9-adfd-76147cfe609b" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-15d18ccd-fc7d-44b4-b698-23af22ba6b49" class="xr-var-data-in" type="checkbox"><label for="data-15d18ccd-fc7d-44b4-b698-23af22ba6b49" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['x1', 'x2'], dtype='&lt;U2')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">target_scale_dim_0</span></div><div class="xr-var-dims">(target_scale_dim_0)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0</div><input id="attrs-e5ffa57e-1f76-47a4-86c2-a6ca4561595f" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-e5ffa57e-1f76-47a4-86c2-a6ca4561595f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-f6193991-b6ca-4fec-86b8-46b05f54116f" class="xr-var-data-in" type="checkbox"><label for="data-f6193991-b6ca-4fec-86b8-46b05f54116f" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">date</span></div><div class="xr-var-dims">(date)</div><div class="xr-var-dtype">datetime64[ms]</div><div class="xr-var-preview xr-preview">2018-04-02 ... 2021-08-30</div><input id="attrs-088b1c8e-61a7-49ce-8ffb-d67d73cabaf4" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-088b1c8e-61a7-49ce-8ffb-d67d73cabaf4" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-097c9834-06c9-4cfb-b25e-1c011bb08d3e" class="xr-var-data-in" type="checkbox"><label for="data-097c9834-06c9-4cfb-b25e-1c011bb08d3e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['2018-04-02T00:00:00.000', '2018-04-09T00:00:00.000',
       '2018-04-16T00:00:00.000', '2018-04-23T00:00:00.000',
       '2018-04-30T00:00:00.000', '2018-05-07T00:00:00.000',
       '2018-05-14T00:00:00.000', '2018-05-21T00:00:00.000',
       '2018-05-28T00:00:00.000', '2018-06-04T00:00:00.000',
       '2018-06-11T00:00:00.000', '2018-06-18T00:00:00.000',
       '2018-06-25T00:00:00.000', '2018-07-02T00:00:00.000',
       '2018-07-09T00:00:00.000', '2018-07-16T00:00:00.000',
       '2018-07-23T00:00:00.000', '2018-07-30T00:00:00.000',
       '2018-08-06T00:00:00.000', '2018-08-13T00:00:00.000',
       '2018-08-20T00:00:00.000', '2018-08-27T00:00:00.000',
       '2018-09-03T00:00:00.000', '2018-09-10T00:00:00.000',
       '2018-09-17T00:00:00.000', '2018-09-24T00:00:00.000',
       '2018-10-01T00:00:00.000', '2018-10-08T00:00:00.000',
       '2018-10-15T00:00:00.000', '2018-10-22T00:00:00.000',
       '2018-10-29T00:00:00.000', '2018-11-05T00:00:00.000',
       '2018-11-12T00:00:00.000', '2018-11-19T00:00:00.000',
       '2018-11-26T00:00:00.000', '2018-12-03T00:00:00.000',
       '2018-12-10T00:00:00.000', '2018-12-17T00:00:00.000',
       '2018-12-24T00:00:00.000', '2018-12-31T00:00:00.000',
       '2019-01-07T00:00:00.000', '2019-01-14T00:00:00.000',
       '2019-01-21T00:00:00.000', '2019-01-28T00:00:00.000',
       '2019-02-04T00:00:00.000', '2019-02-11T00:00:00.000',
       '2019-02-18T00:00:00.000', '2019-02-25T00:00:00.000',
       '2019-03-04T00:00:00.000', '2019-03-11T00:00:00.000',
       '2019-03-18T00:00:00.000', '2019-03-25T00:00:00.000',
       '2019-04-01T00:00:00.000', '2019-04-08T00:00:00.000',
       '2019-04-15T00:00:00.000', '2019-04-22T00:00:00.000',
       '2019-04-29T00:00:00.000', '2019-05-06T00:00:00.000',
       '2019-05-13T00:00:00.000', '2019-05-20T00:00:00.000',
       '2019-05-27T00:00:00.000', '2019-06-03T00:00:00.000',
       '2019-06-10T00:00:00.000', '2019-06-17T00:00:00.000',
       '2019-06-24T00:00:00.000', '2019-07-01T00:00:00.000',
       '2019-07-08T00:00:00.000', '2019-07-15T00:00:00.000',
       '2019-07-22T00:00:00.000', '2019-07-29T00:00:00.000',
       '2019-08-05T00:00:00.000', '2019-08-12T00:00:00.000',
       '2019-08-19T00:00:00.000', '2019-08-26T00:00:00.000',
       '2019-09-02T00:00:00.000', '2019-09-09T00:00:00.000',
       '2019-09-16T00:00:00.000', '2019-09-23T00:00:00.000',
       '2019-09-30T00:00:00.000', '2019-10-07T00:00:00.000',
       '2019-10-14T00:00:00.000', '2019-10-21T00:00:00.000',
       '2019-10-28T00:00:00.000', '2019-11-04T00:00:00.000',
       '2019-11-11T00:00:00.000', '2019-11-18T00:00:00.000',
       '2019-11-25T00:00:00.000', '2019-12-02T00:00:00.000',
       '2019-12-09T00:00:00.000', '2019-12-16T00:00:00.000',
       '2019-12-23T00:00:00.000', '2019-12-30T00:00:00.000',
       '2020-01-06T00:00:00.000', '2020-01-13T00:00:00.000',
       '2020-01-20T00:00:00.000', '2020-01-27T00:00:00.000',
       '2020-02-03T00:00:00.000', '2020-02-10T00:00:00.000',
       '2020-02-17T00:00:00.000', '2020-02-24T00:00:00.000',
       '2020-03-02T00:00:00.000', '2020-03-09T00:00:00.000',
       '2020-03-16T00:00:00.000', '2020-03-23T00:00:00.000',
       '2020-03-30T00:00:00.000', '2020-04-06T00:00:00.000',
       '2020-04-13T00:00:00.000', '2020-04-20T00:00:00.000',
       '2020-04-27T00:00:00.000', '2020-05-04T00:00:00.000',
       '2020-05-11T00:00:00.000', '2020-05-18T00:00:00.000',
       '2020-05-25T00:00:00.000', '2020-06-01T00:00:00.000',
       '2020-06-08T00:00:00.000', '2020-06-15T00:00:00.000',
       '2020-06-22T00:00:00.000', '2020-06-29T00:00:00.000',
       '2020-07-06T00:00:00.000', '2020-07-13T00:00:00.000',
       '2020-07-20T00:00:00.000', '2020-07-27T00:00:00.000',
       '2020-08-03T00:00:00.000', '2020-08-10T00:00:00.000',
       '2020-08-17T00:00:00.000', '2020-08-24T00:00:00.000',
       '2020-08-31T00:00:00.000', '2020-09-07T00:00:00.000',
       '2020-09-14T00:00:00.000', '2020-09-21T00:00:00.000',
       '2020-09-28T00:00:00.000', '2020-10-05T00:00:00.000',
       '2020-10-12T00:00:00.000', '2020-10-19T00:00:00.000',
       '2020-10-26T00:00:00.000', '2020-11-02T00:00:00.000',
       '2020-11-09T00:00:00.000', '2020-11-16T00:00:00.000',
       '2020-11-23T00:00:00.000', '2020-11-30T00:00:00.000',
       '2020-12-07T00:00:00.000', '2020-12-14T00:00:00.000',
       '2020-12-21T00:00:00.000', '2020-12-28T00:00:00.000',
       '2021-01-04T00:00:00.000', '2021-01-11T00:00:00.000',
       '2021-01-18T00:00:00.000', '2021-01-25T00:00:00.000',
       '2021-02-01T00:00:00.000', '2021-02-08T00:00:00.000',
       '2021-02-15T00:00:00.000', '2021-02-22T00:00:00.000',
       '2021-03-01T00:00:00.000', '2021-03-08T00:00:00.000',
       '2021-03-15T00:00:00.000', '2021-03-22T00:00:00.000',
       '2021-03-29T00:00:00.000', '2021-04-05T00:00:00.000',
       '2021-04-12T00:00:00.000', '2021-04-19T00:00:00.000',
       '2021-04-26T00:00:00.000', '2021-05-03T00:00:00.000',
       '2021-05-10T00:00:00.000', '2021-05-17T00:00:00.000',
       '2021-05-24T00:00:00.000', '2021-05-31T00:00:00.000',
       '2021-06-07T00:00:00.000', '2021-06-14T00:00:00.000',
       '2021-06-21T00:00:00.000', '2021-06-28T00:00:00.000',
       '2021-07-05T00:00:00.000', '2021-07-12T00:00:00.000',
       '2021-07-19T00:00:00.000', '2021-07-26T00:00:00.000',
       '2021-08-02T00:00:00.000', '2021-08-09T00:00:00.000',
       '2021-08-16T00:00:00.000', '2021-08-23T00:00:00.000',
       '2021-08-30T00:00:00.000'], dtype='datetime64[ms]')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">control</span></div><div class="xr-var-dims">(control)</div><div class="xr-var-dtype">&lt;U7</div><div class="xr-var-preview xr-preview">'event_1' 'event_2' 't'</div><input id="attrs-a0082a4e-4472-4dc5-a412-1b02fe66b199" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-a0082a4e-4472-4dc5-a412-1b02fe66b199" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-75f28e72-7c74-440f-aa43-aca828336b1c" class="xr-var-data-in" type="checkbox"><label for="data-75f28e72-7c74-440f-aa43-aca828336b1c" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['event_1', 'event_2', 't'], dtype='&lt;U7')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-db4110e3-23fd-4a9e-a22e-e4f9303120fb" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-db4110e3-23fd-4a9e-a22e-e4f9303120fb" class="xr-section-summary" title="Expand/collapse section">Data variables: <span>(6)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>channel_scale</span></div><div class="xr-var-dims">(channel)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.9979 0.964</div><input id="attrs-262c1926-4447-4f0a-83e5-d9311dc9456b" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-262c1926-4447-4f0a-83e5-d9311dc9456b" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-3852e985-f325-4b68-8aa6-11051b5869b5" class="xr-var-data-in" type="checkbox"><label for="data-3852e985-f325-4b68-8aa6-11051b5869b5" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0.99785325, 0.96404388])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>target_scale</span></div><div class="xr-var-dims">(target_scale_dim_0)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">8.914</div><input id="attrs-7e16ef7f-a3e0-4a81-a77a-840805b9a02c" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-7e16ef7f-a3e0-4a81-a77a-840805b9a02c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-820fb2de-563f-490a-b5c2-783ac5ae4ed6" class="xr-var-data-in" type="checkbox"><label for="data-820fb2de-563f-490a-b5c2-783ac5ae4ed6" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([8.91399856])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>channel_data</span></div><div class="xr-var-dims">(date, channel)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.338 0.0 0.09205 ... 0.3955 0.0</div><input id="attrs-630e2d23-2520-4908-9191-e5842d813676" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-630e2d23-2520-4908-9191-e5842d813676" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-18392c65-fc43-4bc0-b30e-76f77da0f141" class="xr-var-data-in" type="checkbox"><label for="data-18392c65-fc43-4bc0-b30e-76f77da0f141" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.33800324, 0.        ],
       [0.0920486 , 0.        ],
       [0.37085559, 0.        ],
       [0.39870218, 0.        ],
       [0.19683764, 0.        ],
       [0.25339108, 0.        ],
       [0.26866231, 0.        ],
       [0.29487275, 0.        ],
       [0.00239759, 0.        ],
       [0.90835333, 0.        ],
       [0.35265979, 0.        ],
       [0.97099198, 0.        ],
       [0.37890816, 0.        ],
       [0.15028933, 0.95066847],
       [0.17177863, 0.        ],
       [0.3269159 , 0.        ],
       [0.28301935, 0.        ],
       [0.95949285, 0.        ],
       [0.27790158, 0.        ],
       [0.31840702, 0.        ],
...
       [0.14063608, 0.        ],
       [0.0229337 , 0.        ],
       [0.18796272, 0.        ],
       [0.01659104, 0.89647277],
       [0.40886191, 0.        ],
       [0.96467746, 0.83017248],
       [0.37394336, 0.        ],
       [0.95537755, 0.        ],
       [0.91024729, 0.        ],
       [0.1259937 , 0.        ],
       [0.00180623, 0.        ],
       [0.26358047, 0.        ],
       [0.27191986, 0.        ],
       [0.95749025, 0.80044181],
       [0.0366444 , 0.93283323],
       [0.0775994 , 0.        ],
       [0.9085692 , 0.        ],
       [0.23563662, 0.        ],
       [0.21789522, 0.        ],
       [0.3954925 , 0.        ]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>target_data</span></div><div class="xr-var-dims">(date)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">3.813 3.65 4.785 ... 4.911 5.475</div><input id="attrs-c41d74e3-4ecc-4891-a4cc-2ed963857d32" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c41d74e3-4ecc-4891-a4cc-2ed963857d32" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-cd5d642f-0281-4dce-9ad8-d09254b53810" class="xr-var-data-in" type="checkbox"><label for="data-cd5d642f-0281-4dce-9ad8-d09254b53810" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([3.8129258 , 3.64977046, 4.78483954, 4.80913018, 4.70062935,
       4.07089085, 4.11246538, 4.25185465, 3.56795577, 4.94881488,
       5.16005798, 5.43649981, 4.83098129, 5.63006751, 4.73235355,
       3.66834406, 3.78650392, 4.91362211, 4.16224258, 4.21419369,
       3.52226858, 5.5584223 , 4.3685282 , 4.29756042, 5.24582512,
       4.47855132, 4.79183121, 6.78472996, 5.81430414, 4.66525015,
       4.91645907, 5.18511778, 5.79037518, 5.33777036, 6.72251845,
       7.64573381, 6.09686674, 4.33417729, 6.93930965, 6.12946171,
       4.99109858, 3.99611604, 4.94313292, 5.19348805, 4.75824793,
       6.02757518, 5.20012679, 7.42795522, 6.15692514, 4.74955198,
       5.38280158, 6.41045058, 4.4622132 , 5.49484942, 6.02568605,
       5.76999054, 4.05987576, 3.95036689, 7.92337147, 5.0933997 ,
       4.35807994, 5.82807399, 5.14249503, 3.81409317, 3.43859261,
       3.541175  , 3.18181034, 5.45830706, 4.51537322, 4.42850665,
       6.07976451, 4.52454465, 3.44668063, 3.47681848, 4.00200062,
       4.64203437, 4.52812252, 4.88612159, 3.79499949, 4.453517  ,
       5.1214564 , 5.19178042, 6.43061283, 5.83864985, 5.65579917,
       6.22217713, 5.2351786 , 5.68319915, 4.90794116, 8.91399856,
       6.48739756, 6.77278964, 5.56172984, 4.9021014 , 5.35052629,
       4.53164032, 4.86036499, 8.2024237 , 5.66977136, 5.26266473,
       6.24400076, 4.23503289, 5.07046199, 6.2731969 , 6.70420353,
       5.33532242, 5.57633902, 7.42054213, 6.67742397, 5.37341363,
       6.81961662, 4.9072423 , 6.31348112, 6.15084203, 5.09557325,
       4.47160846, 5.94320048, 5.48848381, 4.88754624, 4.27498015,
       4.53491976, 5.16642873, 3.17936123, 2.98359181, 5.10607077,
       4.44472414, 3.90941529, 5.2787944 , 7.13736109, 6.06752498,
       5.48667545, 5.17083152, 6.09617006, 5.99299384, 6.27041169,
       5.08550921, 5.66952927, 6.26525751, 6.01610719, 6.62321119,
       7.14599555, 6.69044481, 5.41579015, 5.80637615, 6.89584863,
       5.06677724, 5.42822059, 6.2545388 , 4.90303578, 4.62381283,
       6.25732783, 6.98242325, 6.3747867 , 4.41274247, 7.29038126,
       5.74409222, 7.25081441, 5.40791584, 4.86392505, 4.56356722,
       4.47877305, 4.8026545 , 6.11988463, 5.59161439, 8.32000264,
       6.65850801, 6.13960794, 6.37594067, 5.37713401, 4.31962762,
       4.64206738, 4.54716503, 7.23761181, 6.54540434, 5.13089395,
       5.59748681, 5.13723193, 4.91140784, 5.47540004])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>control_data</span></div><div class="xr-var-dims">(date, control)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.0 0.0 0.0 0.0 ... 0.0 0.0 178.0</div><input id="attrs-1fe26694-f8f7-4223-80bd-96d3ff1c4529" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-1fe26694-f8f7-4223-80bd-96d3ff1c4529" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-37e8bf55-19b6-4ac0-be91-cfccf1366669" class="xr-var-data-in" type="checkbox"><label for="data-37e8bf55-19b6-4ac0-be91-cfccf1366669" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[  0.,   0.,   0.],
       [  0.,   0.,   1.],
       [  0.,   0.,   2.],
       [  0.,   0.,   3.],
       [  0.,   0.,   4.],
       [  0.,   0.,   5.],
       [  0.,   0.,   6.],
       [  0.,   0.,   7.],
       [  0.,   0.,   8.],
       [  0.,   0.,   9.],
       [  0.,   0.,  10.],
       [  0.,   0.,  11.],
       [  0.,   0.,  12.],
       [  0.,   0.,  13.],
       [  0.,   0.,  14.],
       [  0.,   0.,  15.],
       [  0.,   0.,  16.],
       [  0.,   0.,  17.],
       [  0.,   0.,  18.],
       [  0.,   0.,  19.],
...
       [  0.,   0., 159.],
       [  0.,   0., 160.],
       [  0.,   0., 161.],
       [  0.,   0., 162.],
       [  0.,   0., 163.],
       [  0.,   0., 164.],
       [  0.,   0., 165.],
       [  0.,   0., 166.],
       [  0.,   0., 167.],
       [  0.,   0., 168.],
       [  0.,   0., 169.],
       [  0.,   0., 170.],
       [  0.,   0., 171.],
       [  0.,   0., 172.],
       [  0.,   0., 173.],
       [  0.,   0., 174.],
       [  0.,   0., 175.],
       [  0.,   0., 176.],
       [  0.,   0., 177.],
       [  0.,   0., 178.]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>dayofyear</span></div><div class="xr-var-dims">(date)</div><div class="xr-var-dtype">int32</div><div class="xr-var-preview xr-preview">92 99 106 113 ... 221 228 235 242</div><input id="attrs-43525157-2c33-486e-bdb8-e54241a20d27" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-43525157-2c33-486e-bdb8-e54241a20d27" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-81530ec5-d982-4424-8cb0-31792ffe81f0" class="xr-var-data-in" type="checkbox"><label for="data-81530ec5-d982-4424-8cb0-31792ffe81f0" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([ 92,  99, 106, 113, 120, 127, 134, 141, 148, 155, 162, 169, 176,
       183, 190, 197, 204, 211, 218, 225, 232, 239, 246, 253, 260, 267,
       274, 281, 288, 295, 302, 309, 316, 323, 330, 337, 344, 351, 358,
       365,   7,  14,  21,  28,  35,  42,  49,  56,  63,  70,  77,  84,
        91,  98, 105, 112, 119, 126, 133, 140, 147, 154, 161, 168, 175,
       182, 189, 196, 203, 210, 217, 224, 231, 238, 245, 252, 259, 266,
       273, 280, 287, 294, 301, 308, 315, 322, 329, 336, 343, 350, 357,
       364,   6,  13,  20,  27,  34,  41,  48,  55,  62,  69,  76,  83,
        90,  97, 104, 111, 118, 125, 132, 139, 146, 153, 160, 167, 174,
       181, 188, 195, 202, 209, 216, 223, 230, 237, 244, 251, 258, 265,
       272, 279, 286, 293, 300, 307, 314, 321, 328, 335, 342, 349, 356,
       363,   4,  11,  18,  25,  32,  39,  46,  53,  60,  67,  74,  81,
        88,  95, 102, 109, 116, 123, 130, 137, 144, 151, 158, 165, 172,
       179, 186, 193, 200, 207, 214, 221, 228, 235, 242], dtype=int32)</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-27cf7fa5-d792-48f3-8518-6545c8c42bd5" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-27cf7fa5-d792-48f3-8518-6545c8c42bd5" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(6)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2026-02-25T20:16:05.081063+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.23.1</dd><dt><span>inference_library :</span></dt><dd>numpyro</dd><dt><span>inference_library_version :</span></dt><dd>0.20.0</dd><dt><span>sampling_time :</span></dt><dd>41.909262</dd><dt><span>tuning_steps :</span></dt><dd>1000</dd></dl></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
            <li class="xr-section-item">
                  <input id="idata_fit_data32e8421c-901f-47ac-bd89-b701152de478" class="xr-section-summary-in" type="checkbox">
                  <label for="idata_fit_data32e8421c-901f-47ac-bd89-b701152de478" class="xr-section-summary">fit_data</label>
                  <div class="xr-section-inline-details"></div>
                  <div class="xr-section-details">
                      <ul id="xr-dataset-coord-list" class="xr-var-list">
                          <div style="padding-left:2rem;"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in notebooks */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
  line-height: 1.6;
  padding-bottom: 4px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
}

.xr-header {
  border-bottom: solid 1px var(--xr-border-color);
  margin-bottom: 4px;
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-obj-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type,
.xr-group-box-contents > label {
  color: var(--xr-font-color2);
  display: block;
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
  margin-block-start: 0;
  margin-block-end: 0;
}

.xr-section-item {
  display: contents;
}

.xr-section-item > input,
.xr-group-box-contents > input,
.xr-array-wrap > input {
  display: block;
  opacity: 0;
  height: 0;
  margin: 0;
}

.xr-section-item > input + label,
.xr-var-item > input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item > input:enabled + label,
.xr-var-item > input:enabled + label,
.xr-array-wrap > input:enabled + label,
.xr-group-box-contents > input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item > input:focus-visible + label,
.xr-var-item > input:focus-visible + label,
.xr-array-wrap > input:focus-visible + label,
.xr-group-box-contents > input:focus-visible + label {
  outline: auto;
}

.xr-section-item > input:enabled + label:hover,
.xr-var-item > input:enabled + label:hover,
.xr-array-wrap > input:enabled + label:hover,
.xr-group-box-contents > input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
  white-space: nowrap;
}

.xr-section-summary > em {
  font-weight: normal;
}

.xr-span-grid {
  grid-column-end: -1;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.3em;
}

.xr-group-box-contents > input:checked + label > span {
  display: inline-block;
  padding-left: 0.6em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details,
.xr-group-box-contents > label {
  padding-top: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  grid-column: 1 / -1;
  margin-top: 4px;
  margin-bottom: 5px;
}

.xr-section-summary-in ~ .xr-section-details {
  display: none;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-children {
  display: inline-grid;
  grid-template-columns: 100%;
  grid-column: 1 / -1;
  padding-top: 4px;
}

.xr-group-box {
  display: inline-grid;
  grid-template-columns: 0px 30px auto;
}

.xr-group-box-vline {
  grid-column-start: 1;
  border-right: 0.2em solid;
  border-color: var(--xr-border-color);
  width: 0px;
}

.xr-group-box-hline {
  grid-column-start: 2;
  grid-row-start: 1;
  height: 1em;
  width: 26px;
  border-bottom: 0.2em solid;
  border-color: var(--xr-border-color);
}

.xr-group-box-contents {
  grid-column-start: 3;
  padding-bottom: 4px;
}

.xr-group-box-contents > label::before {
  content: "📂";
  padding-right: 0.3em;
}

.xr-group-box-contents > input:checked + label::before {
  content: "📁";
}

.xr-group-box-contents > input:checked + label {
  padding-bottom: 0px;
}

.xr-group-box-contents > input:checked ~ .xr-sections {
  display: none;
}

.xr-group-box-contents > input + label > span {
  display: none;
}

.xr-group-box-ellipsis {
  font-size: 1.4em;
  font-weight: 900;
  color: var(--xr-font-color2);
  letter-spacing: 0.15em;
  cursor: default;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 10kB
Dimensions:      (date_week: 179)
Coordinates:
  * date_week    (date_week) datetime64[ms] 1kB 2018-04-02 ... 2021-08-30
Data variables:
    x1           (date_week) float64 1kB 0.338 0.09205 0.3709 ... 0.2179 0.3955
    x2           (date_week) float64 1kB 0.0 0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 0.0
    event_1      (date_week) float64 1kB 0.0 0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 0.0
    event_2      (date_week) float64 1kB 0.0 0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 0.0
    day_of_year  (date_week) int16 358B 92 99 106 113 120 ... 221 228 235 242
    t            (date_week) int64 1kB 0 1 2 3 4 5 6 ... 173 174 175 176 177 178
    y            (date_week) float64 1kB 3.813 3.65 4.785 ... 5.137 4.911 5.475</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-768f210e-aacc-46e1-807f-c7fd591c56ea" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-768f210e-aacc-46e1-807f-c7fd591c56ea" class="xr-section-summary">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">date_week</span>: 179</li></ul></div></li><li class="xr-section-item"><input id="section-f638edeb-ace9-424d-b45b-5a256332914f" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-f638edeb-ace9-424d-b45b-5a256332914f" class="xr-section-summary" title="Expand/collapse section">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">date_week</span></div><div class="xr-var-dims">(date_week)</div><div class="xr-var-dtype">datetime64[ms]</div><div class="xr-var-preview xr-preview">2018-04-02 ... 2021-08-30</div><input id="attrs-bc7a6567-d1d2-41a3-872d-641219f0fbdb" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-bc7a6567-d1d2-41a3-872d-641219f0fbdb" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-ebc328ae-dbff-4a18-b809-b58d1f748f8c" class="xr-var-data-in" type="checkbox"><label for="data-ebc328ae-dbff-4a18-b809-b58d1f748f8c" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['2018-04-02T00:00:00.000', '2018-04-09T00:00:00.000',
       '2018-04-16T00:00:00.000', '2018-04-23T00:00:00.000',
       '2018-04-30T00:00:00.000', '2018-05-07T00:00:00.000',
       '2018-05-14T00:00:00.000', '2018-05-21T00:00:00.000',
       '2018-05-28T00:00:00.000', '2018-06-04T00:00:00.000',
       '2018-06-11T00:00:00.000', '2018-06-18T00:00:00.000',
       '2018-06-25T00:00:00.000', '2018-07-02T00:00:00.000',
       '2018-07-09T00:00:00.000', '2018-07-16T00:00:00.000',
       '2018-07-23T00:00:00.000', '2018-07-30T00:00:00.000',
       '2018-08-06T00:00:00.000', '2018-08-13T00:00:00.000',
       '2018-08-20T00:00:00.000', '2018-08-27T00:00:00.000',
       '2018-09-03T00:00:00.000', '2018-09-10T00:00:00.000',
       '2018-09-17T00:00:00.000', '2018-09-24T00:00:00.000',
       '2018-10-01T00:00:00.000', '2018-10-08T00:00:00.000',
       '2018-10-15T00:00:00.000', '2018-10-22T00:00:00.000',
       '2018-10-29T00:00:00.000', '2018-11-05T00:00:00.000',
       '2018-11-12T00:00:00.000', '2018-11-19T00:00:00.000',
       '2018-11-26T00:00:00.000', '2018-12-03T00:00:00.000',
       '2018-12-10T00:00:00.000', '2018-12-17T00:00:00.000',
       '2018-12-24T00:00:00.000', '2018-12-31T00:00:00.000',
       '2019-01-07T00:00:00.000', '2019-01-14T00:00:00.000',
       '2019-01-21T00:00:00.000', '2019-01-28T00:00:00.000',
       '2019-02-04T00:00:00.000', '2019-02-11T00:00:00.000',
       '2019-02-18T00:00:00.000', '2019-02-25T00:00:00.000',
       '2019-03-04T00:00:00.000', '2019-03-11T00:00:00.000',
       '2019-03-18T00:00:00.000', '2019-03-25T00:00:00.000',
       '2019-04-01T00:00:00.000', '2019-04-08T00:00:00.000',
       '2019-04-15T00:00:00.000', '2019-04-22T00:00:00.000',
       '2019-04-29T00:00:00.000', '2019-05-06T00:00:00.000',
       '2019-05-13T00:00:00.000', '2019-05-20T00:00:00.000',
       '2019-05-27T00:00:00.000', '2019-06-03T00:00:00.000',
       '2019-06-10T00:00:00.000', '2019-06-17T00:00:00.000',
       '2019-06-24T00:00:00.000', '2019-07-01T00:00:00.000',
       '2019-07-08T00:00:00.000', '2019-07-15T00:00:00.000',
       '2019-07-22T00:00:00.000', '2019-07-29T00:00:00.000',
       '2019-08-05T00:00:00.000', '2019-08-12T00:00:00.000',
       '2019-08-19T00:00:00.000', '2019-08-26T00:00:00.000',
       '2019-09-02T00:00:00.000', '2019-09-09T00:00:00.000',
       '2019-09-16T00:00:00.000', '2019-09-23T00:00:00.000',
       '2019-09-30T00:00:00.000', '2019-10-07T00:00:00.000',
       '2019-10-14T00:00:00.000', '2019-10-21T00:00:00.000',
       '2019-10-28T00:00:00.000', '2019-11-04T00:00:00.000',
       '2019-11-11T00:00:00.000', '2019-11-18T00:00:00.000',
       '2019-11-25T00:00:00.000', '2019-12-02T00:00:00.000',
       '2019-12-09T00:00:00.000', '2019-12-16T00:00:00.000',
       '2019-12-23T00:00:00.000', '2019-12-30T00:00:00.000',
       '2020-01-06T00:00:00.000', '2020-01-13T00:00:00.000',
       '2020-01-20T00:00:00.000', '2020-01-27T00:00:00.000',
       '2020-02-03T00:00:00.000', '2020-02-10T00:00:00.000',
       '2020-02-17T00:00:00.000', '2020-02-24T00:00:00.000',
       '2020-03-02T00:00:00.000', '2020-03-09T00:00:00.000',
       '2020-03-16T00:00:00.000', '2020-03-23T00:00:00.000',
       '2020-03-30T00:00:00.000', '2020-04-06T00:00:00.000',
       '2020-04-13T00:00:00.000', '2020-04-20T00:00:00.000',
       '2020-04-27T00:00:00.000', '2020-05-04T00:00:00.000',
       '2020-05-11T00:00:00.000', '2020-05-18T00:00:00.000',
       '2020-05-25T00:00:00.000', '2020-06-01T00:00:00.000',
       '2020-06-08T00:00:00.000', '2020-06-15T00:00:00.000',
       '2020-06-22T00:00:00.000', '2020-06-29T00:00:00.000',
       '2020-07-06T00:00:00.000', '2020-07-13T00:00:00.000',
       '2020-07-20T00:00:00.000', '2020-07-27T00:00:00.000',
       '2020-08-03T00:00:00.000', '2020-08-10T00:00:00.000',
       '2020-08-17T00:00:00.000', '2020-08-24T00:00:00.000',
       '2020-08-31T00:00:00.000', '2020-09-07T00:00:00.000',
       '2020-09-14T00:00:00.000', '2020-09-21T00:00:00.000',
       '2020-09-28T00:00:00.000', '2020-10-05T00:00:00.000',
       '2020-10-12T00:00:00.000', '2020-10-19T00:00:00.000',
       '2020-10-26T00:00:00.000', '2020-11-02T00:00:00.000',
       '2020-11-09T00:00:00.000', '2020-11-16T00:00:00.000',
       '2020-11-23T00:00:00.000', '2020-11-30T00:00:00.000',
       '2020-12-07T00:00:00.000', '2020-12-14T00:00:00.000',
       '2020-12-21T00:00:00.000', '2020-12-28T00:00:00.000',
       '2021-01-04T00:00:00.000', '2021-01-11T00:00:00.000',
       '2021-01-18T00:00:00.000', '2021-01-25T00:00:00.000',
       '2021-02-01T00:00:00.000', '2021-02-08T00:00:00.000',
       '2021-02-15T00:00:00.000', '2021-02-22T00:00:00.000',
       '2021-03-01T00:00:00.000', '2021-03-08T00:00:00.000',
       '2021-03-15T00:00:00.000', '2021-03-22T00:00:00.000',
       '2021-03-29T00:00:00.000', '2021-04-05T00:00:00.000',
       '2021-04-12T00:00:00.000', '2021-04-19T00:00:00.000',
       '2021-04-26T00:00:00.000', '2021-05-03T00:00:00.000',
       '2021-05-10T00:00:00.000', '2021-05-17T00:00:00.000',
       '2021-05-24T00:00:00.000', '2021-05-31T00:00:00.000',
       '2021-06-07T00:00:00.000', '2021-06-14T00:00:00.000',
       '2021-06-21T00:00:00.000', '2021-06-28T00:00:00.000',
       '2021-07-05T00:00:00.000', '2021-07-12T00:00:00.000',
       '2021-07-19T00:00:00.000', '2021-07-26T00:00:00.000',
       '2021-08-02T00:00:00.000', '2021-08-09T00:00:00.000',
       '2021-08-16T00:00:00.000', '2021-08-23T00:00:00.000',
       '2021-08-30T00:00:00.000'], dtype='datetime64[ms]')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-456cc542-5645-4be4-ba4d-b73e4239c99e" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-456cc542-5645-4be4-ba4d-b73e4239c99e" class="xr-section-summary" title="Expand/collapse section">Data variables: <span>(7)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>x1</span></div><div class="xr-var-dims">(date_week)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.338 0.09205 ... 0.2179 0.3955</div><input id="attrs-c88bb0a7-12b2-43fa-942f-f98e37dfd472" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c88bb0a7-12b2-43fa-942f-f98e37dfd472" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-2f7a2231-d343-431c-8929-eba83c93b88a" class="xr-var-data-in" type="checkbox"><label for="data-2f7a2231-d343-431c-8929-eba83c93b88a" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0.33800324, 0.0920486 , 0.37085559, 0.39870218, 0.19683764,
       0.25339108, 0.26866231, 0.29487275, 0.00239759, 0.90835333,
       0.35265979, 0.97099198, 0.37890816, 0.15028933, 0.17177863,
       0.3269159 , 0.28301935, 0.95949285, 0.27790158, 0.31840702,
       0.22971861, 0.99785325, 0.30065717, 0.23801526, 0.07170849,
       0.23054005, 0.42638419, 0.27634362, 0.24243865, 0.02508186,
       0.28907389, 0.38805968, 0.37039333, 0.22480679, 0.09188616,
       0.39546328, 0.1878268 , 0.03386155, 0.36917693, 0.41003749,
       0.23764843, 0.07583792, 0.42518557, 0.41260429, 0.36020557,
       0.19158187, 0.38631319, 0.96546023, 0.41365039, 0.20723908,
       0.44556635, 0.4296323 , 0.06653465, 0.08744417, 0.13462974,
       0.27839352, 0.09754473, 0.00856081, 0.99092538, 0.09799638,
       0.15458025, 0.97366628, 0.17231637, 0.0177511 , 0.01552364,
       0.22543804, 0.00716493, 0.99550534, 0.25949998, 0.29211723,
       0.19384386, 0.28504453, 0.01797543, 0.22572134, 0.209578  ,
       0.40830611, 0.33571232, 0.1526077 , 0.00930955, 0.30472477,
       0.2357424 , 0.19387147, 0.9461418 , 0.23653016, 0.27863165,
       0.29756181, 0.11789345, 0.31667751, 0.0418857 , 0.91723796,
       0.26713485, 0.06603221, 0.38697977, 0.08488456, 0.39906503,
       0.08896199, 0.20644961, 0.95472751, 0.42674421, 0.29905317,
       0.10388584, 0.07784801, 0.3720047 , 0.19883698, 0.94408388,
       0.10829249, 0.33680421, 0.38161618, 0.4160124 , 0.28424416,
       0.05552281, 0.1332009 , 0.9381    , 0.35571555, 0.19512665,
       0.08858066, 0.96213894, 0.33272616, 0.41704129, 0.24726409,
       0.44960678, 0.41893375, 0.00508245, 0.04314423, 0.09857176,
       0.22469874, 0.07296067, 0.16936255, 0.21332482, 0.9136668 ,
       0.02773866, 0.37218086, 0.40024163, 0.3007132 , 0.34754796,
       0.07211332, 0.16910183, 0.31209325, 0.42775559, 0.32984212,
       0.94708924, 0.10028683, 0.16974147, 0.27782291, 0.09431596,
       0.1067398 , 0.35925708, 0.04148624, 0.17252329, 0.26285904,
       0.97516621, 0.23466251, 0.25109484, 0.06842797, 0.410207  ,
       0.24741165, 0.37450836, 0.09305154, 0.09006439, 0.14063608,
       0.0229337 , 0.18796272, 0.01659104, 0.40886191, 0.96467746,
       0.37394336, 0.95537755, 0.91024729, 0.1259937 , 0.00180623,
       0.26358047, 0.27191986, 0.95749025, 0.0366444 , 0.0775994 ,
       0.9085692 , 0.23563662, 0.21789522, 0.3954925 ])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>x2</span></div><div class="xr-var-dims">(date_week)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 0.0</div><input id="attrs-435d8249-b7a0-4a64-86ba-90872571bed8" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-435d8249-b7a0-4a64-86ba-90872571bed8" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-7d33ba60-f678-4257-9488-442f4f1e6d14" class="xr-var-data-in" type="checkbox"><label for="data-7d33ba60-f678-4257-9488-442f4f1e6d14" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0.        , 0.        , 0.        , 0.        , 0.        ,
       0.        , 0.        , 0.        , 0.        , 0.        ,
       0.        , 0.        , 0.        , 0.95066847, 0.        ,
       0.        , 0.        , 0.        , 0.        , 0.        ,
       0.        , 0.        , 0.        , 0.        , 0.90423338,
       0.        , 0.        , 0.89861908, 0.        , 0.        ,
       0.        , 0.        , 0.        , 0.        , 0.85639185,
       0.96200728, 0.        , 0.        , 0.95895595, 0.        ,
       0.        , 0.        , 0.        , 0.        , 0.        ,
       0.94941743, 0.        , 0.92396027, 0.        , 0.        ,
       0.        , 0.88307996, 0.        , 0.95454838, 0.96404388,
       0.        , 0.        , 0.        , 0.        , 0.        ,
       0.        , 0.        , 0.        , 0.        , 0.        ,
       0.        , 0.        , 0.        , 0.        , 0.        ,
       0.83424268, 0.        , 0.        , 0.        , 0.        ,
       0.        , 0.        , 0.        , 0.        , 0.        ,
       0.        , 0.        , 0.        , 0.        , 0.        ,
       0.        , 0.        , 0.        , 0.        , 0.92773377,
       0.        , 0.85699888, 0.        , 0.        , 0.        ,
       0.        , 0.        , 0.87663319, 0.        , 0.        ,
       0.80712597, 0.        , 0.        , 0.91942896, 0.        ,
       0.        , 0.        , 0.92332889, 0.        , 0.        ,
       0.94145851, 0.        , 0.        , 0.        , 0.        ,
       0.        , 0.        , 0.        , 0.        , 0.        ,
       0.        , 0.        , 0.        , 0.        , 0.90393702,
       0.        , 0.        , 0.81744808, 0.        , 0.        ,
       0.        , 0.        , 0.        , 0.        , 0.        ,
       0.        , 0.        , 0.        , 0.        , 0.        ,
       0.        , 0.        , 0.        , 0.        , 0.86883923,
       0.        , 0.        , 0.85550445, 0.        , 0.        ,
       0.        , 0.83510276, 0.        , 0.        , 0.87173096,
       0.        , 0.85957444, 0.        , 0.        , 0.        ,
       0.        , 0.        , 0.89647277, 0.        , 0.83017248,
       0.        , 0.        , 0.        , 0.        , 0.        ,
       0.        , 0.        , 0.80044181, 0.93283323, 0.        ,
       0.        , 0.        , 0.        , 0.        ])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>event_1</span></div><div class="xr-var-dims">(date_week)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 0.0</div><input id="attrs-a3380459-cb45-4529-8cab-9471586b197c" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-a3380459-cb45-4529-8cab-9471586b197c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-587164a9-f94a-453a-a766-6d088d65980a" class="xr-var-data-in" type="checkbox"><label for="data-587164a9-f94a-453a-a766-6d088d65980a" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 1., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0.])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>event_2</span></div><div class="xr-var-dims">(date_week)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 0.0</div><input id="attrs-0c50b412-ec13-4bdb-a4e4-5831788ef413" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-0c50b412-ec13-4bdb-a4e4-5831788ef413" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-2cf2bb3d-73df-462c-971e-9ac56717c23a" class="xr-var-data-in" type="checkbox"><label for="data-2cf2bb3d-73df-462c-971e-9ac56717c23a" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 1., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.,
       0., 0., 0., 0., 0., 0., 0., 0., 0.])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>day_of_year</span></div><div class="xr-var-dims">(date_week)</div><div class="xr-var-dtype">int16</div><div class="xr-var-preview xr-preview">92 99 106 113 ... 221 228 235 242</div><input id="attrs-6e590c41-222a-4584-81b6-168e5076e032" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-6e590c41-222a-4584-81b6-168e5076e032" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-47546df5-1e6a-4988-83bf-262c2de0e2dd" class="xr-var-data-in" type="checkbox"><label for="data-47546df5-1e6a-4988-83bf-262c2de0e2dd" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([ 92,  99, 106, 113, 120, 127, 134, 141, 148, 155, 162, 169, 176,
       183, 190, 197, 204, 211, 218, 225, 232, 239, 246, 253, 260, 267,
       274, 281, 288, 295, 302, 309, 316, 323, 330, 337, 344, 351, 358,
       365,   7,  14,  21,  28,  35,  42,  49,  56,  63,  70,  77,  84,
        91,  98, 105, 112, 119, 126, 133, 140, 147, 154, 161, 168, 175,
       182, 189, 196, 203, 210, 217, 224, 231, 238, 245, 252, 259, 266,
       273, 280, 287, 294, 301, 308, 315, 322, 329, 336, 343, 350, 357,
       364,   6,  13,  20,  27,  34,  41,  48,  55,  62,  69,  76,  83,
        90,  97, 104, 111, 118, 125, 132, 139, 146, 153, 160, 167, 174,
       181, 188, 195, 202, 209, 216, 223, 230, 237, 244, 251, 258, 265,
       272, 279, 286, 293, 300, 307, 314, 321, 328, 335, 342, 349, 356,
       363,   4,  11,  18,  25,  32,  39,  46,  53,  60,  67,  74,  81,
        88,  95, 102, 109, 116, 123, 130, 137, 144, 151, 158, 165, 172,
       179, 186, 193, 200, 207, 214, 221, 228, 235, 242], dtype=int16)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>t</span></div><div class="xr-var-dims">(date_week)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 174 175 176 177 178</div><input id="attrs-44f5d502-3784-46f9-9919-2171bbc26890" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-44f5d502-3784-46f9-9919-2171bbc26890" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-653978e1-f809-491e-a329-9be6e0cc3c4b" class="xr-var-data-in" type="checkbox"><label for="data-653978e1-f809-491e-a329-9be6e0cc3c4b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,
        13,  14,  15,  16,  17,  18,  19,  20,  21,  22,  23,  24,  25,
        26,  27,  28,  29,  30,  31,  32,  33,  34,  35,  36,  37,  38,
        39,  40,  41,  42,  43,  44,  45,  46,  47,  48,  49,  50,  51,
        52,  53,  54,  55,  56,  57,  58,  59,  60,  61,  62,  63,  64,
        65,  66,  67,  68,  69,  70,  71,  72,  73,  74,  75,  76,  77,
        78,  79,  80,  81,  82,  83,  84,  85,  86,  87,  88,  89,  90,
        91,  92,  93,  94,  95,  96,  97,  98,  99, 100, 101, 102, 103,
       104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116,
       117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129,
       130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142,
       143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155,
       156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168,
       169, 170, 171, 172, 173, 174, 175, 176, 177, 178])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>y</span></div><div class="xr-var-dims">(date_week)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">3.813 3.65 4.785 ... 4.911 5.475</div><input id="attrs-efd33615-ea7b-4f8c-b171-af5f79d0a331" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-efd33615-ea7b-4f8c-b171-af5f79d0a331" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-bd7bc7e5-4ad5-4a28-9639-b51244d80557" class="xr-var-data-in" type="checkbox"><label for="data-bd7bc7e5-4ad5-4a28-9639-b51244d80557" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([3.8129258 , 3.64977046, 4.78483954, 4.80913018, 4.70062935,
       4.07089085, 4.11246538, 4.25185465, 3.56795577, 4.94881488,
       5.16005798, 5.43649981, 4.83098129, 5.63006751, 4.73235355,
       3.66834406, 3.78650392, 4.91362211, 4.16224258, 4.21419369,
       3.52226858, 5.5584223 , 4.3685282 , 4.29756042, 5.24582512,
       4.47855132, 4.79183121, 6.78472996, 5.81430414, 4.66525015,
       4.91645907, 5.18511778, 5.79037518, 5.33777036, 6.72251845,
       7.64573381, 6.09686674, 4.33417729, 6.93930965, 6.12946171,
       4.99109858, 3.99611604, 4.94313292, 5.19348805, 4.75824793,
       6.02757518, 5.20012679, 7.42795522, 6.15692514, 4.74955198,
       5.38280158, 6.41045058, 4.4622132 , 5.49484942, 6.02568605,
       5.76999054, 4.05987576, 3.95036689, 7.92337147, 5.0933997 ,
       4.35807994, 5.82807399, 5.14249503, 3.81409317, 3.43859261,
       3.541175  , 3.18181034, 5.45830706, 4.51537322, 4.42850665,
       6.07976451, 4.52454465, 3.44668063, 3.47681848, 4.00200062,
       4.64203437, 4.52812252, 4.88612159, 3.79499949, 4.453517  ,
       5.1214564 , 5.19178042, 6.43061283, 5.83864985, 5.65579917,
       6.22217713, 5.2351786 , 5.68319915, 4.90794116, 8.91399856,
       6.48739756, 6.77278964, 5.56172984, 4.9021014 , 5.35052629,
       4.53164032, 4.86036499, 8.2024237 , 5.66977136, 5.26266473,
       6.24400076, 4.23503289, 5.07046199, 6.2731969 , 6.70420353,
       5.33532242, 5.57633902, 7.42054213, 6.67742397, 5.37341363,
       6.81961662, 4.9072423 , 6.31348112, 6.15084203, 5.09557325,
       4.47160846, 5.94320048, 5.48848381, 4.88754624, 4.27498015,
       4.53491976, 5.16642873, 3.17936123, 2.98359181, 5.10607077,
       4.44472414, 3.90941529, 5.2787944 , 7.13736109, 6.06752498,
       5.48667545, 5.17083152, 6.09617006, 5.99299384, 6.27041169,
       5.08550921, 5.66952927, 6.26525751, 6.01610719, 6.62321119,
       7.14599555, 6.69044481, 5.41579015, 5.80637615, 6.89584863,
       5.06677724, 5.42822059, 6.2545388 , 4.90303578, 4.62381283,
       6.25732783, 6.98242325, 6.3747867 , 4.41274247, 7.29038126,
       5.74409222, 7.25081441, 5.40791584, 4.86392505, 4.56356722,
       4.47877305, 4.8026545 , 6.11988463, 5.59161439, 8.32000264,
       6.65850801, 6.13960794, 6.37594067, 5.37713401, 4.31962762,
       4.64206738, 4.54716503, 7.23761181, 6.54540434, 5.13089395,
       5.59748681, 5.13723193, 4.91140784, 5.47540004])</pre></div></li></ul></div></li></ul></div></div><br></div>
                      </ul>
                  </div>
            </li>
            
              </ul>
            </div>
            <style> /* CSS stylesheet for displaying InferenceData objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-sections.group-sections {
  grid-template-columns: auto;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
.xr-wrap{width:700px!important;} </style>
</div>
</div>
<p>Then we plot can check how we did by plotting the posterior predictive.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>mmm.sample_posterior_predictive(X<span class="op">=</span>X, random_seed <span class="op">=</span> seed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in notebooks */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
  line-height: 1.6;
  padding-bottom: 4px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
}

.xr-header {
  border-bottom: solid 1px var(--xr-border-color);
  margin-bottom: 4px;
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-obj-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type,
.xr-group-box-contents > label {
  color: var(--xr-font-color2);
  display: block;
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
  margin-block-start: 0;
  margin-block-end: 0;
}

.xr-section-item {
  display: contents;
}

.xr-section-item > input,
.xr-group-box-contents > input,
.xr-array-wrap > input {
  display: block;
  opacity: 0;
  height: 0;
  margin: 0;
}

.xr-section-item > input + label,
.xr-var-item > input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item > input:enabled + label,
.xr-var-item > input:enabled + label,
.xr-array-wrap > input:enabled + label,
.xr-group-box-contents > input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item > input:focus-visible + label,
.xr-var-item > input:focus-visible + label,
.xr-array-wrap > input:focus-visible + label,
.xr-group-box-contents > input:focus-visible + label {
  outline: auto;
}

.xr-section-item > input:enabled + label:hover,
.xr-var-item > input:enabled + label:hover,
.xr-array-wrap > input:enabled + label:hover,
.xr-group-box-contents > input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
  white-space: nowrap;
}

.xr-section-summary > em {
  font-weight: normal;
}

.xr-span-grid {
  grid-column-end: -1;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.3em;
}

.xr-group-box-contents > input:checked + label > span {
  display: inline-block;
  padding-left: 0.6em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details,
.xr-group-box-contents > label {
  padding-top: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  grid-column: 1 / -1;
  margin-top: 4px;
  margin-bottom: 5px;
}

.xr-section-summary-in ~ .xr-section-details {
  display: none;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-children {
  display: inline-grid;
  grid-template-columns: 100%;
  grid-column: 1 / -1;
  padding-top: 4px;
}

.xr-group-box {
  display: inline-grid;
  grid-template-columns: 0px 30px auto;
}

.xr-group-box-vline {
  grid-column-start: 1;
  border-right: 0.2em solid;
  border-color: var(--xr-border-color);
  width: 0px;
}

.xr-group-box-hline {
  grid-column-start: 2;
  grid-row-start: 1;
  height: 1em;
  width: 26px;
  border-bottom: 0.2em solid;
  border-color: var(--xr-border-color);
}

.xr-group-box-contents {
  grid-column-start: 3;
  padding-bottom: 4px;
}

.xr-group-box-contents > label::before {
  content: "📂";
  padding-right: 0.3em;
}

.xr-group-box-contents > input:checked + label::before {
  content: "📁";
}

.xr-group-box-contents > input:checked + label {
  padding-bottom: 0px;
}

.xr-group-box-contents > input:checked ~ .xr-sections {
  display: none;
}

.xr-group-box-contents > input + label > span {
  display: none;
}

.xr-group-box-ellipsis {
  font-size: 1.4em;
  font-weight: 900;
  color: var(--xr-font-color2);
  letter-spacing: 0.15em;
  cursor: default;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 12MB
Dimensions:           (date: 179, sample: 4000)
Coordinates:
  * date              (date) datetime64[ms] 1kB 2018-04-02 ... 2021-08-30
  * sample            (sample) object 32kB MultiIndex
  * chain             (sample) int64 32kB 0 0 0 0 0 0 0 0 0 ... 3 3 3 3 3 3 3 3
  * draw              (sample) int64 32kB 0 1 2 3 4 5 ... 995 996 997 998 999
Data variables:
    y                 (date, sample) float64 6MB 0.4378 0.5057 ... 0.5428 0.5902
    y_original_scale  (date, sample) float64 6MB 3.902 4.508 ... 4.839 5.261
Attributes:
    created_at:                 2026-02-25T20:16:52.883157+00:00
    arviz_version:              0.23.1
    inference_library:          pymc
    inference_library_version:  5.27.1</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-a99f1020-09f6-4a7f-93f5-f861bf277c87" class="xr-section-summary-in" type="checkbox" disabled=""><label for="section-a99f1020-09f6-4a7f-93f5-f861bf277c87" class="xr-section-summary">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">date</span>: 179</li><li><span class="xr-has-index">sample</span>: 4000</li></ul></div></li><li class="xr-section-item"><input id="section-8c9ff7bd-00da-4979-a0d6-085e32fde9c6" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-8c9ff7bd-00da-4979-a0d6-085e32fde9c6" class="xr-section-summary" title="Expand/collapse section">Coordinates: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">date</span></div><div class="xr-var-dims">(date)</div><div class="xr-var-dtype">datetime64[ms]</div><div class="xr-var-preview xr-preview">2018-04-02 ... 2021-08-30</div><input id="attrs-5ac7fbfc-84c4-45b5-9b04-bd16706459e0" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-5ac7fbfc-84c4-45b5-9b04-bd16706459e0" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-81381a58-a148-4c29-a4a4-5456a907565b" class="xr-var-data-in" type="checkbox"><label for="data-81381a58-a148-4c29-a4a4-5456a907565b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['2018-04-02T00:00:00.000', '2018-04-09T00:00:00.000',
       '2018-04-16T00:00:00.000', '2018-04-23T00:00:00.000',
       '2018-04-30T00:00:00.000', '2018-05-07T00:00:00.000',
       '2018-05-14T00:00:00.000', '2018-05-21T00:00:00.000',
       '2018-05-28T00:00:00.000', '2018-06-04T00:00:00.000',
       '2018-06-11T00:00:00.000', '2018-06-18T00:00:00.000',
       '2018-06-25T00:00:00.000', '2018-07-02T00:00:00.000',
       '2018-07-09T00:00:00.000', '2018-07-16T00:00:00.000',
       '2018-07-23T00:00:00.000', '2018-07-30T00:00:00.000',
       '2018-08-06T00:00:00.000', '2018-08-13T00:00:00.000',
       '2018-08-20T00:00:00.000', '2018-08-27T00:00:00.000',
       '2018-09-03T00:00:00.000', '2018-09-10T00:00:00.000',
       '2018-09-17T00:00:00.000', '2018-09-24T00:00:00.000',
       '2018-10-01T00:00:00.000', '2018-10-08T00:00:00.000',
       '2018-10-15T00:00:00.000', '2018-10-22T00:00:00.000',
       '2018-10-29T00:00:00.000', '2018-11-05T00:00:00.000',
       '2018-11-12T00:00:00.000', '2018-11-19T00:00:00.000',
       '2018-11-26T00:00:00.000', '2018-12-03T00:00:00.000',
       '2018-12-10T00:00:00.000', '2018-12-17T00:00:00.000',
       '2018-12-24T00:00:00.000', '2018-12-31T00:00:00.000',
       '2019-01-07T00:00:00.000', '2019-01-14T00:00:00.000',
       '2019-01-21T00:00:00.000', '2019-01-28T00:00:00.000',
       '2019-02-04T00:00:00.000', '2019-02-11T00:00:00.000',
       '2019-02-18T00:00:00.000', '2019-02-25T00:00:00.000',
       '2019-03-04T00:00:00.000', '2019-03-11T00:00:00.000',
       '2019-03-18T00:00:00.000', '2019-03-25T00:00:00.000',
       '2019-04-01T00:00:00.000', '2019-04-08T00:00:00.000',
       '2019-04-15T00:00:00.000', '2019-04-22T00:00:00.000',
       '2019-04-29T00:00:00.000', '2019-05-06T00:00:00.000',
       '2019-05-13T00:00:00.000', '2019-05-20T00:00:00.000',
       '2019-05-27T00:00:00.000', '2019-06-03T00:00:00.000',
       '2019-06-10T00:00:00.000', '2019-06-17T00:00:00.000',
       '2019-06-24T00:00:00.000', '2019-07-01T00:00:00.000',
       '2019-07-08T00:00:00.000', '2019-07-15T00:00:00.000',
       '2019-07-22T00:00:00.000', '2019-07-29T00:00:00.000',
       '2019-08-05T00:00:00.000', '2019-08-12T00:00:00.000',
       '2019-08-19T00:00:00.000', '2019-08-26T00:00:00.000',
       '2019-09-02T00:00:00.000', '2019-09-09T00:00:00.000',
       '2019-09-16T00:00:00.000', '2019-09-23T00:00:00.000',
       '2019-09-30T00:00:00.000', '2019-10-07T00:00:00.000',
       '2019-10-14T00:00:00.000', '2019-10-21T00:00:00.000',
       '2019-10-28T00:00:00.000', '2019-11-04T00:00:00.000',
       '2019-11-11T00:00:00.000', '2019-11-18T00:00:00.000',
       '2019-11-25T00:00:00.000', '2019-12-02T00:00:00.000',
       '2019-12-09T00:00:00.000', '2019-12-16T00:00:00.000',
       '2019-12-23T00:00:00.000', '2019-12-30T00:00:00.000',
       '2020-01-06T00:00:00.000', '2020-01-13T00:00:00.000',
       '2020-01-20T00:00:00.000', '2020-01-27T00:00:00.000',
       '2020-02-03T00:00:00.000', '2020-02-10T00:00:00.000',
       '2020-02-17T00:00:00.000', '2020-02-24T00:00:00.000',
       '2020-03-02T00:00:00.000', '2020-03-09T00:00:00.000',
       '2020-03-16T00:00:00.000', '2020-03-23T00:00:00.000',
       '2020-03-30T00:00:00.000', '2020-04-06T00:00:00.000',
       '2020-04-13T00:00:00.000', '2020-04-20T00:00:00.000',
       '2020-04-27T00:00:00.000', '2020-05-04T00:00:00.000',
       '2020-05-11T00:00:00.000', '2020-05-18T00:00:00.000',
       '2020-05-25T00:00:00.000', '2020-06-01T00:00:00.000',
       '2020-06-08T00:00:00.000', '2020-06-15T00:00:00.000',
       '2020-06-22T00:00:00.000', '2020-06-29T00:00:00.000',
       '2020-07-06T00:00:00.000', '2020-07-13T00:00:00.000',
       '2020-07-20T00:00:00.000', '2020-07-27T00:00:00.000',
       '2020-08-03T00:00:00.000', '2020-08-10T00:00:00.000',
       '2020-08-17T00:00:00.000', '2020-08-24T00:00:00.000',
       '2020-08-31T00:00:00.000', '2020-09-07T00:00:00.000',
       '2020-09-14T00:00:00.000', '2020-09-21T00:00:00.000',
       '2020-09-28T00:00:00.000', '2020-10-05T00:00:00.000',
       '2020-10-12T00:00:00.000', '2020-10-19T00:00:00.000',
       '2020-10-26T00:00:00.000', '2020-11-02T00:00:00.000',
       '2020-11-09T00:00:00.000', '2020-11-16T00:00:00.000',
       '2020-11-23T00:00:00.000', '2020-11-30T00:00:00.000',
       '2020-12-07T00:00:00.000', '2020-12-14T00:00:00.000',
       '2020-12-21T00:00:00.000', '2020-12-28T00:00:00.000',
       '2021-01-04T00:00:00.000', '2021-01-11T00:00:00.000',
       '2021-01-18T00:00:00.000', '2021-01-25T00:00:00.000',
       '2021-02-01T00:00:00.000', '2021-02-08T00:00:00.000',
       '2021-02-15T00:00:00.000', '2021-02-22T00:00:00.000',
       '2021-03-01T00:00:00.000', '2021-03-08T00:00:00.000',
       '2021-03-15T00:00:00.000', '2021-03-22T00:00:00.000',
       '2021-03-29T00:00:00.000', '2021-04-05T00:00:00.000',
       '2021-04-12T00:00:00.000', '2021-04-19T00:00:00.000',
       '2021-04-26T00:00:00.000', '2021-05-03T00:00:00.000',
       '2021-05-10T00:00:00.000', '2021-05-17T00:00:00.000',
       '2021-05-24T00:00:00.000', '2021-05-31T00:00:00.000',
       '2021-06-07T00:00:00.000', '2021-06-14T00:00:00.000',
       '2021-06-21T00:00:00.000', '2021-06-28T00:00:00.000',
       '2021-07-05T00:00:00.000', '2021-07-12T00:00:00.000',
       '2021-07-19T00:00:00.000', '2021-07-26T00:00:00.000',
       '2021-08-02T00:00:00.000', '2021-08-09T00:00:00.000',
       '2021-08-16T00:00:00.000', '2021-08-23T00:00:00.000',
       '2021-08-30T00:00:00.000'], dtype='datetime64[ms]')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">sample</span></div><div class="xr-var-dims">(sample)</div><div class="xr-var-dtype">object</div><div class="xr-var-preview xr-preview">MultiIndex</div><input id="attrs-3eb3bb72-69be-4c3f-906d-46aeed94d82f" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-3eb3bb72-69be-4c3f-906d-46aeed94d82f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-bae844ce-c0d2-4714-a066-a2b87a8744ad" class="xr-var-data-in" type="checkbox"><label for="data-bae844ce-c0d2-4714-a066-a2b87a8744ad" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>[4000 values with dtype=object]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">chain</span></div><div class="xr-var-dims">(sample)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 0 0 0 0 0 0 0 ... 3 3 3 3 3 3 3 3</div><input id="attrs-bdcf680b-b0cb-4741-9053-0c456de0c842" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-bdcf680b-b0cb-4741-9053-0c456de0c842" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-b169d8a5-6706-44f0-967d-653df3fded2b" class="xr-var-data-in" type="checkbox"><label for="data-b169d8a5-6706-44f0-967d-653df3fded2b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>[4000 values with dtype=int64]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">draw</span></div><div class="xr-var-dims">(sample)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">0 1 2 3 4 5 ... 995 996 997 998 999</div><input id="attrs-256615c5-9362-4e19-8448-2236383fe995" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-256615c5-9362-4e19-8448-2236383fe995" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-5b17209c-68bb-4470-851b-cf429ba2875e" class="xr-var-data-in" type="checkbox"><label for="data-5b17209c-68bb-4470-851b-cf429ba2875e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>[4000 values with dtype=int64]</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-385b3f5b-3244-4148-aaf4-cd008a749f1f" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-385b3f5b-3244-4148-aaf4-cd008a749f1f" class="xr-section-summary" title="Expand/collapse section">Data variables: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>y</span></div><div class="xr-var-dims">(date, sample)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.4378 0.5057 ... 0.5428 0.5902</div><input id="attrs-c415158b-2609-46b8-826d-dde3f499abf0" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-c415158b-2609-46b8-826d-dde3f499abf0" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-10f06419-0b8a-48ed-a308-c8ff1fde888e" class="xr-var-data-in" type="checkbox"><label for="data-10f06419-0b8a-48ed-a308-c8ff1fde888e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[0.43776526, 0.50568604, 0.42926228, ..., 0.47517244, 0.44520193,
        0.49580371],
       [0.42683049, 0.4168929 , 0.48780939, ..., 0.38822866, 0.42278387,
        0.414668  ],
       [0.52485926, 0.52758351, 0.51460977, ..., 0.48049168, 0.51044802,
        0.4718091 ],
       ...,
       [0.56350496, 0.63080583, 0.563573  , ..., 0.57312552, 0.57643567,
        0.58462201],
       [0.50384743, 0.51897917, 0.5522076 , ..., 0.50406268, 0.49720516,
        0.54991532],
       [0.63388255, 0.58637391, 0.50774235, ..., 0.52961196, 0.54282416,
        0.59019809]], shape=(179, 4000))</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>y_original_scale</span></div><div class="xr-var-dims">(date, sample)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">3.902 4.508 3.826 ... 4.839 5.261</div><input id="attrs-4553dbc4-071d-4f66-ac6a-cc74bdad4395" class="xr-var-attrs-in" type="checkbox" disabled=""><label for="attrs-4553dbc4-071d-4f66-ac6a-cc74bdad4395" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use href="#icon-file-text2"></use></svg></label><input id="data-4970674c-7e04-42b6-a968-057b9a0411ee" class="xr-var-data-in" type="checkbox"><label for="data-4970674c-7e04-42b6-a968-057b9a0411ee" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[3.90223886, 4.50768468, 3.82644337, ..., 4.23568643, 3.96852933,
        4.41959357],
       [3.80476642, 3.71618275, 4.3483322 , ..., 3.46066973, 3.76869477,
        3.69634998],
       [4.67859471, 4.70287867, 4.58723079, ..., 4.28310212, 4.55013289,
        4.20570566],
       ...,
       [5.0230824 , 5.62300227, 5.02368892, ..., 5.10884009, 5.1383467 ,
        5.21131973],
       [4.49129526, 4.62617954, 4.92237779, ..., 4.49321398, 4.43208607,
        4.9019444 ],
       [5.65042815, 5.22693615, 4.52601458, ..., 4.72096026, 4.83873379,
        5.26102492]], shape=(179, 4000))</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-91443a0c-fe5c-4104-b2b7-c4fa60a0532a" class="xr-section-summary-in" type="checkbox" checked=""><label for="section-91443a0c-fe5c-4104-b2b7-c4fa60a0532a" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>created_at :</span></dt><dd>2026-02-25T20:16:52.883157+00:00</dd><dt><span>arviz_version :</span></dt><dd>0.23.1</dd><dt><span>inference_library :</span></dt><dd>pymc</dd><dt><span>inference_library_version :</span></dt><dd>5.27.1</dd></dl></div></li></ul></div></div>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> mmm.plot.posterior_predictive(var<span class="op">=</span>[<span class="st">"y_original_scale"</span>], hdi_prob<span class="op">=</span><span class="fl">0.94</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>sns.lineplot(</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>df, x<span class="op">=</span><span class="st">"date_week"</span>, y<span class="op">=</span><span class="st">"y"</span>, color<span class="op">=</span><span class="st">"black"</span>, label<span class="op">=</span><span class="st">"Observed"</span>, ax<span class="op">=</span>axes[<span class="dv">0</span>][<span class="dv">0</span>]</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mock-blog-post_files/figure-html/unnamed-chunk-14-23.png" class="img-fluid figure-img" width="799"></p>
</figure>
</div>
</div>
</div>
<p>Importatly the entire bit of MMMs are that we can see the channel contributions over time. Importantly we want to see how impactful our spending campaign in comparision to our baseline. If say we spend 2 million dollars worth of ads across our two channels and we only see a lift of about $500,000 across the two channels. Does the additional spend actual meaningfully shift sales?If you are Coke then probably not but if you are upstart soda company this may be a potentially huge lift.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>base_contributions <span class="op">=</span> (</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    mmm.idata[<span class="st">"posterior"</span>][<span class="st">"intercept_contribution_original_scale"</span>]</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> mmm.idata[<span class="st">"posterior"</span>][<span class="st">"control_contribution_original_scale"</span>].<span class="bu">sum</span>(dim<span class="op">=</span><span class="st">"control"</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> mmm.idata[<span class="st">"posterior"</span>][<span class="st">"yearly_seasonality_contribution_original_scale"</span>]</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>channel_x1 <span class="op">=</span> mmm.idata[<span class="st">"posterior"</span>][<span class="st">"channel_contribution_original_scale"</span>].sel(</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    channel<span class="op">=</span><span class="st">"x1"</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>channel_x2 <span class="op">=</span> mmm.idata[<span class="st">"posterior"</span>][<span class="st">"channel_contribution_original_scale"</span>].sel(</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    channel<span class="op">=</span><span class="st">"x2"</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Stack the contributions</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> mmm.model.coords[<span class="st">"date"</span>]</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>base_mean <span class="op">=</span> base_contributions.mean(dim<span class="op">=</span>(<span class="st">"chain"</span>, <span class="st">"draw"</span>)).to_numpy()</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>x1_mean <span class="op">=</span> channel_x1.mean(dim<span class="op">=</span>(<span class="st">"chain"</span>, <span class="st">"draw"</span>)).to_numpy()</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>x2_mean <span class="op">=</span> channel_x2.mean(dim<span class="op">=</span>(<span class="st">"chain"</span>, <span class="st">"draw"</span>)).to_numpy()</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>ax.fill_between(dates, <span class="dv">0</span>, base_mean, alpha<span class="op">=</span><span class="fl">0.7</span>, color<span class="op">=</span><span class="st">"gray"</span>, label<span class="op">=</span><span class="st">"Base"</span>)</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>ax.fill_between(</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>    dates,</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>    base_mean,</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>    base_mean <span class="op">+</span> x1_mean,</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>    alpha<span class="op">=</span><span class="fl">0.7</span>,</span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"C0"</span>,</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"Channel x1"</span>,</span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>ax.fill_between(</span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>    dates,</span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>    base_mean <span class="op">+</span> x1_mean,</span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a>    base_mean <span class="op">+</span> x1_mean <span class="op">+</span> x2_mean,</span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>    alpha<span class="op">=</span><span class="fl">0.7</span>,</span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"C1"</span>,</span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"Channel x2"</span>,</span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot observed</span></span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a>sns.lineplot(data<span class="op">=</span>df, x<span class="op">=</span><span class="st">"date_week"</span>, y<span class="op">=</span><span class="st">"y"</span>, color<span class="op">=</span><span class="st">"black"</span>, label<span class="op">=</span><span class="st">"Observed"</span>, ax<span class="op">=</span>ax)</span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a>ax.legend(loc<span class="op">=</span><span class="st">"upper left"</span>)</span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a>ax.<span class="bu">set</span>(xlabel<span class="op">=</span><span class="st">"date"</span>, ylabel<span class="op">=</span><span class="st">"y"</span>)</span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a>fig.suptitle(<span class="st">"Contribution Breakdown over Time"</span>, fontsize<span class="op">=</span><span class="dv">16</span>, fontweight<span class="op">=</span><span class="st">"bold"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mock-blog-post_files/figure-html/unnamed-chunk-15-25.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<p>It looks like we get a reasonable return on spending across both channels. It seems like channel two is giving us a bit more than channel 1.</p>
</section>
<section id="the-problem" class="level2">
<h2 class="anchored" data-anchor-id="the-problem">The Problem</h2>
<p>There are a lot of practical friction points with using the <code>MMM</code> class from <code>PyMC-Marketing</code> and my particular dataset. The big practical impediment is how time works. For sales data you are still going to see some level of sales each of the 52 weeks of the year. Even if one person buys something you are still getting a data point. Practically since we are jut modeling the regular season there are huge gaps in the time-series where nothing is happening. To give you a sense of what this looks like we are just going to bring our NFL data and plot it next to our fake sales data.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nflreadpy <span class="im">import</span> load_pbp</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.dates <span class="im">as</span> mdates</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>raw_nfl <span class="op">=</span> pl.read_parquet(<span class="st">'blog-post-data/pbp-data.parquet'</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>make_explosives <span class="op">=</span> (</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    raw_nfl</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">filter</span>(pl.col(<span class="st">'season_type'</span>) <span class="op">==</span> <span class="st">'REG'</span>)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    .select(</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'game_id'</span>, <span class="st">'game_date'</span>, <span class="st">'posteam'</span> ,<span class="st">'play_type_nfl'</span>, <span class="st">'receiving_yards'</span>, <span class="st">'rushing_yards'</span>)</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">filter</span>(</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>        (pl.col(<span class="st">'play_type_nfl'</span>).is_in([<span class="st">'PASS'</span>, <span class="st">'RUSH'</span>])) <span class="op">&amp;</span> </span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>        (pl.col(<span class="st">'posteam'</span>) <span class="op">==</span> <span class="st">'SF'</span>)</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>        pl.when(</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>            (pl.col(<span class="st">'play_type_nfl'</span>) <span class="op">==</span> <span class="st">'PASS'</span>) <span class="op">&amp;</span> (pl.col(<span class="st">'receiving_yards'</span>) <span class="op">&gt;=</span> <span class="dv">20</span>)</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>        .then(<span class="dv">1</span>)</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>        .when(</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>            (pl.col(<span class="st">'play_type_nfl'</span>) <span class="op">==</span> <span class="st">'RUSH'</span>) <span class="op">&amp;</span> (pl.col(<span class="st">'rushing_yards'</span>) <span class="op">&gt;=</span> <span class="dv">10</span>)</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>        .then(<span class="dv">1</span>)</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>        .otherwise(<span class="dv">0</span>)</span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>        .alias(<span class="st">'is_explosive'</span>)</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'is_explosive'</span>).mean().over(<span class="st">'game_id'</span>).alias(<span class="st">'explosive_play_rate'</span>), </span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'game_date'</span>).<span class="bu">str</span>.to_date()</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>    .unique(subset <span class="op">=</span> <span class="st">'game_id'</span>)</span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>    .sort(<span class="st">'game_date'</span>)</span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(nrows <span class="op">=</span> <span class="dv">2</span>)</span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].plot(</span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'date_week'</span>], df[<span class="st">'y'</span>]</span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Fake Sales Data'</span>)</span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].plot(</span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a>    make_explosives[<span class="st">'game_date'</span>], make_explosives[<span class="st">'explosive_play_rate'</span>]</span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'SF Explosive Play Rate'</span>)</span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">'Explosive Play Rate'</span>)</span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">'Game Date'</span>)</span>
<span id="cb25-50"><a href="#cb25-50" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].xaxis.set_major_formatter(mdates.DateFormatter(<span class="st">'%Y-%m'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mock-blog-post_files/figure-html/unnamed-chunk-16-27.png" class="img-fluid figure-img" width="601"></p>
</figure>
</div>
</div>
</div>
<p>The important thing for now is to focus on the big gaps between seasons. Right now the line is simply trying to interpolate between seasons. This is just a general thing that these plotting libraries will do.</p>
<p>Why is this a problem? From a theoretical standpoint what happens during the season is important from week to week play callers are going to adapt to their schedule, player availability, how other teams are playing them, and succesful offensive concepts from others. The other important is does not capture what we care about between seasons, their tenure length does. Successful teams tend to suffer from brain drain. Right now there are 10 NFL head coaches that were either on Kyle Shanhan or Sean McVay’s staff at some point. This is not including current offensive coordinators like Mike McDaniel or Bobby Slowik who had previously worked on their staffs. As a coaching staff starts to experience brain drain we may start to see less returns in the area that they oversaw.</p>
<p>There is a practical tension on the implementation side. Marketing campaigns are naturally going to be on calendar time without huge gaps in the marketing campaign. Naturally, the implentation of and MMM by <code>PyMC</code> is going to make the sane decision to use valid date times. We could theoretically use the game date in the classs method but that results a in weird looking trends. Just passing an integer to the class method results in errors.</p>
</section>
</section>
<section id="building-the-model" class="level1">
<h1>Building The Model</h1>
<p>If you skipped the non-football section I will give you a brief summary. One of the main motivations to use a MMM is that there are some similarities that make this model interesting. The first being that we expect the returns of new personnel formations and plays out of these formations to decay quickly. The second being that there is a theoretical saturation point where you are just trying to squeeze blood from a stone. In my own head that sounds a lot like the dynamics in a Football season. In this section I am going to go through the full model building process and the Bayesian workflow that led me to the final model. Then, I promise, I will get to the insights about play callers.</p>
<section id="building-the-football-data" class="level2">
<h2 class="anchored" data-anchor-id="building-the-football-data">Building the Football Data</h2>
<p>For the entire rest of the blog post I rely on data provided by the <code>nflverse</code> team. Specifically we are going to look at the participation data from 2017-2024. Prior to 2023 this data were provided by NFL NGS while post 2023 the data are provided by FTN.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> Specifically we are interested in the offensive formation columns and defensive personnel. To give you a sense of what this looks like I provide an example for the first 5 plays of the Titans vs Bears game in the 2024 season.</p>
<p>The first order of business is to only include offensive plays this is pretty easy since there is a little flag to indicate whether it was a run, pass, special teams play etc. As far as regexs go this was a pretty simple one, but there is one tripping point. Typically we count the fullback as a running packing in these personnel packages, but in a much appreciated effort to keep the raw data intact they are recorded by their roster position. So for the 49ers who typically run 21 personnel you get this.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>examp2 <span class="op">=</span> (</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    load_participation()</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">filter</span>((pl.col(<span class="st">'defenders_in_box'</span>) <span class="op">!=</span> <span class="dv">0</span>) <span class="op">&amp;</span> (pl.col(<span class="st">'possession_team'</span>) <span class="op">==</span> <span class="st">'SF'</span>))</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    .select(pl.col(<span class="st">"offense_personnel"</span>))</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    .head(n <span class="op">=</span> <span class="dv">5</span>)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'offense_personnel'</span>).<span class="bu">str</span>.extract(<span class="st">"(</span><span class="ch">\\</span><span class="st">d</span><span class="sc">{1}</span><span class="st"> RB)"</span>).<span class="bu">str</span>.replace(<span class="st">'RB'</span>,<span class="st">''</span>).<span class="bu">str</span>.strip_chars_end().alias(<span class="st">'n_rbs'</span>),</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'offense_personnel'</span>).<span class="bu">str</span>.extract(<span class="st">"(</span><span class="ch">\\</span><span class="st">d</span><span class="sc">{1}</span><span class="st"> TE)"</span>).<span class="bu">str</span>.replace(<span class="st">'TE'</span>,<span class="st">''</span>).<span class="bu">str</span>.strip_chars_end().alias(<span class="st">'n_tes'</span>), </span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'offense_personnel'</span>).<span class="bu">str</span>.extract(<span class="st">"(</span><span class="ch">\\</span><span class="st">d</span><span class="sc">{1}</span><span class="st"> FB)"</span>).<span class="bu">str</span>.replace(<span class="st">'FB'</span>,<span class="st">''</span>).<span class="bu">str</span>.strip_chars_end().alias(<span class="st">'n_fb'</span>),</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>        pl.concat_str([</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>            pl.col(<span class="st">'n_rbs'</span>), </span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>            pl.col(<span class="st">'n_tes'</span>)</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>        ]).alias(<span class="st">'personnel_grouping'</span>)</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>GT(examp2.drop([<span class="st">'n_rbs'</span>, <span class="st">'n_tes'</span>, <span class="st">'n_fb'</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="eruvrnfmjx" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#eruvrnfmjx table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#eruvrnfmjx thead, tbody, tfoot, tr, td, th { border-style: none; }
 tr { background-color: transparent; }
#eruvrnfmjx p { margin: 0; padding: 0; }
 #eruvrnfmjx .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }
 #eruvrnfmjx .gt_caption { padding-top: 4px; padding-bottom: 4px; }
 #eruvrnfmjx .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }
 #eruvrnfmjx .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }
 #eruvrnfmjx .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #eruvrnfmjx .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #eruvrnfmjx .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #eruvrnfmjx .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }
 #eruvrnfmjx .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }
 #eruvrnfmjx .gt_column_spanner_outer:first-child { padding-left: 0; }
 #eruvrnfmjx .gt_column_spanner_outer:last-child { padding-right: 0; }
 #eruvrnfmjx .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }
 #eruvrnfmjx .gt_spanner_row { border-bottom-style: hidden; }
 #eruvrnfmjx .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }
 #eruvrnfmjx .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; }
 #eruvrnfmjx .gt_from_md> :first-child { margin-top: 0; }
 #eruvrnfmjx .gt_from_md> :last-child { margin-bottom: 0; }
 #eruvrnfmjx .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; }
 #eruvrnfmjx .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }
 #eruvrnfmjx .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }
 #eruvrnfmjx .gt_row_group_first td { border-top-width: 2px; }
 #eruvrnfmjx .gt_row_group_first th { border-top-width: 2px; }
 #eruvrnfmjx .gt_striped { color: #333333; background-color: #F4F4F4; }
 #eruvrnfmjx .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #eruvrnfmjx .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; }
 #eruvrnfmjx .gt_first_grand_summary_row_bottom { border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; }
 #eruvrnfmjx .gt_last_grand_summary_row_top { border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; }
 #eruvrnfmjx .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }
 #eruvrnfmjx .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }
 #eruvrnfmjx .gt_left { text-align: left; }
 #eruvrnfmjx .gt_center { text-align: center; }
 #eruvrnfmjx .gt_right { text-align: right; font-variant-numeric: tabular-nums; }
 #eruvrnfmjx .gt_font_normal { font-weight: normal; }
 #eruvrnfmjx .gt_font_bold { font-weight: bold; }
 #eruvrnfmjx .gt_font_italic { font-style: italic; }
 #eruvrnfmjx .gt_super { font-size: 65%; }
 #eruvrnfmjx .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }
 #eruvrnfmjx .gt_asterisk { font-size: 100%; vertical-align: 0; }
 
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="offense_personnel" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">offense_personnel</th>
<th id="personnel_grouping" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">personnel_grouping</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left">1 C, 1 FB, 2 G, 1 QB, 1 RB, 2 T, 1 TE, 2 WR</td>
<td class="gt_row gt_left">11</td>
</tr>
<tr class="even">
<td class="gt_row gt_left">1 C, 1 FB, 2 G, 1 QB, 1 RB, 2 T, 1 TE, 2 WR</td>
<td class="gt_row gt_left">11</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">1 C, 2 G, 1 QB, 1 RB, 2 T, 1 TE, 3 WR</td>
<td class="gt_row gt_left">11</td>
</tr>
<tr class="even">
<td class="gt_row gt_left">1 C, 1 FB, 2 G, 1 QB, 2 T, 1 TE, 3 WR</td>
<td class="gt_row gt_left">None</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">1 C, 1 FB, 2 G, 1 QB, 2 T, 1 TE, 3 WR</td>
<td class="gt_row gt_left">None</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<p>The simple trick to this is really just to add the RBs and Fullbacks together then convert those back to strings.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>fixed <span class="op">=</span> (</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    examp2 </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>        (pl.col(<span class="st">'n_rbs'</span>).cast(pl.Int64).fill_null(<span class="dv">0</span>) <span class="op">+</span> pl.col(<span class="st">'n_fb'</span>).cast(pl.Int64).fill_null(<span class="dv">0</span>)).alias(<span class="st">"total_rbs"</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    .with_columns(</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>        pl.concat_str(</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>            [   pl.lit(<span class="st">'personnel_'</span>),</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>                pl.col(<span class="st">'total_rbs'</span>).cast(pl.String),</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>                pl.col(<span class="st">'n_tes'</span>)</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>            ]</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>        ).alias(<span class="st">'personnel_grouping_fixed'</span>)</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    ).drop([<span class="st">'n_rbs'</span>, <span class="st">'n_tes'</span>, <span class="st">'n_fb'</span>, <span class="st">'total_rbs'</span>])</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>GT(fixed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="wlxcvgzgbr" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#wlxcvgzgbr table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#wlxcvgzgbr thead, tbody, tfoot, tr, td, th { border-style: none; }
 tr { background-color: transparent; }
#wlxcvgzgbr p { margin: 0; padding: 0; }
 #wlxcvgzgbr .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }
 #wlxcvgzgbr .gt_caption { padding-top: 4px; padding-bottom: 4px; }
 #wlxcvgzgbr .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }
 #wlxcvgzgbr .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }
 #wlxcvgzgbr .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #wlxcvgzgbr .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #wlxcvgzgbr .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #wlxcvgzgbr .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }
 #wlxcvgzgbr .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }
 #wlxcvgzgbr .gt_column_spanner_outer:first-child { padding-left: 0; }
 #wlxcvgzgbr .gt_column_spanner_outer:last-child { padding-right: 0; }
 #wlxcvgzgbr .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }
 #wlxcvgzgbr .gt_spanner_row { border-bottom-style: hidden; }
 #wlxcvgzgbr .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }
 #wlxcvgzgbr .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; }
 #wlxcvgzgbr .gt_from_md> :first-child { margin-top: 0; }
 #wlxcvgzgbr .gt_from_md> :last-child { margin-bottom: 0; }
 #wlxcvgzgbr .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; }
 #wlxcvgzgbr .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }
 #wlxcvgzgbr .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }
 #wlxcvgzgbr .gt_row_group_first td { border-top-width: 2px; }
 #wlxcvgzgbr .gt_row_group_first th { border-top-width: 2px; }
 #wlxcvgzgbr .gt_striped { color: #333333; background-color: #F4F4F4; }
 #wlxcvgzgbr .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #wlxcvgzgbr .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; }
 #wlxcvgzgbr .gt_first_grand_summary_row_bottom { border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; }
 #wlxcvgzgbr .gt_last_grand_summary_row_top { border-bottom-style: double; border-bottom-width: 6px; border-bottom-color: #D3D3D3; }
 #wlxcvgzgbr .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }
 #wlxcvgzgbr .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }
 #wlxcvgzgbr .gt_left { text-align: left; }
 #wlxcvgzgbr .gt_center { text-align: center; }
 #wlxcvgzgbr .gt_right { text-align: right; font-variant-numeric: tabular-nums; }
 #wlxcvgzgbr .gt_font_normal { font-weight: normal; }
 #wlxcvgzgbr .gt_font_bold { font-weight: bold; }
 #wlxcvgzgbr .gt_font_italic { font-style: italic; }
 #wlxcvgzgbr .gt_super { font-size: 65%; }
 #wlxcvgzgbr .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }
 #wlxcvgzgbr .gt_asterisk { font-size: 100%; vertical-align: 0; }
 
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="offense_personnel" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">offense_personnel</th>
<th id="personnel_grouping" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">personnel_grouping</th>
<th id="personnel_grouping_fixed" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">personnel_grouping_fixed</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left">1 C, 1 FB, 2 G, 1 QB, 1 RB, 2 T, 1 TE, 2 WR</td>
<td class="gt_row gt_left">11</td>
<td class="gt_row gt_left">personnel_21</td>
</tr>
<tr class="even">
<td class="gt_row gt_left">1 C, 1 FB, 2 G, 1 QB, 1 RB, 2 T, 1 TE, 2 WR</td>
<td class="gt_row gt_left">11</td>
<td class="gt_row gt_left">personnel_21</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">1 C, 2 G, 1 QB, 1 RB, 2 T, 1 TE, 3 WR</td>
<td class="gt_row gt_left">11</td>
<td class="gt_row gt_left">personnel_11</td>
</tr>
<tr class="even">
<td class="gt_row gt_left">1 C, 1 FB, 2 G, 1 QB, 2 T, 1 TE, 3 WR</td>
<td class="gt_row gt_left">None</td>
<td class="gt_row gt_left">personnel_11</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left">1 C, 1 FB, 2 G, 1 QB, 2 T, 1 TE, 3 WR</td>
<td class="gt_row gt_left">None</td>
<td class="gt_row gt_left">personnel_11</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<p>So now these values look more sane than the ones that I initially came up with. The next step is to build the spend share variables and define the relevant time dimensions for between season. I did this in R just because the <code>nflreadr</code> version of the package lets you automatically merge the play-by-play data. For the playcaller data I am using <a href="https://github.com/samhoppen/NFL_public/blob/main/data/all_playcallers.csv">Sam Hoppen’s data</a>. I just take the minimum for each play caller in the dataset and then subtract it from the current season to get their tenure. This approach does have a drawback just because we would expect that there is a bigger jump for a new playcaller from the start of their first season to the end of their first season.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> Whereas a more experienced play caller it may not actually matter that much by the time they hit year four or five. My “ad spend” is just the number of plays that each playcaller makes out of each personell grouping.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nflreadr)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">load_participation</span>(</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">seasons =</span> <span class="fu">c</span>(<span class="dv">2017</span><span class="sc">:</span><span class="dv">2025</span>),</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">include_pbp =</span> <span class="cn">TRUE</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(play_type_nfl <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'PASS'</span>, <span class="st">'RUSH'</span>), season_type <span class="sc">==</span> <span class="st">'REG'</span>)</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>play_callers <span class="ot">=</span> <span class="fu">read_csv</span>(</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://raw.githubusercontent.com/samhoppen/NFL_public/refs/heads/main/data/all_playcallers.csv"</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    season,</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    team,</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>    week,</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>    game_id,</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>    off_play_caller</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">play_caller_mins =</span> <span class="fu">min</span>(season),</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">.by =</span> off_play_caller</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">play_caller_tenure =</span> season <span class="sc">-</span> play_caller_mins) <span class="sc">|&gt;</span></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>    off_play_caller <span class="sc">%in%</span></span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(</span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Kyle Shanahan'</span>,</span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Sean McVay'</span>,</span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Ben Johnson'</span>,</span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Josh McDaniels'</span>,</span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Matt LaFleur"</span>,</span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Mike McDaniel'</span>,</span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Kevin O'Conell"</span>,</span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Andy Reid'</span>,</span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Liam Coen'</span></span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_out</span>(season <span class="sc">==</span> <span class="dv">2026</span>)</span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true" tabindex="-1"></a>add_play_callers <span class="ot">=</span> df <span class="sc">|&gt;</span></span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb28-45"><a href="#cb28-45" aria-hidden="true" tabindex="-1"></a>    play_callers,</span>
<span id="cb28-46"><a href="#cb28-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">join_by</span>(nflverse_game_id <span class="sc">==</span> game_id, season, week, possession_team <span class="sc">==</span> team)</span>
<span id="cb28-47"><a href="#cb28-47" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb28-48"><a href="#cb28-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-49"><a href="#cb28-49" aria-hidden="true" tabindex="-1"></a>make_snap_shares <span class="ot">=</span> add_play_callers <span class="sc">|&gt;</span></span>
<span id="cb28-50"><a href="#cb28-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-51"><a href="#cb28-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_tes =</span> <span class="fu">str_extract</span>(offense_personnel, <span class="st">"</span><span class="sc">\\</span><span class="st">d+ TE"</span>),</span>
<span id="cb28-52"><a href="#cb28-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_rbs =</span> <span class="fu">str_extract</span>(offense_personnel, <span class="st">"</span><span class="sc">\\</span><span class="st">d+ RB"</span>),</span>
<span id="cb28-53"><a href="#cb28-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_fbs =</span> <span class="fu">str_extract</span>(offense_personnel, <span class="st">"</span><span class="sc">\\</span><span class="st">d+ FB"</span>),</span>
<span id="cb28-54"><a href="#cb28-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(n_tes, n_rbs, n_fbs), \(x) <span class="fu">ifelse</span>(<span class="fu">is.na</span>(x), <span class="dv">0</span>, x)),</span>
<span id="cb28-55"><a href="#cb28-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(n_tes, n_rbs, n_fbs), \(x) <span class="fu">str_remove_all</span>(x, <span class="st">"TE|RB|FB| "</span>)),</span>
<span id="cb28-56"><a href="#cb28-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(n_rbs, n_fbs), \(x) <span class="fu">as.numeric</span>(x)),</span>
<span id="cb28-57"><a href="#cb28-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_rbs =</span> <span class="fu">as.character</span>(n_rbs <span class="sc">+</span> n_fbs),</span>
<span id="cb28-58"><a href="#cb28-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">personnel_grouping =</span> <span class="fu">as.factor</span>(<span class="fu">str_glue</span>(<span class="st">"personnel_{n_rbs}{n_tes}"</span>))</span>
<span id="cb28-59"><a href="#cb28-59" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb28-60"><a href="#cb28-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_snaps =</span> <span class="fu">n</span>(), <span class="at">.by =</span> <span class="fu">c</span>(off_play_caller, nflverse_game_id)) <span class="sc">|&gt;</span></span>
<span id="cb28-61"><a href="#cb28-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-62"><a href="#cb28-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">snaps_by_personnel =</span> <span class="fu">n</span>(),</span>
<span id="cb28-63"><a href="#cb28-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">.by =</span> <span class="fu">c</span>(off_play_caller, nflverse_game_id, personnel_grouping)</span>
<span id="cb28-64"><a href="#cb28-64" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb28-65"><a href="#cb28-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">share =</span> (snaps_by_personnel <span class="sc">/</span> total_snaps)) <span class="sc">|&gt;</span></span>
<span id="cb28-66"><a href="#cb28-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(personnel_grouping, off_play_caller) <span class="sc">|&gt;</span></span>
<span id="cb28-67"><a href="#cb28-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(nflverse_game_id, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb28-68"><a href="#cb28-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb28-69"><a href="#cb28-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb28-70"><a href="#cb28-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> personnel_grouping,</span>
<span id="cb28-71"><a href="#cb28-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> share,</span>
<span id="cb28-72"><a href="#cb28-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_fill =</span> <span class="dv">0</span>,</span>
<span id="cb28-73"><a href="#cb28-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">id_cols =</span> <span class="fu">c</span>(nflverse_game_id, off_play_caller)</span>
<span id="cb28-74"><a href="#cb28-74" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-75"><a href="#cb28-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-76"><a href="#cb28-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-77"><a href="#cb28-77" aria-hidden="true" tabindex="-1"></a>make_features <span class="ot">=</span> add_play_callers <span class="sc">|&gt;</span></span>
<span id="cb28-78"><a href="#cb28-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-79"><a href="#cb28-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_explosive =</span> <span class="fu">case_when</span>(</span>
<span id="cb28-80"><a href="#cb28-80" aria-hidden="true" tabindex="-1"></a>      play_type_nfl <span class="sc">==</span> <span class="st">'RUN'</span> <span class="sc">&amp;</span> rushing_yards <span class="sc">&gt;=</span> <span class="dv">10</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb28-81"><a href="#cb28-81" aria-hidden="true" tabindex="-1"></a>      play_type_nfl <span class="sc">==</span> <span class="st">'PASS'</span> <span class="sc">&amp;</span> receiving_yards <span class="sc">&gt;=</span> <span class="dv">20</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb28-82"><a href="#cb28-82" aria-hidden="true" tabindex="-1"></a>      <span class="at">.default =</span> <span class="dv">0</span></span>
<span id="cb28-83"><a href="#cb28-83" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb28-84"><a href="#cb28-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_pass =</span> <span class="fu">ifelse</span>(play_type_nfl <span class="sc">==</span> <span class="st">'PASS'</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb28-85"><a href="#cb28-85" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb28-86"><a href="#cb28-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(season, nflverse_game_id, off_play_caller) <span class="sc">|&gt;</span></span>
<span id="cb28-87"><a href="#cb28-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb28-88"><a href="#cb28-88" aria-hidden="true" tabindex="-1"></a>    <span class="at">success_rate =</span> <span class="fu">mean</span>(success, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb28-89"><a href="#cb28-89" aria-hidden="true" tabindex="-1"></a>    <span class="at">explosive_play_rate =</span> <span class="fu">mean</span>(is_explosive, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb28-90"><a href="#cb28-90" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_epa =</span> <span class="fu">mean</span>(epa, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb28-91"><a href="#cb28-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_defenders_in_box =</span> <span class="fu">mean</span>(defenders_in_box, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb28-92"><a href="#cb28-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_pass_rate =</span> <span class="fu">mean</span>(is_pass)</span>
<span id="cb28-93"><a href="#cb28-93" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb28-94"><a href="#cb28-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb28-95"><a href="#cb28-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-96"><a href="#cb28-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-97"><a href="#cb28-97" aria-hidden="true" tabindex="-1"></a>make_context_vars <span class="ot">=</span> add_play_callers <span class="sc">|&gt;</span></span>
<span id="cb28-98"><a href="#cb28-98" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-99"><a href="#cb28-99" aria-hidden="true" tabindex="-1"></a>    <span class="at">offense_score =</span> <span class="fu">ifelse</span>(</span>
<span id="cb28-100"><a href="#cb28-100" aria-hidden="true" tabindex="-1"></a>      possession_team <span class="sc">==</span> home_team,</span>
<span id="cb28-101"><a href="#cb28-101" aria-hidden="true" tabindex="-1"></a>      total_home_score,</span>
<span id="cb28-102"><a href="#cb28-102" aria-hidden="true" tabindex="-1"></a>      total_away_score</span>
<span id="cb28-103"><a href="#cb28-103" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb28-104"><a href="#cb28-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">defense_score =</span> <span class="fu">ifelse</span>(</span>
<span id="cb28-105"><a href="#cb28-105" aria-hidden="true" tabindex="-1"></a>      defteam <span class="sc">==</span> home_team,</span>
<span id="cb28-106"><a href="#cb28-106" aria-hidden="true" tabindex="-1"></a>      total_home_score,</span>
<span id="cb28-107"><a href="#cb28-107" aria-hidden="true" tabindex="-1"></a>      total_away_score</span>
<span id="cb28-108"><a href="#cb28-108" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb28-109"><a href="#cb28-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_home_team =</span> <span class="fu">ifelse</span>(possession_team <span class="sc">==</span> home_team, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb28-110"><a href="#cb28-110" aria-hidden="true" tabindex="-1"></a>    <span class="at">diff =</span> offense_score <span class="sc">-</span> defense_score,</span>
<span id="cb28-111"><a href="#cb28-111" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_diff =</span> <span class="fu">mean</span>(diff),</span>
<span id="cb28-112"><a href="#cb28-112" aria-hidden="true" tabindex="-1"></a>    <span class="at">.by =</span> <span class="fu">c</span>(off_play_caller, nflverse_game_id)</span>
<span id="cb28-113"><a href="#cb28-113" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb28-114"><a href="#cb28-114" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(off_play_caller) <span class="sc">|&gt;</span></span>
<span id="cb28-115"><a href="#cb28-115" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(nflverse_game_id, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb28-116"><a href="#cb28-116" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb28-117"><a href="#cb28-117" aria-hidden="true" tabindex="-1"></a>    nflverse_game_id,</span>
<span id="cb28-118"><a href="#cb28-118" aria-hidden="true" tabindex="-1"></a>    game_date,</span>
<span id="cb28-119"><a href="#cb28-119" aria-hidden="true" tabindex="-1"></a>    stadium,</span>
<span id="cb28-120"><a href="#cb28-120" aria-hidden="true" tabindex="-1"></a>    roof,</span>
<span id="cb28-121"><a href="#cb28-121" aria-hidden="true" tabindex="-1"></a>    surface,</span>
<span id="cb28-122"><a href="#cb28-122" aria-hidden="true" tabindex="-1"></a>    div_game,</span>
<span id="cb28-123"><a href="#cb28-123" aria-hidden="true" tabindex="-1"></a>    home_team,</span>
<span id="cb28-124"><a href="#cb28-124" aria-hidden="true" tabindex="-1"></a>    wind,</span>
<span id="cb28-125"><a href="#cb28-125" aria-hidden="true" tabindex="-1"></a>    temp,</span>
<span id="cb28-126"><a href="#cb28-126" aria-hidden="true" tabindex="-1"></a>    is_home_team,</span>
<span id="cb28-127"><a href="#cb28-127" aria-hidden="true" tabindex="-1"></a>    avg_diff,</span>
<span id="cb28-128"><a href="#cb28-128" aria-hidden="true" tabindex="-1"></a>    off_play_caller,</span>
<span id="cb28-129"><a href="#cb28-129" aria-hidden="true" tabindex="-1"></a>    play_caller_tenure,</span>
<span id="cb28-130"><a href="#cb28-130" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb28-131"><a href="#cb28-131" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb28-132"><a href="#cb28-132" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-133"><a href="#cb28-133" aria-hidden="true" tabindex="-1"></a>    <span class="at">temp =</span> <span class="fu">case_when</span>(</span>
<span id="cb28-134"><a href="#cb28-134" aria-hidden="true" tabindex="-1"></a>      roof <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'closed'</span>, <span class="st">'dome'</span>) <span class="sc">~</span> <span class="dv">60</span>,</span>
<span id="cb28-135"><a href="#cb28-135" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(temp) <span class="sc">~</span> <span class="dv">68</span>,</span>
<span id="cb28-136"><a href="#cb28-136" aria-hidden="true" tabindex="-1"></a>      <span class="at">.default =</span> temp</span>
<span id="cb28-137"><a href="#cb28-137" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb28-138"><a href="#cb28-138" aria-hidden="true" tabindex="-1"></a>    <span class="at">wind =</span> <span class="fu">case_when</span>(</span>
<span id="cb28-139"><a href="#cb28-139" aria-hidden="true" tabindex="-1"></a>      roof <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'closed'</span>, <span class="st">'dome'</span>) <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb28-140"><a href="#cb28-140" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(wind) <span class="sc">~</span> <span class="dv">8</span>,</span>
<span id="cb28-141"><a href="#cb28-141" aria-hidden="true" tabindex="-1"></a>      <span class="at">.default =</span> wind</span>
<span id="cb28-142"><a href="#cb28-142" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb28-143"><a href="#cb28-143" aria-hidden="true" tabindex="-1"></a>    <span class="at">surface =</span> <span class="fu">str_squish</span>(surface)</span>
<span id="cb28-144"><a href="#cb28-144" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-145"><a href="#cb28-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-146"><a href="#cb28-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-147"><a href="#cb28-147" aria-hidden="true" tabindex="-1"></a>cleaned_data <span class="ot">=</span> make_snap_shares <span class="sc">|&gt;</span></span>
<span id="cb28-148"><a href="#cb28-148" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(make_features) <span class="sc">|&gt;</span></span>
<span id="cb28-149"><a href="#cb28-149" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(make_context_vars) <span class="sc">|&gt;</span></span>
<span id="cb28-150"><a href="#cb28-150" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-151"><a href="#cb28-151" aria-hidden="true" tabindex="-1"></a>    <span class="at">surface =</span> <span class="fu">case_when</span>(</span>
<span id="cb28-152"><a href="#cb28-152" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">"Levi's® Stadium"</span> <span class="sc">~</span> <span class="st">'grass'</span>,</span>
<span id="cb28-153"><a href="#cb28-153" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">'Tottenham Hotspur Stadium'</span> <span class="sc">~</span> <span class="st">'grass'</span>,</span>
<span id="cb28-154"><a href="#cb28-154" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">'Estadio Azteca (Mexico City)'</span> <span class="sc">~</span> <span class="st">'grass'</span>,</span>
<span id="cb28-155"><a href="#cb28-155" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">'MetLife Stadium'</span> <span class="sc">~</span> <span class="st">'fiedldturf'</span>,</span>
<span id="cb28-156"><a href="#cb28-156" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span></span>
<span id="cb28-157"><a href="#cb28-157" aria-hidden="true" tabindex="-1"></a>        stadium <span class="sc">==</span> <span class="st">'GEHA Field at Arrowhead Stadium'</span> <span class="sc">~</span> <span class="st">'grass'</span>,</span>
<span id="cb28-158"><a href="#cb28-158" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">'Soldier Field'</span> <span class="sc">~</span> <span class="st">'grass'</span>,</span>
<span id="cb28-159"><a href="#cb28-159" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">"M&amp;T Bank Stadium"</span> <span class="sc">~</span> <span class="st">'grass'</span>,</span>
<span id="cb28-160"><a href="#cb28-160" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">"Empower Field at Mile High"</span> <span class="sc">~</span> <span class="st">'grass'</span>,</span>
<span id="cb28-161"><a href="#cb28-161" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">"SoFi Stadium"</span> <span class="sc">~</span> <span class="st">'matrixturf'</span>,</span>
<span id="cb28-162"><a href="#cb28-162" aria-hidden="true" tabindex="-1"></a>      <span class="co"># spirtually this is still heinz field</span></span>
<span id="cb28-163"><a href="#cb28-163" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">'Acrisure Stadium'</span> <span class="sc">~</span> <span class="st">'grass'</span>,</span>
<span id="cb28-164"><a href="#cb28-164" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">'Paycor Stadium'</span> <span class="sc">~</span> <span class="st">'a_turf'</span>,</span>
<span id="cb28-165"><a href="#cb28-165" aria-hidden="true" tabindex="-1"></a>      <span class="co"># technically the superdome is now caesars but lets just be sure</span></span>
<span id="cb28-166"><a href="#cb28-166" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span></span>
<span id="cb28-167"><a href="#cb28-167" aria-hidden="true" tabindex="-1"></a>        stadium <span class="sc">==</span> <span class="st">'Mercedes-Benz Stadium'</span> <span class="sc">&amp;</span></span>
<span id="cb28-168"><a href="#cb28-168" aria-hidden="true" tabindex="-1"></a>        home_team <span class="sc">==</span> <span class="st">'ATL'</span> <span class="sc">~</span> <span class="st">'fieldturf'</span>,</span>
<span id="cb28-169"><a href="#cb28-169" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">'EverBank Stadium'</span> <span class="sc">~</span> <span class="st">'grass'</span>,</span>
<span id="cb28-170"><a href="#cb28-170" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">'Highmark Stadium'</span> <span class="sc">~</span> <span class="st">'astroturf'</span>,</span>
<span id="cb28-171"><a href="#cb28-171" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">'Gillette Stadium'</span> <span class="sc">~</span> <span class="st">'fieldturf'</span>,</span>
<span id="cb28-172"><a href="#cb28-172" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">'AT&amp;T Stadium'</span> <span class="sc">~</span> <span class="st">'fieldturf'</span>,</span>
<span id="cb28-173"><a href="#cb28-173" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">'Ford Field'</span> <span class="sc">~</span> <span class="st">'fieldturf'</span>,</span>
<span id="cb28-174"><a href="#cb28-174" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">'Arena Corinthians'</span> <span class="sc">~</span> <span class="st">'grass'</span>,</span>
<span id="cb28-175"><a href="#cb28-175" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">'Allianz Arena'</span> <span class="sc">~</span> <span class="st">'grass'</span>,</span>
<span id="cb28-176"><a href="#cb28-176" aria-hidden="true" tabindex="-1"></a>      <span class="fu">nchar</span>(surface) <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> stadium <span class="sc">==</span> <span class="st">'Lumen Field'</span> <span class="sc">~</span> <span class="st">'fieldturf'</span>,</span>
<span id="cb28-177"><a href="#cb28-177" aria-hidden="true" tabindex="-1"></a>      <span class="at">.default =</span> surface</span>
<span id="cb28-178"><a href="#cb28-178" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb28-179"><a href="#cb28-179" aria-hidden="true" tabindex="-1"></a>    <span class="at">surface =</span> <span class="fu">str_squish</span>(surface),</span>
<span id="cb28-180"><a href="#cb28-180" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(surface, roof), \(x) <span class="fu">as.factor</span>(x))</span>
<span id="cb28-181"><a href="#cb28-181" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb28-182"><a href="#cb28-182" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>home_team)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>There are a few things in here worth mentioning briefly. Instead of separating out explosive play rate into explosive pass and run</p>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>There are many more places and ways to advertise<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Admittedly this is a pretty big simplifying assumption.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Where this is going to differ is I am going to use Polars instead of Pandas.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>You may know them as the company behind DVOA<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Very much open to suggestions on a better way to do this<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>